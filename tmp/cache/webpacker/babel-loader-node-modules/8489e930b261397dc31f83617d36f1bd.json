{"ast":null,"code":"/**\n* @version: 2.1.24\n* @author: Dan Grossman http://www.dangrossman.info/\n* @copyright: Copyright (c) 2012-2016 Dan Grossman. All rights reserved.\n* @license: Licensed under the MIT license. See http://www.opensource.org/licenses/mit-license.php\n* @website: https://www.improvely.com/\n*/\n// Follow the UMD template https://github.com/umdjs/umd/blob/master/templates/returnExportsGlobal.js\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Make globaly available as well\n    define(['moment', 'jquery'], function (moment, jquery) {\n      return root.daterangepicker = factory(moment, jquery);\n    });\n  } else if (typeof module === 'object' && module.exports) {\n    // Node / Browserify\n    //isomorphic issue\n    var jQuery = typeof window != 'undefined' ? window.jQuery : undefined;\n\n    if (!jQuery) {\n      jQuery = require('jquery');\n      if (!jQuery.fn) jQuery.fn = {};\n    }\n\n    module.exports = factory(require('moment'), jQuery);\n  } else {\n    // Browser globals\n    root.daterangepicker = factory(root.moment, root.jQuery);\n  }\n})(this, function (moment, $) {\n  var DateRangePicker = function DateRangePicker(element, options, cb) {\n    //default settings for options\n    this.parentEl = 'body';\n    this.element = $(element);\n    this.startDate = moment().startOf('day');\n    this.endDate = moment().endOf('day');\n    this.minDate = false;\n    this.maxDate = false;\n    this.dateLimit = false;\n    this.autoApply = false;\n    this.singleDatePicker = false;\n    this.showDropdowns = false;\n    this.showWeekNumbers = false;\n    this.showISOWeekNumbers = false;\n    this.showCustomRangeLabel = true;\n    this.timePicker = false;\n    this.timePicker24Hour = false;\n    this.timePickerIncrement = 1;\n    this.timePickerSeconds = false;\n    this.linkedCalendars = true;\n    this.autoUpdateInput = true;\n    this.alwaysShowCalendars = false;\n    this.ranges = {};\n    this.opens = 'right';\n    if (this.element.hasClass('pull-right')) this.opens = 'left';\n    this.drops = 'down';\n    if (this.element.hasClass('dropup')) this.drops = 'up';\n    this.buttonClasses = 'btn btn-sm';\n    this.applyClass = 'btn-success';\n    this.cancelClass = 'btn-default';\n    this.locale = {\n      direction: 'ltr',\n      format: 'MM/DD/YYYY',\n      separator: ' - ',\n      applyLabel: 'Apply',\n      cancelLabel: 'Cancel',\n      weekLabel: 'W',\n      customRangeLabel: 'Custom Range',\n      daysOfWeek: moment.weekdaysMin(),\n      monthNames: moment.monthsShort(),\n      firstDay: moment.localeData().firstDayOfWeek()\n    };\n\n    this.callback = function () {}; //some state information\n\n\n    this.isShowing = false;\n    this.leftCalendar = {};\n    this.rightCalendar = {}; //custom options from user\n\n    if (typeof options !== 'object' || options === null) options = {}; //allow setting options with data attributes\n    //data-api options will be overwritten with custom javascript options\n\n    options = $.extend(this.element.data(), options); //html template for the picker UI\n\n    if (typeof options.template !== 'string' && !(options.template instanceof $)) options.template = '<div class=\"daterangepicker dropdown-menu\">' + '<div class=\"calendar left\">' + '<div class=\"daterangepicker_input\">' + '<input class=\"input-mini form-control\" type=\"text\" name=\"daterangepicker_start\" value=\"\" />' + '<i class=\"fa fa-calendar glyphicon glyphicon-calendar\"></i>' + '<div class=\"calendar-time\">' + '<div></div>' + '<i class=\"fa fa-clock-o glyphicon glyphicon-time\"></i>' + '</div>' + '</div>' + '<div class=\"calendar-table\"></div>' + '</div>' + '<div class=\"calendar right\">' + '<div class=\"daterangepicker_input\">' + '<input class=\"input-mini form-control\" type=\"text\" name=\"daterangepicker_end\" value=\"\" />' + '<i class=\"fa fa-calendar glyphicon glyphicon-calendar\"></i>' + '<div class=\"calendar-time\">' + '<div></div>' + '<i class=\"fa fa-clock-o glyphicon glyphicon-time\"></i>' + '</div>' + '</div>' + '<div class=\"calendar-table\"></div>' + '</div>' + '<div class=\"ranges\">' + '<div class=\"range_inputs\">' + '<button class=\"applyBtn\" disabled=\"disabled\" type=\"button\"></button> ' + '<button class=\"cancelBtn\" type=\"button\"></button>' + '</div>' + '</div>' + '</div>';\n    this.parentEl = options.parentEl && $(options.parentEl).length ? $(options.parentEl) : $(this.parentEl);\n    this.container = $(options.template).appendTo(this.parentEl); //\n    // handle all the possible options overriding defaults\n    //\n\n    if (typeof options.locale === 'object') {\n      if (typeof options.locale.direction === 'string') this.locale.direction = options.locale.direction;\n      if (typeof options.locale.format === 'string') this.locale.format = options.locale.format;\n      if (typeof options.locale.separator === 'string') this.locale.separator = options.locale.separator;\n      if (typeof options.locale.daysOfWeek === 'object') this.locale.daysOfWeek = options.locale.daysOfWeek.slice();\n      if (typeof options.locale.monthNames === 'object') this.locale.monthNames = options.locale.monthNames.slice();\n      if (typeof options.locale.firstDay === 'number') this.locale.firstDay = options.locale.firstDay;\n      if (typeof options.locale.applyLabel === 'string') this.locale.applyLabel = options.locale.applyLabel;\n      if (typeof options.locale.cancelLabel === 'string') this.locale.cancelLabel = options.locale.cancelLabel;\n      if (typeof options.locale.weekLabel === 'string') this.locale.weekLabel = options.locale.weekLabel;\n      if (typeof options.locale.customRangeLabel === 'string') this.locale.customRangeLabel = options.locale.customRangeLabel;\n    }\n\n    this.container.addClass(this.locale.direction);\n    if (typeof options.startDate === 'string') this.startDate = moment(options.startDate, this.locale.format);\n    if (typeof options.endDate === 'string') this.endDate = moment(options.endDate, this.locale.format);\n    if (typeof options.minDate === 'string') this.minDate = moment(options.minDate, this.locale.format);\n    if (typeof options.maxDate === 'string') this.maxDate = moment(options.maxDate, this.locale.format);\n    if (typeof options.startDate === 'object') this.startDate = moment(options.startDate);\n    if (typeof options.endDate === 'object') this.endDate = moment(options.endDate);\n    if (typeof options.minDate === 'object') this.minDate = moment(options.minDate);\n    if (typeof options.maxDate === 'object') this.maxDate = moment(options.maxDate); // sanity check for bad options\n\n    if (this.minDate && this.startDate.isBefore(this.minDate)) this.startDate = this.minDate.clone(); // sanity check for bad options\n\n    if (this.maxDate && this.endDate.isAfter(this.maxDate)) this.endDate = this.maxDate.clone();\n    if (typeof options.applyClass === 'string') this.applyClass = options.applyClass;\n    if (typeof options.cancelClass === 'string') this.cancelClass = options.cancelClass;\n    if (typeof options.dateLimit === 'object') this.dateLimit = options.dateLimit;\n    if (typeof options.opens === 'string') this.opens = options.opens;\n    if (typeof options.drops === 'string') this.drops = options.drops;\n    if (typeof options.showWeekNumbers === 'boolean') this.showWeekNumbers = options.showWeekNumbers;\n    if (typeof options.showISOWeekNumbers === 'boolean') this.showISOWeekNumbers = options.showISOWeekNumbers;\n    if (typeof options.buttonClasses === 'string') this.buttonClasses = options.buttonClasses;\n    if (typeof options.buttonClasses === 'object') this.buttonClasses = options.buttonClasses.join(' ');\n    if (typeof options.showDropdowns === 'boolean') this.showDropdowns = options.showDropdowns;\n    if (typeof options.showCustomRangeLabel === 'boolean') this.showCustomRangeLabel = options.showCustomRangeLabel;\n\n    if (typeof options.singleDatePicker === 'boolean') {\n      this.singleDatePicker = options.singleDatePicker;\n      if (this.singleDatePicker) this.endDate = this.startDate.clone();\n    }\n\n    if (typeof options.timePicker === 'boolean') this.timePicker = options.timePicker;\n    if (typeof options.timePickerSeconds === 'boolean') this.timePickerSeconds = options.timePickerSeconds;\n    if (typeof options.timePickerIncrement === 'number') this.timePickerIncrement = options.timePickerIncrement;\n    if (typeof options.timePicker24Hour === 'boolean') this.timePicker24Hour = options.timePicker24Hour;\n    if (typeof options.autoApply === 'boolean') this.autoApply = options.autoApply;\n    if (typeof options.autoUpdateInput === 'boolean') this.autoUpdateInput = options.autoUpdateInput;\n    if (typeof options.linkedCalendars === 'boolean') this.linkedCalendars = options.linkedCalendars;\n    if (typeof options.isInvalidDate === 'function') this.isInvalidDate = options.isInvalidDate;\n    if (typeof options.isCustomDate === 'function') this.isCustomDate = options.isCustomDate;\n    if (typeof options.alwaysShowCalendars === 'boolean') this.alwaysShowCalendars = options.alwaysShowCalendars; // update day names order to firstDay\n\n    if (this.locale.firstDay != 0) {\n      var iterator = this.locale.firstDay;\n\n      while (iterator > 0) {\n        this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift());\n        iterator--;\n      }\n    }\n\n    var start, end, range; //if no start/end dates set, check if an input element contains initial values\n\n    if (typeof options.startDate === 'undefined' && typeof options.endDate === 'undefined') {\n      if ($(this.element).is('input[type=text]')) {\n        var val = $(this.element).val(),\n            split = val.split(this.locale.separator);\n        start = end = null;\n\n        if (split.length == 2) {\n          start = moment(split[0], this.locale.format);\n          end = moment(split[1], this.locale.format);\n        } else if (this.singleDatePicker && val !== \"\") {\n          start = moment(val, this.locale.format);\n          end = moment(val, this.locale.format);\n        }\n\n        if (start !== null && end !== null) {\n          this.setStartDate(start);\n          this.setEndDate(end);\n        }\n      }\n    }\n\n    if (typeof options.ranges === 'object') {\n      for (range in options.ranges) {\n        if (typeof options.ranges[range][0] === 'string') start = moment(options.ranges[range][0], this.locale.format);else start = moment(options.ranges[range][0]);\n        if (typeof options.ranges[range][1] === 'string') end = moment(options.ranges[range][1], this.locale.format);else end = moment(options.ranges[range][1]); // If the start or end date exceed those allowed by the minDate or dateLimit\n        // options, shorten the range to the allowable period.\n\n        if (this.minDate && start.isBefore(this.minDate)) start = this.minDate.clone();\n        var maxDate = this.maxDate;\n        if (this.dateLimit && maxDate && start.clone().add(this.dateLimit).isAfter(maxDate)) maxDate = start.clone().add(this.dateLimit);\n        if (maxDate && end.isAfter(maxDate)) end = maxDate.clone(); // If the end of the range is before the minimum or the start of the range is\n        // after the maximum, don't display this range option at all.\n\n        if (this.minDate && end.isBefore(this.minDate, this.timepicker ? 'minute' : 'day') || maxDate && start.isAfter(maxDate, this.timepicker ? 'minute' : 'day')) continue; //Support unicode chars in the range names.\n\n        var elem = document.createElement('textarea');\n        elem.innerHTML = range;\n        var rangeHtml = elem.value;\n        this.ranges[rangeHtml] = [start, end];\n      }\n\n      var list = '<ul>';\n\n      for (range in this.ranges) {\n        list += '<li data-range-key=\"' + range + '\">' + range + '</li>';\n      }\n\n      if (this.showCustomRangeLabel) {\n        list += '<li data-range-key=\"' + this.locale.customRangeLabel + '\">' + this.locale.customRangeLabel + '</li>';\n      }\n\n      list += '</ul>';\n      this.container.find('.ranges').prepend(list);\n    }\n\n    if (typeof cb === 'function') {\n      this.callback = cb;\n    }\n\n    if (!this.timePicker) {\n      this.startDate = this.startDate.startOf('day');\n      this.endDate = this.endDate.endOf('day');\n      this.container.find('.calendar-time').hide();\n    } //can't be used together for now\n\n\n    if (this.timePicker && this.autoApply) this.autoApply = false;\n\n    if (this.autoApply && typeof options.ranges !== 'object') {\n      this.container.find('.ranges').hide();\n    } else if (this.autoApply) {\n      this.container.find('.applyBtn, .cancelBtn').addClass('hide');\n    }\n\n    if (this.singleDatePicker) {\n      this.container.addClass('single');\n      this.container.find('.calendar.left').addClass('single');\n      this.container.find('.calendar.left').show();\n      this.container.find('.calendar.right').hide();\n      this.container.find('.daterangepicker_input input, .daterangepicker_input > i').hide();\n\n      if (this.timePicker) {\n        this.container.find('.ranges ul').hide();\n      } else {\n        this.container.find('.ranges').hide();\n      }\n    }\n\n    if (typeof options.ranges === 'undefined' && !this.singleDatePicker || this.alwaysShowCalendars) {\n      this.container.addClass('show-calendar');\n    }\n\n    this.container.addClass('opens' + this.opens); //swap the position of the predefined ranges if opens right\n\n    if (typeof options.ranges !== 'undefined' && this.opens == 'right') {\n      this.container.find('.ranges').prependTo(this.container.find('.calendar.left').parent());\n    } //apply CSS classes and labels to buttons\n\n\n    this.container.find('.applyBtn, .cancelBtn').addClass(this.buttonClasses);\n    if (this.applyClass.length) this.container.find('.applyBtn').addClass(this.applyClass);\n    if (this.cancelClass.length) this.container.find('.cancelBtn').addClass(this.cancelClass);\n    this.container.find('.applyBtn').html(this.locale.applyLabel);\n    this.container.find('.cancelBtn').html(this.locale.cancelLabel); //\n    // event listeners\n    //\n\n    this.container.find('.calendar').on('click.daterangepicker', '.prev', $.proxy(this.clickPrev, this)).on('click.daterangepicker', '.next', $.proxy(this.clickNext, this)).on('mousedown.daterangepicker', 'td.available', $.proxy(this.clickDate, this)).on('mouseenter.daterangepicker', 'td.available', $.proxy(this.hoverDate, this)).on('mouseleave.daterangepicker', 'td.available', $.proxy(this.updateFormInputs, this)).on('change.daterangepicker', 'select.yearselect', $.proxy(this.monthOrYearChanged, this)).on('change.daterangepicker', 'select.monthselect', $.proxy(this.monthOrYearChanged, this)).on('change.daterangepicker', 'select.hourselect,select.minuteselect,select.secondselect,select.ampmselect', $.proxy(this.timeChanged, this)).on('click.daterangepicker', '.daterangepicker_input input', $.proxy(this.showCalendars, this)).on('focus.daterangepicker', '.daterangepicker_input input', $.proxy(this.formInputsFocused, this)).on('blur.daterangepicker', '.daterangepicker_input input', $.proxy(this.formInputsBlurred, this)).on('change.daterangepicker', '.daterangepicker_input input', $.proxy(this.formInputsChanged, this));\n    this.container.find('.ranges').on('click.daterangepicker', 'button.applyBtn', $.proxy(this.clickApply, this)).on('click.daterangepicker', 'button.cancelBtn', $.proxy(this.clickCancel, this)).on('click.daterangepicker', 'li', $.proxy(this.clickRange, this)).on('mouseenter.daterangepicker', 'li', $.proxy(this.hoverRange, this)).on('mouseleave.daterangepicker', 'li', $.proxy(this.updateFormInputs, this));\n\n    if (this.element.is('input') || this.element.is('button')) {\n      this.element.on({\n        'click.daterangepicker': $.proxy(this.show, this),\n        'focus.daterangepicker': $.proxy(this.show, this),\n        'keyup.daterangepicker': $.proxy(this.elementChanged, this),\n        'keydown.daterangepicker': $.proxy(this.keydown, this)\n      });\n    } else {\n      this.element.on('click.daterangepicker', $.proxy(this.toggle, this));\n    } //\n    // if attached to a text input, set the initial value\n    //\n\n\n    if (this.element.is('input') && !this.singleDatePicker && this.autoUpdateInput) {\n      this.element.val(this.startDate.format(this.locale.format) + this.locale.separator + this.endDate.format(this.locale.format));\n      this.element.trigger('change');\n    } else if (this.element.is('input') && this.autoUpdateInput) {\n      this.element.val(this.startDate.format(this.locale.format));\n      this.element.trigger('change');\n    }\n  };\n\n  DateRangePicker.prototype = {\n    constructor: DateRangePicker,\n    setStartDate: function setStartDate(startDate) {\n      if (typeof startDate === 'string') this.startDate = moment(startDate, this.locale.format);\n      if (typeof startDate === 'object') this.startDate = moment(startDate);\n      if (!this.timePicker) this.startDate = this.startDate.startOf('day');\n      if (this.timePicker && this.timePickerIncrement) this.startDate.minute(Math.round(this.startDate.minute() / this.timePickerIncrement) * this.timePickerIncrement);\n\n      if (this.minDate && this.startDate.isBefore(this.minDate)) {\n        this.startDate = this.minDate;\n        if (this.timePicker && this.timePickerIncrement) this.startDate.minute(Math.round(this.startDate.minute() / this.timePickerIncrement) * this.timePickerIncrement);\n      }\n\n      if (this.maxDate && this.startDate.isAfter(this.maxDate)) {\n        this.startDate = this.maxDate;\n        if (this.timePicker && this.timePickerIncrement) this.startDate.minute(Math.floor(this.startDate.minute() / this.timePickerIncrement) * this.timePickerIncrement);\n      }\n\n      if (!this.isShowing) this.updateElement();\n      this.updateMonthsInView();\n    },\n    setEndDate: function setEndDate(endDate) {\n      if (typeof endDate === 'string') this.endDate = moment(endDate, this.locale.format);\n      if (typeof endDate === 'object') this.endDate = moment(endDate);\n      if (!this.timePicker) this.endDate = this.endDate.endOf('day');\n      if (this.timePicker && this.timePickerIncrement) this.endDate.minute(Math.round(this.endDate.minute() / this.timePickerIncrement) * this.timePickerIncrement);\n      if (this.endDate.isBefore(this.startDate)) this.endDate = this.startDate.clone();\n      if (this.maxDate && this.endDate.isAfter(this.maxDate)) this.endDate = this.maxDate;\n      if (this.dateLimit && this.startDate.clone().add(this.dateLimit).isBefore(this.endDate)) this.endDate = this.startDate.clone().add(this.dateLimit);\n      this.previousRightTime = this.endDate.clone();\n      if (!this.isShowing) this.updateElement();\n      this.updateMonthsInView();\n    },\n    isInvalidDate: function isInvalidDate() {\n      return false;\n    },\n    isCustomDate: function isCustomDate() {\n      return false;\n    },\n    updateView: function updateView() {\n      if (this.timePicker) {\n        this.renderTimePicker('left');\n        this.renderTimePicker('right');\n\n        if (!this.endDate) {\n          this.container.find('.right .calendar-time select').attr('disabled', 'disabled').addClass('disabled');\n        } else {\n          this.container.find('.right .calendar-time select').removeAttr('disabled').removeClass('disabled');\n        }\n      }\n\n      if (this.endDate) {\n        this.container.find('input[name=\"daterangepicker_end\"]').removeClass('active');\n        this.container.find('input[name=\"daterangepicker_start\"]').addClass('active');\n      } else {\n        this.container.find('input[name=\"daterangepicker_end\"]').addClass('active');\n        this.container.find('input[name=\"daterangepicker_start\"]').removeClass('active');\n      }\n\n      this.updateMonthsInView();\n      this.updateCalendars();\n      this.updateFormInputs();\n    },\n    updateMonthsInView: function updateMonthsInView() {\n      if (this.endDate) {\n        //if both dates are visible already, do nothing\n        if (!this.singleDatePicker && this.leftCalendar.month && this.rightCalendar.month && (this.startDate.format('YYYY-MM') == this.leftCalendar.month.format('YYYY-MM') || this.startDate.format('YYYY-MM') == this.rightCalendar.month.format('YYYY-MM')) && (this.endDate.format('YYYY-MM') == this.leftCalendar.month.format('YYYY-MM') || this.endDate.format('YYYY-MM') == this.rightCalendar.month.format('YYYY-MM'))) {\n          return;\n        }\n\n        this.leftCalendar.month = this.startDate.clone().date(2);\n\n        if (!this.linkedCalendars && (this.endDate.month() != this.startDate.month() || this.endDate.year() != this.startDate.year())) {\n          this.rightCalendar.month = this.endDate.clone().date(2);\n        } else {\n          this.rightCalendar.month = this.startDate.clone().date(2).add(1, 'month');\n        }\n      } else {\n        if (this.leftCalendar.month.format('YYYY-MM') != this.startDate.format('YYYY-MM') && this.rightCalendar.month.format('YYYY-MM') != this.startDate.format('YYYY-MM')) {\n          this.leftCalendar.month = this.startDate.clone().date(2);\n          this.rightCalendar.month = this.startDate.clone().date(2).add(1, 'month');\n        }\n      }\n\n      if (this.maxDate && this.linkedCalendars && !this.singleDatePicker && this.rightCalendar.month > this.maxDate) {\n        this.rightCalendar.month = this.maxDate.clone().date(2);\n        this.leftCalendar.month = this.maxDate.clone().date(2).subtract(1, 'month');\n      }\n    },\n    updateCalendars: function updateCalendars() {\n      if (this.timePicker) {\n        var hour, minute, second;\n\n        if (this.endDate) {\n          hour = parseInt(this.container.find('.left .hourselect').val(), 10);\n          minute = parseInt(this.container.find('.left .minuteselect').val(), 10);\n          second = this.timePickerSeconds ? parseInt(this.container.find('.left .secondselect').val(), 10) : 0;\n\n          if (!this.timePicker24Hour) {\n            var ampm = this.container.find('.left .ampmselect').val();\n            if (ampm === 'PM' && hour < 12) hour += 12;\n            if (ampm === 'AM' && hour === 12) hour = 0;\n          }\n        } else {\n          hour = parseInt(this.container.find('.right .hourselect').val(), 10);\n          minute = parseInt(this.container.find('.right .minuteselect').val(), 10);\n          second = this.timePickerSeconds ? parseInt(this.container.find('.right .secondselect').val(), 10) : 0;\n\n          if (!this.timePicker24Hour) {\n            var ampm = this.container.find('.right .ampmselect').val();\n            if (ampm === 'PM' && hour < 12) hour += 12;\n            if (ampm === 'AM' && hour === 12) hour = 0;\n          }\n        }\n\n        this.leftCalendar.month.hour(hour).minute(minute).second(second);\n        this.rightCalendar.month.hour(hour).minute(minute).second(second);\n      }\n\n      this.renderCalendar('left');\n      this.renderCalendar('right'); //highlight any predefined range matching the current start and end dates\n\n      this.container.find('.ranges li').removeClass('active');\n      if (this.endDate == null) return;\n      this.calculateChosenLabel();\n    },\n    renderCalendar: function renderCalendar(side) {\n      //\n      // Build the matrix of dates that will populate the calendar\n      //\n      var calendar = side == 'left' ? this.leftCalendar : this.rightCalendar;\n      var month = calendar.month.month();\n      var year = calendar.month.year();\n      var hour = calendar.month.hour();\n      var minute = calendar.month.minute();\n      var second = calendar.month.second();\n      var daysInMonth = moment([year, month]).daysInMonth();\n      var firstDay = moment([year, month, 1]);\n      var lastDay = moment([year, month, daysInMonth]);\n      var lastMonth = moment(firstDay).subtract(1, 'month').month();\n      var lastYear = moment(firstDay).subtract(1, 'month').year();\n      var daysInLastMonth = moment([lastYear, lastMonth]).daysInMonth();\n      var dayOfWeek = firstDay.day(); //initialize a 6 rows x 7 columns array for the calendar\n\n      var calendar = [];\n      calendar.firstDay = firstDay;\n      calendar.lastDay = lastDay;\n\n      for (var i = 0; i < 6; i++) {\n        calendar[i] = [];\n      } //populate the calendar with date objects\n\n\n      var startDay = daysInLastMonth - dayOfWeek + this.locale.firstDay + 1;\n      if (startDay > daysInLastMonth) startDay -= 7;\n      if (dayOfWeek == this.locale.firstDay) startDay = daysInLastMonth - 6;\n      var curDate = moment([lastYear, lastMonth, startDay, 12, minute, second]);\n      var col, row;\n\n      for (var i = 0, col = 0, row = 0; i < 42; i++, col++, curDate = moment(curDate).add(24, 'hour')) {\n        if (i > 0 && col % 7 === 0) {\n          col = 0;\n          row++;\n        }\n\n        calendar[row][col] = curDate.clone().hour(hour).minute(minute).second(second);\n        curDate.hour(12);\n\n        if (this.minDate && calendar[row][col].format('YYYY-MM-DD') == this.minDate.format('YYYY-MM-DD') && calendar[row][col].isBefore(this.minDate) && side == 'left') {\n          calendar[row][col] = this.minDate.clone();\n        }\n\n        if (this.maxDate && calendar[row][col].format('YYYY-MM-DD') == this.maxDate.format('YYYY-MM-DD') && calendar[row][col].isAfter(this.maxDate) && side == 'right') {\n          calendar[row][col] = this.maxDate.clone();\n        }\n      } //make the calendar object available to hoverDate/clickDate\n\n\n      if (side == 'left') {\n        this.leftCalendar.calendar = calendar;\n      } else {\n        this.rightCalendar.calendar = calendar;\n      } //\n      // Display the calendar\n      //\n\n\n      var minDate = side == 'left' ? this.minDate : this.startDate;\n      var maxDate = this.maxDate;\n      var selected = side == 'left' ? this.startDate : this.endDate;\n      var arrow = this.locale.direction == 'ltr' ? {\n        left: 'chevron-left',\n        right: 'chevron-right'\n      } : {\n        left: 'chevron-right',\n        right: 'chevron-left'\n      };\n      var html = '<table class=\"table-condensed\">';\n      html += '<thead>';\n      html += '<tr>'; // add empty cell for week number\n\n      if (this.showWeekNumbers || this.showISOWeekNumbers) html += '<th></th>';\n\n      if ((!minDate || minDate.isBefore(calendar.firstDay)) && (!this.linkedCalendars || side == 'left')) {\n        html += '<th class=\"prev available\"><i class=\"fa fa-' + arrow.left + ' glyphicon glyphicon-' + arrow.left + '\"></i></th>';\n      } else {\n        html += '<th></th>';\n      }\n\n      var dateHtml = this.locale.monthNames[calendar[1][1].month()] + calendar[1][1].format(\" YYYY\");\n\n      if (this.showDropdowns) {\n        var currentMonth = calendar[1][1].month();\n        var currentYear = calendar[1][1].year();\n        var maxYear = maxDate && maxDate.year() || currentYear + 5;\n        var minYear = minDate && minDate.year() || currentYear - 50;\n        var inMinYear = currentYear == minYear;\n        var inMaxYear = currentYear == maxYear;\n        var monthHtml = '<select class=\"monthselect\">';\n\n        for (var m = 0; m < 12; m++) {\n          if ((!inMinYear || m >= minDate.month()) && (!inMaxYear || m <= maxDate.month())) {\n            monthHtml += \"<option value='\" + m + \"'\" + (m === currentMonth ? \" selected='selected'\" : \"\") + \">\" + this.locale.monthNames[m] + \"</option>\";\n          } else {\n            monthHtml += \"<option value='\" + m + \"'\" + (m === currentMonth ? \" selected='selected'\" : \"\") + \" disabled='disabled'>\" + this.locale.monthNames[m] + \"</option>\";\n          }\n        }\n\n        monthHtml += \"</select>\";\n        var yearHtml = '<select class=\"yearselect\">';\n\n        for (var y = minYear; y <= maxYear; y++) {\n          yearHtml += '<option value=\"' + y + '\"' + (y === currentYear ? ' selected=\"selected\"' : '') + '>' + y + '</option>';\n        }\n\n        yearHtml += '</select>';\n        dateHtml = monthHtml + yearHtml;\n      }\n\n      html += '<th colspan=\"5\" class=\"month\">' + dateHtml + '</th>';\n\n      if ((!maxDate || maxDate.isAfter(calendar.lastDay)) && (!this.linkedCalendars || side == 'right' || this.singleDatePicker)) {\n        html += '<th class=\"next available\"><i class=\"fa fa-' + arrow.right + ' glyphicon glyphicon-' + arrow.right + '\"></i></th>';\n      } else {\n        html += '<th></th>';\n      }\n\n      html += '</tr>';\n      html += '<tr>'; // add week number label\n\n      if (this.showWeekNumbers || this.showISOWeekNumbers) html += '<th class=\"week\">' + this.locale.weekLabel + '</th>';\n      $.each(this.locale.daysOfWeek, function (index, dayOfWeek) {\n        html += '<th>' + dayOfWeek + '</th>';\n      });\n      html += '</tr>';\n      html += '</thead>';\n      html += '<tbody>'; //adjust maxDate to reflect the dateLimit setting in order to\n      //grey out end dates beyond the dateLimit\n\n      if (this.endDate == null && this.dateLimit) {\n        var maxLimit = this.startDate.clone().add(this.dateLimit).endOf('day');\n\n        if (!maxDate || maxLimit.isBefore(maxDate)) {\n          maxDate = maxLimit;\n        }\n      }\n\n      for (var row = 0; row < 6; row++) {\n        html += '<tr>'; // add week number\n\n        if (this.showWeekNumbers) html += '<td class=\"week\">' + calendar[row][0].week() + '</td>';else if (this.showISOWeekNumbers) html += '<td class=\"week\">' + calendar[row][0].isoWeek() + '</td>';\n\n        for (var col = 0; col < 7; col++) {\n          var classes = []; //highlight today's date\n\n          if (calendar[row][col].isSame(new Date(), \"day\")) classes.push('today'); //highlight weekends\n\n          if (calendar[row][col].isoWeekday() > 5) classes.push('weekend'); //grey out the dates in other months displayed at beginning and end of this calendar\n\n          if (calendar[row][col].month() != calendar[1][1].month()) classes.push('off'); //don't allow selection of dates before the minimum date\n\n          if (this.minDate && calendar[row][col].isBefore(this.minDate, 'day')) classes.push('off', 'disabled'); //don't allow selection of dates after the maximum date\n\n          if (maxDate && calendar[row][col].isAfter(maxDate, 'day')) classes.push('off', 'disabled'); //don't allow selection of date if a custom function decides it's invalid\n\n          if (this.isInvalidDate(calendar[row][col])) classes.push('off', 'disabled'); //highlight the currently selected start date\n\n          if (calendar[row][col].format('YYYY-MM-DD') == this.startDate.format('YYYY-MM-DD')) classes.push('active', 'start-date'); //highlight the currently selected end date\n\n          if (this.endDate != null && calendar[row][col].format('YYYY-MM-DD') == this.endDate.format('YYYY-MM-DD')) classes.push('active', 'end-date'); //highlight dates in-between the selected dates\n\n          if (this.endDate != null && calendar[row][col] > this.startDate && calendar[row][col] < this.endDate) classes.push('in-range'); //apply custom classes for this date\n\n          var isCustom = this.isCustomDate(calendar[row][col]);\n\n          if (isCustom !== false) {\n            if (typeof isCustom === 'string') classes.push(isCustom);else Array.prototype.push.apply(classes, isCustom);\n          }\n\n          var cname = '',\n              disabled = false;\n\n          for (var i = 0; i < classes.length; i++) {\n            cname += classes[i] + ' ';\n            if (classes[i] == 'disabled') disabled = true;\n          }\n\n          if (!disabled) cname += 'available';\n          html += '<td class=\"' + cname.replace(/^\\s+|\\s+$/g, '') + '\" data-title=\"' + 'r' + row + 'c' + col + '\">' + calendar[row][col].date() + '</td>';\n        }\n\n        html += '</tr>';\n      }\n\n      html += '</tbody>';\n      html += '</table>';\n      this.container.find('.calendar.' + side + ' .calendar-table').html(html);\n    },\n    renderTimePicker: function renderTimePicker(side) {\n      // Don't bother updating the time picker if it's currently disabled\n      // because an end date hasn't been clicked yet\n      if (side == 'right' && !this.endDate) return;\n      var html,\n          selected,\n          minDate,\n          maxDate = this.maxDate;\n      if (this.dateLimit && (!this.maxDate || this.startDate.clone().add(this.dateLimit).isAfter(this.maxDate))) maxDate = this.startDate.clone().add(this.dateLimit);\n\n      if (side == 'left') {\n        selected = this.startDate.clone();\n        minDate = this.minDate;\n      } else if (side == 'right') {\n        selected = this.endDate.clone();\n        minDate = this.startDate; //Preserve the time already selected\n\n        var timeSelector = this.container.find('.calendar.right .calendar-time div');\n\n        if (!this.endDate && timeSelector.html() != '') {\n          selected.hour(timeSelector.find('.hourselect option:selected').val() || selected.hour());\n          selected.minute(timeSelector.find('.minuteselect option:selected').val() || selected.minute());\n          selected.second(timeSelector.find('.secondselect option:selected').val() || selected.second());\n\n          if (!this.timePicker24Hour) {\n            var ampm = timeSelector.find('.ampmselect option:selected').val();\n            if (ampm === 'PM' && selected.hour() < 12) selected.hour(selected.hour() + 12);\n            if (ampm === 'AM' && selected.hour() === 12) selected.hour(0);\n          }\n        }\n\n        if (selected.isBefore(this.startDate)) selected = this.startDate.clone();\n        if (maxDate && selected.isAfter(maxDate)) selected = maxDate.clone();\n      } //\n      // hours\n      //\n\n\n      html = '<select class=\"hourselect\">';\n      var start = this.timePicker24Hour ? 0 : 1;\n      var end = this.timePicker24Hour ? 23 : 12;\n\n      for (var i = start; i <= end; i++) {\n        var i_in_24 = i;\n        if (!this.timePicker24Hour) i_in_24 = selected.hour() >= 12 ? i == 12 ? 12 : i + 12 : i == 12 ? 0 : i;\n        var time = selected.clone().hour(i_in_24);\n        var disabled = false;\n        if (minDate && time.minute(59).isBefore(minDate)) disabled = true;\n        if (maxDate && time.minute(0).isAfter(maxDate)) disabled = true;\n\n        if (i_in_24 == selected.hour() && !disabled) {\n          html += '<option value=\"' + i + '\" selected=\"selected\">' + i + '</option>';\n        } else if (disabled) {\n          html += '<option value=\"' + i + '\" disabled=\"disabled\" class=\"disabled\">' + i + '</option>';\n        } else {\n          html += '<option value=\"' + i + '\">' + i + '</option>';\n        }\n      }\n\n      html += '</select> '; //\n      // minutes\n      //\n\n      html += ': <select class=\"minuteselect\">';\n\n      for (var i = 0; i < 60; i += this.timePickerIncrement) {\n        var padded = i < 10 ? '0' + i : i;\n        var time = selected.clone().minute(i);\n        var disabled = false;\n        if (minDate && time.second(59).isBefore(minDate)) disabled = true;\n        if (maxDate && time.second(0).isAfter(maxDate)) disabled = true;\n\n        if (selected.minute() == i && !disabled) {\n          html += '<option value=\"' + i + '\" selected=\"selected\">' + padded + '</option>';\n        } else if (disabled) {\n          html += '<option value=\"' + i + '\" disabled=\"disabled\" class=\"disabled\">' + padded + '</option>';\n        } else {\n          html += '<option value=\"' + i + '\">' + padded + '</option>';\n        }\n      }\n\n      html += '</select> '; //\n      // seconds\n      //\n\n      if (this.timePickerSeconds) {\n        html += ': <select class=\"secondselect\">';\n\n        for (var i = 0; i < 60; i++) {\n          var padded = i < 10 ? '0' + i : i;\n          var time = selected.clone().second(i);\n          var disabled = false;\n          if (minDate && time.isBefore(minDate)) disabled = true;\n          if (maxDate && time.isAfter(maxDate)) disabled = true;\n\n          if (selected.second() == i && !disabled) {\n            html += '<option value=\"' + i + '\" selected=\"selected\">' + padded + '</option>';\n          } else if (disabled) {\n            html += '<option value=\"' + i + '\" disabled=\"disabled\" class=\"disabled\">' + padded + '</option>';\n          } else {\n            html += '<option value=\"' + i + '\">' + padded + '</option>';\n          }\n        }\n\n        html += '</select> ';\n      } //\n      // AM/PM\n      //\n\n\n      if (!this.timePicker24Hour) {\n        html += '<select class=\"ampmselect\">';\n        var am_html = '';\n        var pm_html = '';\n        if (minDate && selected.clone().hour(12).minute(0).second(0).isBefore(minDate)) am_html = ' disabled=\"disabled\" class=\"disabled\"';\n        if (maxDate && selected.clone().hour(0).minute(0).second(0).isAfter(maxDate)) pm_html = ' disabled=\"disabled\" class=\"disabled\"';\n\n        if (selected.hour() >= 12) {\n          html += '<option value=\"AM\"' + am_html + '>AM</option><option value=\"PM\" selected=\"selected\"' + pm_html + '>PM</option>';\n        } else {\n          html += '<option value=\"AM\" selected=\"selected\"' + am_html + '>AM</option><option value=\"PM\"' + pm_html + '>PM</option>';\n        }\n\n        html += '</select>';\n      }\n\n      this.container.find('.calendar.' + side + ' .calendar-time div').html(html);\n    },\n    updateFormInputs: function updateFormInputs() {\n      //ignore mouse movements while an above-calendar text input has focus\n      if (this.container.find('input[name=daterangepicker_start]').is(\":focus\") || this.container.find('input[name=daterangepicker_end]').is(\":focus\")) return;\n      this.container.find('input[name=daterangepicker_start]').val(this.startDate.format(this.locale.format));\n      if (this.endDate) this.container.find('input[name=daterangepicker_end]').val(this.endDate.format(this.locale.format));\n\n      if (this.singleDatePicker || this.endDate && (this.startDate.isBefore(this.endDate) || this.startDate.isSame(this.endDate))) {\n        this.container.find('button.applyBtn').removeAttr('disabled');\n      } else {\n        this.container.find('button.applyBtn').attr('disabled', 'disabled');\n      }\n    },\n    move: function move() {\n      var parentOffset = {\n        top: 0,\n        left: 0\n      },\n          containerTop;\n      var parentRightEdge = $(window).width();\n\n      if (!this.parentEl.is('body')) {\n        parentOffset = {\n          top: this.parentEl.offset().top - this.parentEl.scrollTop(),\n          left: this.parentEl.offset().left - this.parentEl.scrollLeft()\n        };\n        parentRightEdge = this.parentEl[0].clientWidth + this.parentEl.offset().left;\n      }\n\n      if (this.drops == 'up') containerTop = this.element.offset().top - this.container.outerHeight() - parentOffset.top;else containerTop = this.element.offset().top + this.element.outerHeight() - parentOffset.top;\n      this.container[this.drops == 'up' ? 'addClass' : 'removeClass']('dropup');\n\n      if (this.opens == 'left') {\n        this.container.css({\n          top: containerTop,\n          right: parentRightEdge - this.element.offset().left - this.element.outerWidth(),\n          left: 'auto'\n        });\n\n        if (this.container.offset().left < 0) {\n          this.container.css({\n            right: 'auto',\n            left: 9\n          });\n        }\n      } else if (this.opens == 'center') {\n        this.container.css({\n          top: containerTop,\n          left: this.element.offset().left - parentOffset.left + this.element.outerWidth() / 2 - this.container.outerWidth() / 2,\n          right: 'auto'\n        });\n\n        if (this.container.offset().left < 0) {\n          this.container.css({\n            right: 'auto',\n            left: 9\n          });\n        }\n      } else {\n        this.container.css({\n          top: containerTop,\n          left: this.element.offset().left - parentOffset.left,\n          right: 'auto'\n        });\n\n        if (this.container.offset().left + this.container.outerWidth() > $(window).width()) {\n          this.container.css({\n            left: 'auto',\n            right: 0\n          });\n        }\n      }\n    },\n    show: function show(e) {\n      if (this.isShowing) return; // Create a click proxy that is private to this instance of datepicker, for unbinding\n\n      this._outsideClickProxy = $.proxy(function (e) {\n        this.outsideClick(e);\n      }, this); // Bind global datepicker mousedown for hiding and\n\n      $(document).on('mousedown.daterangepicker', this._outsideClickProxy) // also support mobile devices\n      .on('touchend.daterangepicker', this._outsideClickProxy) // also explicitly play nice with Bootstrap dropdowns, which stopPropagation when clicking them\n      .on('click.daterangepicker', '[data-toggle=dropdown]', this._outsideClickProxy) // and also close when focus changes to outside the picker (eg. tabbing between controls)\n      .on('focusin.daterangepicker', this._outsideClickProxy); // Reposition the picker if the window is resized while it's open\n\n      $(window).on('resize.daterangepicker', $.proxy(function (e) {\n        this.move(e);\n      }, this));\n      this.oldStartDate = this.startDate.clone();\n      this.oldEndDate = this.endDate.clone();\n      this.previousRightTime = this.endDate.clone();\n      this.updateView();\n      this.container.show();\n      this.move();\n      this.element.trigger('show.daterangepicker', this);\n      this.isShowing = true;\n    },\n    hide: function hide(e) {\n      if (!this.isShowing) return; //incomplete date selection, revert to last values\n\n      if (!this.endDate) {\n        this.startDate = this.oldStartDate.clone();\n        this.endDate = this.oldEndDate.clone();\n      } //if a new date range was selected, invoke the user callback function\n\n\n      if (!this.startDate.isSame(this.oldStartDate) || !this.endDate.isSame(this.oldEndDate)) this.callback(this.startDate, this.endDate, this.chosenLabel); //if picker is attached to a text input, update it\n\n      this.updateElement();\n      $(document).off('.daterangepicker');\n      $(window).off('.daterangepicker');\n      this.container.hide();\n      this.element.trigger('hide.daterangepicker', this);\n      this.isShowing = false;\n    },\n    toggle: function toggle(e) {\n      if (this.isShowing) {\n        this.hide();\n      } else {\n        this.show();\n      }\n    },\n    outsideClick: function outsideClick(e) {\n      var target = $(e.target); // if the page is clicked anywhere except within the daterangerpicker/button\n      // itself then call this.hide()\n\n      if ( // ie modal dialog fix\n      e.type == \"focusin\" || target.closest(this.element).length || target.closest(this.container).length || target.closest('.calendar-table').length) return;\n      this.hide();\n      this.element.trigger('outsideClick.daterangepicker', this);\n    },\n    showCalendars: function showCalendars() {\n      this.container.addClass('show-calendar');\n      this.move();\n      this.element.trigger('showCalendar.daterangepicker', this);\n    },\n    hideCalendars: function hideCalendars() {\n      this.container.removeClass('show-calendar');\n      this.element.trigger('hideCalendar.daterangepicker', this);\n    },\n    hoverRange: function hoverRange(e) {\n      //ignore mouse movements while an above-calendar text input has focus\n      if (this.container.find('input[name=daterangepicker_start]').is(\":focus\") || this.container.find('input[name=daterangepicker_end]').is(\":focus\")) return;\n      var label = e.target.getAttribute('data-range-key');\n\n      if (label == this.locale.customRangeLabel) {\n        this.updateView();\n      } else {\n        var dates = this.ranges[label];\n        this.container.find('input[name=daterangepicker_start]').val(dates[0].format(this.locale.format));\n        this.container.find('input[name=daterangepicker_end]').val(dates[1].format(this.locale.format));\n      }\n    },\n    clickRange: function clickRange(e) {\n      var label = e.target.getAttribute('data-range-key');\n      this.chosenLabel = label;\n\n      if (label == this.locale.customRangeLabel) {\n        this.showCalendars();\n      } else {\n        var dates = this.ranges[label];\n        this.startDate = dates[0];\n        this.endDate = dates[1];\n\n        if (!this.timePicker) {\n          this.startDate.startOf('day');\n          this.endDate.endOf('day');\n        }\n\n        if (!this.alwaysShowCalendars) this.hideCalendars();\n        this.clickApply();\n      }\n    },\n    clickPrev: function clickPrev(e) {\n      var cal = $(e.target).parents('.calendar');\n\n      if (cal.hasClass('left')) {\n        this.leftCalendar.month.subtract(1, 'month');\n        if (this.linkedCalendars) this.rightCalendar.month.subtract(1, 'month');\n      } else {\n        this.rightCalendar.month.subtract(1, 'month');\n      }\n\n      this.updateCalendars();\n    },\n    clickNext: function clickNext(e) {\n      var cal = $(e.target).parents('.calendar');\n\n      if (cal.hasClass('left')) {\n        this.leftCalendar.month.add(1, 'month');\n      } else {\n        this.rightCalendar.month.add(1, 'month');\n        if (this.linkedCalendars) this.leftCalendar.month.add(1, 'month');\n      }\n\n      this.updateCalendars();\n    },\n    hoverDate: function hoverDate(e) {\n      //ignore mouse movements while an above-calendar text input has focus\n      //if (this.container.find('input[name=daterangepicker_start]').is(\":focus\") || this.container.find('input[name=daterangepicker_end]').is(\":focus\"))\n      //    return;\n      //ignore dates that can't be selected\n      if (!$(e.target).hasClass('available')) return; //have the text inputs above calendars reflect the date being hovered over\n\n      var title = $(e.target).attr('data-title');\n      var row = title.substr(1, 1);\n      var col = title.substr(3, 1);\n      var cal = $(e.target).parents('.calendar');\n      var date = cal.hasClass('left') ? this.leftCalendar.calendar[row][col] : this.rightCalendar.calendar[row][col];\n\n      if (this.endDate && !this.container.find('input[name=daterangepicker_start]').is(\":focus\")) {\n        this.container.find('input[name=daterangepicker_start]').val(date.format(this.locale.format));\n      } else if (!this.endDate && !this.container.find('input[name=daterangepicker_end]').is(\":focus\")) {\n        this.container.find('input[name=daterangepicker_end]').val(date.format(this.locale.format));\n      } //highlight the dates between the start date and the date being hovered as a potential end date\n\n\n      var leftCalendar = this.leftCalendar;\n      var rightCalendar = this.rightCalendar;\n      var startDate = this.startDate;\n\n      if (!this.endDate) {\n        this.container.find('.calendar td').each(function (index, el) {\n          //skip week numbers, only look at dates\n          if ($(el).hasClass('week')) return;\n          var title = $(el).attr('data-title');\n          var row = title.substr(1, 1);\n          var col = title.substr(3, 1);\n          var cal = $(el).parents('.calendar');\n          var dt = cal.hasClass('left') ? leftCalendar.calendar[row][col] : rightCalendar.calendar[row][col];\n\n          if (dt.isAfter(startDate) && dt.isBefore(date) || dt.isSame(date, 'day')) {\n            $(el).addClass('in-range');\n          } else {\n            $(el).removeClass('in-range');\n          }\n        });\n      }\n    },\n    clickDate: function clickDate(e) {\n      if (!$(e.target).hasClass('available')) return;\n      var title = $(e.target).attr('data-title');\n      var row = title.substr(1, 1);\n      var col = title.substr(3, 1);\n      var cal = $(e.target).parents('.calendar');\n      var date = cal.hasClass('left') ? this.leftCalendar.calendar[row][col] : this.rightCalendar.calendar[row][col]; //\n      // this function needs to do a few things:\n      // * alternate between selecting a start and end date for the range,\n      // * if the time picker is enabled, apply the hour/minute/second from the select boxes to the clicked date\n      // * if autoapply is enabled, and an end date was chosen, apply the selection\n      // * if single date picker mode, and time picker isn't enabled, apply the selection immediately\n      // * if one of the inputs above the calendars was focused, cancel that manual input\n      //\n\n      if (this.endDate || date.isBefore(this.startDate, 'day')) {\n        //picking start\n        if (this.timePicker) {\n          var hour = parseInt(this.container.find('.left .hourselect').val(), 10);\n\n          if (!this.timePicker24Hour) {\n            var ampm = this.container.find('.left .ampmselect').val();\n            if (ampm === 'PM' && hour < 12) hour += 12;\n            if (ampm === 'AM' && hour === 12) hour = 0;\n          }\n\n          var minute = parseInt(this.container.find('.left .minuteselect').val(), 10);\n          var second = this.timePickerSeconds ? parseInt(this.container.find('.left .secondselect').val(), 10) : 0;\n          date = date.clone().hour(hour).minute(minute).second(second);\n        }\n\n        this.endDate = null;\n        this.setStartDate(date.clone());\n      } else if (!this.endDate && date.isBefore(this.startDate)) {\n        //special case: clicking the same date for start/end,\n        //but the time of the end date is before the start date\n        this.setEndDate(this.startDate.clone());\n      } else {\n        // picking end\n        if (this.timePicker) {\n          var hour = parseInt(this.container.find('.right .hourselect').val(), 10);\n\n          if (!this.timePicker24Hour) {\n            var ampm = this.container.find('.right .ampmselect').val();\n            if (ampm === 'PM' && hour < 12) hour += 12;\n            if (ampm === 'AM' && hour === 12) hour = 0;\n          }\n\n          var minute = parseInt(this.container.find('.right .minuteselect').val(), 10);\n          var second = this.timePickerSeconds ? parseInt(this.container.find('.right .secondselect').val(), 10) : 0;\n          date = date.clone().hour(hour).minute(minute).second(second);\n        }\n\n        this.setEndDate(date.clone());\n\n        if (this.autoApply) {\n          this.calculateChosenLabel();\n          this.clickApply();\n        }\n      }\n\n      if (this.singleDatePicker) {\n        this.setEndDate(this.startDate);\n        if (!this.timePicker) this.clickApply();\n      }\n\n      this.updateView(); //This is to cancel the blur event handler if the mouse was in one of the inputs\n\n      e.stopPropagation();\n    },\n    calculateChosenLabel: function calculateChosenLabel() {\n      var customRange = true;\n      var i = 0;\n\n      for (var range in this.ranges) {\n        if (this.timePicker) {\n          if (this.startDate.isSame(this.ranges[range][0]) && this.endDate.isSame(this.ranges[range][1])) {\n            customRange = false;\n            this.chosenLabel = this.container.find('.ranges li:eq(' + i + ')').addClass('active').html();\n            break;\n          }\n        } else {\n          //ignore times when comparing dates if time picker is not enabled\n          if (this.startDate.format('YYYY-MM-DD') == this.ranges[range][0].format('YYYY-MM-DD') && this.endDate.format('YYYY-MM-DD') == this.ranges[range][1].format('YYYY-MM-DD')) {\n            customRange = false;\n            this.chosenLabel = this.container.find('.ranges li:eq(' + i + ')').addClass('active').html();\n            break;\n          }\n        }\n\n        i++;\n      }\n\n      if (customRange && this.showCustomRangeLabel) {\n        this.chosenLabel = this.container.find('.ranges li:last').addClass('active').html();\n        this.showCalendars();\n      }\n    },\n    clickApply: function clickApply(e) {\n      this.hide();\n      this.element.trigger('apply.daterangepicker', this);\n    },\n    clickCancel: function clickCancel(e) {\n      this.startDate = this.oldStartDate;\n      this.endDate = this.oldEndDate;\n      this.hide();\n      this.element.trigger('cancel.daterangepicker', this);\n    },\n    monthOrYearChanged: function monthOrYearChanged(e) {\n      var isLeft = $(e.target).closest('.calendar').hasClass('left'),\n          leftOrRight = isLeft ? 'left' : 'right',\n          cal = this.container.find('.calendar.' + leftOrRight); // Month must be Number for new moment versions\n\n      var month = parseInt(cal.find('.monthselect').val(), 10);\n      var year = cal.find('.yearselect').val();\n\n      if (!isLeft) {\n        if (year < this.startDate.year() || year == this.startDate.year() && month < this.startDate.month()) {\n          month = this.startDate.month();\n          year = this.startDate.year();\n        }\n      }\n\n      if (this.minDate) {\n        if (year < this.minDate.year() || year == this.minDate.year() && month < this.minDate.month()) {\n          month = this.minDate.month();\n          year = this.minDate.year();\n        }\n      }\n\n      if (this.maxDate) {\n        if (year > this.maxDate.year() || year == this.maxDate.year() && month > this.maxDate.month()) {\n          month = this.maxDate.month();\n          year = this.maxDate.year();\n        }\n      }\n\n      if (isLeft) {\n        this.leftCalendar.month.month(month).year(year);\n        if (this.linkedCalendars) this.rightCalendar.month = this.leftCalendar.month.clone().add(1, 'month');\n      } else {\n        this.rightCalendar.month.month(month).year(year);\n        if (this.linkedCalendars) this.leftCalendar.month = this.rightCalendar.month.clone().subtract(1, 'month');\n      }\n\n      this.updateCalendars();\n    },\n    timeChanged: function timeChanged(e) {\n      var cal = $(e.target).closest('.calendar'),\n          isLeft = cal.hasClass('left');\n      var hour = parseInt(cal.find('.hourselect').val(), 10);\n      var minute = parseInt(cal.find('.minuteselect').val(), 10);\n      var second = this.timePickerSeconds ? parseInt(cal.find('.secondselect').val(), 10) : 0;\n\n      if (!this.timePicker24Hour) {\n        var ampm = cal.find('.ampmselect').val();\n        if (ampm === 'PM' && hour < 12) hour += 12;\n        if (ampm === 'AM' && hour === 12) hour = 0;\n      }\n\n      if (isLeft) {\n        var start = this.startDate.clone();\n        start.hour(hour);\n        start.minute(minute);\n        start.second(second);\n        this.setStartDate(start);\n\n        if (this.singleDatePicker) {\n          this.endDate = this.startDate.clone();\n        } else if (this.endDate && this.endDate.format('YYYY-MM-DD') == start.format('YYYY-MM-DD') && this.endDate.isBefore(start)) {\n          this.setEndDate(start.clone());\n        }\n      } else if (this.endDate) {\n        var end = this.endDate.clone();\n        end.hour(hour);\n        end.minute(minute);\n        end.second(second);\n        this.setEndDate(end);\n      } //update the calendars so all clickable dates reflect the new time component\n\n\n      this.updateCalendars(); //update the form inputs above the calendars with the new time\n\n      this.updateFormInputs(); //re-render the time pickers because changing one selection can affect what's enabled in another\n\n      this.renderTimePicker('left');\n      this.renderTimePicker('right');\n    },\n    formInputsChanged: function formInputsChanged(e) {\n      var isRight = $(e.target).closest('.calendar').hasClass('right');\n      var start = moment(this.container.find('input[name=\"daterangepicker_start\"]').val(), this.locale.format);\n      var end = moment(this.container.find('input[name=\"daterangepicker_end\"]').val(), this.locale.format);\n\n      if (start.isValid() && end.isValid()) {\n        if (isRight && end.isBefore(start)) start = end.clone();\n        this.setStartDate(start);\n        this.setEndDate(end);\n\n        if (isRight) {\n          this.container.find('input[name=\"daterangepicker_start\"]').val(this.startDate.format(this.locale.format));\n        } else {\n          this.container.find('input[name=\"daterangepicker_end\"]').val(this.endDate.format(this.locale.format));\n        }\n      }\n\n      this.updateView();\n    },\n    formInputsFocused: function formInputsFocused(e) {\n      // Highlight the focused input\n      this.container.find('input[name=\"daterangepicker_start\"], input[name=\"daterangepicker_end\"]').removeClass('active');\n      $(e.target).addClass('active'); // Set the state such that if the user goes back to using a mouse, \n      // the calendars are aware we're selecting the end of the range, not\n      // the start. This allows someone to edit the end of a date range without\n      // re-selecting the beginning, by clicking on the end date input then\n      // using the calendar.\n\n      var isRight = $(e.target).closest('.calendar').hasClass('right');\n\n      if (isRight) {\n        this.endDate = null;\n        this.setStartDate(this.startDate.clone());\n        this.updateView();\n      }\n    },\n    formInputsBlurred: function formInputsBlurred(e) {\n      // this function has one purpose right now: if you tab from the first\n      // text input to the second in the UI, the endDate is nulled so that\n      // you can click another, but if you tab out without clicking anything\n      // or changing the input value, the old endDate should be retained\n      if (!this.endDate) {\n        var val = this.container.find('input[name=\"daterangepicker_end\"]').val();\n        var end = moment(val, this.locale.format);\n\n        if (end.isValid()) {\n          this.setEndDate(end);\n          this.updateView();\n        }\n      }\n    },\n    elementChanged: function elementChanged() {\n      if (!this.element.is('input')) return;\n      if (!this.element.val().length) return;\n      if (this.element.val().length < this.locale.format.length) return;\n      var dateString = this.element.val().split(this.locale.separator),\n          start = null,\n          end = null;\n\n      if (dateString.length === 2) {\n        start = moment(dateString[0], this.locale.format);\n        end = moment(dateString[1], this.locale.format);\n      }\n\n      if (this.singleDatePicker || start === null || end === null) {\n        start = moment(this.element.val(), this.locale.format);\n        end = start;\n      }\n\n      if (!start.isValid() || !end.isValid()) return;\n      this.setStartDate(start);\n      this.setEndDate(end);\n      this.updateView();\n    },\n    keydown: function keydown(e) {\n      //hide on tab or enter\n      if (e.keyCode === 9 || e.keyCode === 13) {\n        this.hide();\n      }\n    },\n    updateElement: function updateElement() {\n      if (this.element.is('input') && !this.singleDatePicker && this.autoUpdateInput) {\n        this.element.val(this.startDate.format(this.locale.format) + this.locale.separator + this.endDate.format(this.locale.format));\n        this.element.trigger('change');\n      } else if (this.element.is('input') && this.autoUpdateInput) {\n        this.element.val(this.startDate.format(this.locale.format));\n        this.element.trigger('change');\n      }\n    },\n    remove: function remove() {\n      this.container.remove();\n      this.element.off('.daterangepicker');\n      this.element.removeData();\n    }\n  };\n\n  $.fn.daterangepicker = function (options, callback) {\n    this.each(function () {\n      var el = $(this);\n      if (el.data('daterangepicker')) el.data('daterangepicker').remove();\n      el.data('daterangepicker', new DateRangePicker(el, options, callback));\n    });\n    return this;\n  };\n\n  return DateRangePicker;\n});","map":{"version":3,"sources":["/Users/david/Winner-Stock/app/javascript/daterangepicker.js"],"names":["root","factory","define","amd","moment","jquery","daterangepicker","module","exports","jQuery","window","undefined","require","fn","$","DateRangePicker","element","options","cb","parentEl","startDate","startOf","endDate","endOf","minDate","maxDate","dateLimit","autoApply","singleDatePicker","showDropdowns","showWeekNumbers","showISOWeekNumbers","showCustomRangeLabel","timePicker","timePicker24Hour","timePickerIncrement","timePickerSeconds","linkedCalendars","autoUpdateInput","alwaysShowCalendars","ranges","opens","hasClass","drops","buttonClasses","applyClass","cancelClass","locale","direction","format","separator","applyLabel","cancelLabel","weekLabel","customRangeLabel","daysOfWeek","weekdaysMin","monthNames","monthsShort","firstDay","localeData","firstDayOfWeek","callback","isShowing","leftCalendar","rightCalendar","extend","data","template","length","container","appendTo","slice","addClass","isBefore","clone","isAfter","join","isInvalidDate","isCustomDate","iterator","push","shift","start","end","range","is","val","split","setStartDate","setEndDate","add","timepicker","elem","document","createElement","innerHTML","rangeHtml","value","list","find","prepend","hide","show","prependTo","parent","html","on","proxy","clickPrev","clickNext","clickDate","hoverDate","updateFormInputs","monthOrYearChanged","timeChanged","showCalendars","formInputsFocused","formInputsBlurred","formInputsChanged","clickApply","clickCancel","clickRange","hoverRange","elementChanged","keydown","toggle","trigger","prototype","constructor","minute","Math","round","floor","updateElement","updateMonthsInView","previousRightTime","updateView","renderTimePicker","attr","removeAttr","removeClass","updateCalendars","month","date","year","subtract","hour","second","parseInt","ampm","renderCalendar","calculateChosenLabel","side","calendar","daysInMonth","lastDay","lastMonth","lastYear","daysInLastMonth","dayOfWeek","day","i","startDay","curDate","col","row","selected","arrow","left","right","dateHtml","currentMonth","currentYear","maxYear","minYear","inMinYear","inMaxYear","monthHtml","m","yearHtml","y","each","index","maxLimit","week","isoWeek","classes","isSame","Date","isoWeekday","isCustom","Array","apply","cname","disabled","replace","timeSelector","i_in_24","time","padded","am_html","pm_html","move","parentOffset","top","containerTop","parentRightEdge","width","offset","scrollTop","scrollLeft","clientWidth","outerHeight","css","outerWidth","e","_outsideClickProxy","outsideClick","oldStartDate","oldEndDate","chosenLabel","off","target","type","closest","hideCalendars","label","getAttribute","dates","cal","parents","title","substr","el","dt","stopPropagation","customRange","isLeft","leftOrRight","isRight","isValid","dateString","keyCode","remove","removeData"],"mappings":"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","sourcesContent":["/**\n* @version: 2.1.24\n* @author: Dan Grossman http://www.dangrossman.info/\n* @copyright: Copyright (c) 2012-2016 Dan Grossman. All rights reserved.\n* @license: Licensed under the MIT license. See http://www.opensource.org/licenses/mit-license.php\n* @website: https://www.improvely.com/\n*/\n// Follow the UMD template https://github.com/umdjs/umd/blob/master/templates/returnExportsGlobal.js\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Make globaly available as well\n        define(['moment', 'jquery'], function (moment, jquery) {\n            return (root.daterangepicker = factory(moment, jquery));\n        });\n    } else if (typeof module === 'object' && module.exports) {\n        // Node / Browserify\n        //isomorphic issue\n        var jQuery = (typeof window != 'undefined') ? window.jQuery : undefined;\n        if (!jQuery) {\n            jQuery = require('jquery');\n            if (!jQuery.fn) jQuery.fn = {};\n        }\n        module.exports = factory(require('moment'), jQuery);\n    } else {\n        // Browser globals\n        root.daterangepicker = factory(root.moment, root.jQuery);\n    }\n}(this, function(moment, $) {\n    var DateRangePicker = function(element, options, cb) {\n\n        //default settings for options\n        this.parentEl = 'body';\n        this.element = $(element);\n        this.startDate = moment().startOf('day');\n        this.endDate = moment().endOf('day');\n        this.minDate = false;\n        this.maxDate = false;\n        this.dateLimit = false;\n        this.autoApply = false;\n        this.singleDatePicker = false;\n        this.showDropdowns = false;\n        this.showWeekNumbers = false;\n        this.showISOWeekNumbers = false;\n        this.showCustomRangeLabel = true;\n        this.timePicker = false;\n        this.timePicker24Hour = false;\n        this.timePickerIncrement = 1;\n        this.timePickerSeconds = false;\n        this.linkedCalendars = true;\n        this.autoUpdateInput = true;\n        this.alwaysShowCalendars = false;\n        this.ranges = {};\n\n        this.opens = 'right';\n        if (this.element.hasClass('pull-right'))\n            this.opens = 'left';\n\n        this.drops = 'down';\n        if (this.element.hasClass('dropup'))\n            this.drops = 'up';\n\n        this.buttonClasses = 'btn btn-sm';\n        this.applyClass = 'btn-success';\n        this.cancelClass = 'btn-default';\n\n        this.locale = {\n            direction: 'ltr',\n            format: 'MM/DD/YYYY',\n            separator: ' - ',\n            applyLabel: 'Apply',\n            cancelLabel: 'Cancel',\n            weekLabel: 'W',\n            customRangeLabel: 'Custom Range',\n            daysOfWeek: moment.weekdaysMin(),\n            monthNames: moment.monthsShort(),\n            firstDay: moment.localeData().firstDayOfWeek()\n        };\n\n        this.callback = function() { };\n\n        //some state information\n        this.isShowing = false;\n        this.leftCalendar = {};\n        this.rightCalendar = {};\n\n        //custom options from user\n        if (typeof options !== 'object' || options === null)\n            options = {};\n\n        //allow setting options with data attributes\n        //data-api options will be overwritten with custom javascript options\n        options = $.extend(this.element.data(), options);\n\n        //html template for the picker UI\n        if (typeof options.template !== 'string' && !(options.template instanceof $))\n            options.template = '<div class=\"daterangepicker dropdown-menu\">' +\n                '<div class=\"calendar left\">' +\n                    '<div class=\"daterangepicker_input\">' +\n                      '<input class=\"input-mini form-control\" type=\"text\" name=\"daterangepicker_start\" value=\"\" />' +\n                      '<i class=\"fa fa-calendar glyphicon glyphicon-calendar\"></i>' +\n                      '<div class=\"calendar-time\">' +\n                        '<div></div>' +\n                        '<i class=\"fa fa-clock-o glyphicon glyphicon-time\"></i>' +\n                      '</div>' +\n                    '</div>' +\n                    '<div class=\"calendar-table\"></div>' +\n                '</div>' +\n                '<div class=\"calendar right\">' +\n                    '<div class=\"daterangepicker_input\">' +\n                      '<input class=\"input-mini form-control\" type=\"text\" name=\"daterangepicker_end\" value=\"\" />' +\n                      '<i class=\"fa fa-calendar glyphicon glyphicon-calendar\"></i>' +\n                      '<div class=\"calendar-time\">' +\n                        '<div></div>' +\n                        '<i class=\"fa fa-clock-o glyphicon glyphicon-time\"></i>' +\n                      '</div>' +\n                    '</div>' +\n                    '<div class=\"calendar-table\"></div>' +\n                '</div>' +\n                '<div class=\"ranges\">' +\n                    '<div class=\"range_inputs\">' +\n                        '<button class=\"applyBtn\" disabled=\"disabled\" type=\"button\"></button> ' +\n                        '<button class=\"cancelBtn\" type=\"button\"></button>' +\n                    '</div>' +\n                '</div>' +\n            '</div>';\n\n        this.parentEl = (options.parentEl && $(options.parentEl).length) ? $(options.parentEl) : $(this.parentEl);\n        this.container = $(options.template).appendTo(this.parentEl);\n\n        //\n        // handle all the possible options overriding defaults\n        //\n\n        if (typeof options.locale === 'object') {\n\n            if (typeof options.locale.direction === 'string')\n                this.locale.direction = options.locale.direction;\n\n            if (typeof options.locale.format === 'string')\n                this.locale.format = options.locale.format;\n\n            if (typeof options.locale.separator === 'string')\n                this.locale.separator = options.locale.separator;\n\n            if (typeof options.locale.daysOfWeek === 'object')\n                this.locale.daysOfWeek = options.locale.daysOfWeek.slice();\n\n            if (typeof options.locale.monthNames === 'object')\n              this.locale.monthNames = options.locale.monthNames.slice();\n\n            if (typeof options.locale.firstDay === 'number')\n              this.locale.firstDay = options.locale.firstDay;\n\n            if (typeof options.locale.applyLabel === 'string')\n              this.locale.applyLabel = options.locale.applyLabel;\n\n            if (typeof options.locale.cancelLabel === 'string')\n              this.locale.cancelLabel = options.locale.cancelLabel;\n\n            if (typeof options.locale.weekLabel === 'string')\n              this.locale.weekLabel = options.locale.weekLabel;\n\n            if (typeof options.locale.customRangeLabel === 'string')\n              this.locale.customRangeLabel = options.locale.customRangeLabel;\n\n        }\n        this.container.addClass(this.locale.direction);\n\n        if (typeof options.startDate === 'string')\n            this.startDate = moment(options.startDate, this.locale.format);\n\n        if (typeof options.endDate === 'string')\n            this.endDate = moment(options.endDate, this.locale.format);\n\n        if (typeof options.minDate === 'string')\n            this.minDate = moment(options.minDate, this.locale.format);\n\n        if (typeof options.maxDate === 'string')\n            this.maxDate = moment(options.maxDate, this.locale.format);\n\n        if (typeof options.startDate === 'object')\n            this.startDate = moment(options.startDate);\n\n        if (typeof options.endDate === 'object')\n            this.endDate = moment(options.endDate);\n\n        if (typeof options.minDate === 'object')\n            this.minDate = moment(options.minDate);\n\n        if (typeof options.maxDate === 'object')\n            this.maxDate = moment(options.maxDate);\n\n        // sanity check for bad options\n        if (this.minDate && this.startDate.isBefore(this.minDate))\n            this.startDate = this.minDate.clone();\n\n        // sanity check for bad options\n        if (this.maxDate && this.endDate.isAfter(this.maxDate))\n            this.endDate = this.maxDate.clone();\n\n        if (typeof options.applyClass === 'string')\n            this.applyClass = options.applyClass;\n\n        if (typeof options.cancelClass === 'string')\n            this.cancelClass = options.cancelClass;\n\n        if (typeof options.dateLimit === 'object')\n            this.dateLimit = options.dateLimit;\n\n        if (typeof options.opens === 'string')\n            this.opens = options.opens;\n\n        if (typeof options.drops === 'string')\n            this.drops = options.drops;\n\n        if (typeof options.showWeekNumbers === 'boolean')\n            this.showWeekNumbers = options.showWeekNumbers;\n\n        if (typeof options.showISOWeekNumbers === 'boolean')\n            this.showISOWeekNumbers = options.showISOWeekNumbers;\n\n        if (typeof options.buttonClasses === 'string')\n            this.buttonClasses = options.buttonClasses;\n\n        if (typeof options.buttonClasses === 'object')\n            this.buttonClasses = options.buttonClasses.join(' ');\n\n        if (typeof options.showDropdowns === 'boolean')\n            this.showDropdowns = options.showDropdowns;\n\n        if (typeof options.showCustomRangeLabel === 'boolean')\n            this.showCustomRangeLabel = options.showCustomRangeLabel;\n\n        if (typeof options.singleDatePicker === 'boolean') {\n            this.singleDatePicker = options.singleDatePicker;\n            if (this.singleDatePicker)\n                this.endDate = this.startDate.clone();\n        }\n\n        if (typeof options.timePicker === 'boolean')\n            this.timePicker = options.timePicker;\n\n        if (typeof options.timePickerSeconds === 'boolean')\n            this.timePickerSeconds = options.timePickerSeconds;\n\n        if (typeof options.timePickerIncrement === 'number')\n            this.timePickerIncrement = options.timePickerIncrement;\n\n        if (typeof options.timePicker24Hour === 'boolean')\n            this.timePicker24Hour = options.timePicker24Hour;\n\n        if (typeof options.autoApply === 'boolean')\n            this.autoApply = options.autoApply;\n\n        if (typeof options.autoUpdateInput === 'boolean')\n            this.autoUpdateInput = options.autoUpdateInput;\n\n        if (typeof options.linkedCalendars === 'boolean')\n            this.linkedCalendars = options.linkedCalendars;\n\n        if (typeof options.isInvalidDate === 'function')\n            this.isInvalidDate = options.isInvalidDate;\n\n        if (typeof options.isCustomDate === 'function')\n            this.isCustomDate = options.isCustomDate;\n\n        if (typeof options.alwaysShowCalendars === 'boolean')\n            this.alwaysShowCalendars = options.alwaysShowCalendars;\n\n        // update day names order to firstDay\n        if (this.locale.firstDay != 0) {\n            var iterator = this.locale.firstDay;\n            while (iterator > 0) {\n                this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift());\n                iterator--;\n            }\n        }\n\n        var start, end, range;\n\n        //if no start/end dates set, check if an input element contains initial values\n        if (typeof options.startDate === 'undefined' && typeof options.endDate === 'undefined') {\n            if ($(this.element).is('input[type=text]')) {\n                var val = $(this.element).val(),\n                    split = val.split(this.locale.separator);\n\n                start = end = null;\n\n                if (split.length == 2) {\n                    start = moment(split[0], this.locale.format);\n                    end = moment(split[1], this.locale.format);\n                } else if (this.singleDatePicker && val !== \"\") {\n                    start = moment(val, this.locale.format);\n                    end = moment(val, this.locale.format);\n                }\n                if (start !== null && end !== null) {\n                    this.setStartDate(start);\n                    this.setEndDate(end);\n                }\n            }\n        }\n\n        if (typeof options.ranges === 'object') {\n            for (range in options.ranges) {\n\n                if (typeof options.ranges[range][0] === 'string')\n                    start = moment(options.ranges[range][0], this.locale.format);\n                else\n                    start = moment(options.ranges[range][0]);\n\n                if (typeof options.ranges[range][1] === 'string')\n                    end = moment(options.ranges[range][1], this.locale.format);\n                else\n                    end = moment(options.ranges[range][1]);\n\n                // If the start or end date exceed those allowed by the minDate or dateLimit\n                // options, shorten the range to the allowable period.\n                if (this.minDate && start.isBefore(this.minDate))\n                    start = this.minDate.clone();\n\n                var maxDate = this.maxDate;\n                if (this.dateLimit && maxDate && start.clone().add(this.dateLimit).isAfter(maxDate))\n                    maxDate = start.clone().add(this.dateLimit);\n                if (maxDate && end.isAfter(maxDate))\n                    end = maxDate.clone();\n\n                // If the end of the range is before the minimum or the start of the range is\n                // after the maximum, don't display this range option at all.\n                if ((this.minDate && end.isBefore(this.minDate, this.timepicker ? 'minute' : 'day')) \n                  || (maxDate && start.isAfter(maxDate, this.timepicker ? 'minute' : 'day')))\n                    continue;\n\n                //Support unicode chars in the range names.\n                var elem = document.createElement('textarea');\n                elem.innerHTML = range;\n                var rangeHtml = elem.value;\n\n                this.ranges[rangeHtml] = [start, end];\n            }\n\n            var list = '<ul>';\n            for (range in this.ranges) {\n                list += '<li data-range-key=\"' + range + '\">' + range + '</li>';\n            }\n            if (this.showCustomRangeLabel) {\n                list += '<li data-range-key=\"' + this.locale.customRangeLabel + '\">' + this.locale.customRangeLabel + '</li>';\n            }\n            list += '</ul>';\n            this.container.find('.ranges').prepend(list);\n        }\n\n        if (typeof cb === 'function') {\n            this.callback = cb;\n        }\n\n        if (!this.timePicker) {\n            this.startDate = this.startDate.startOf('day');\n            this.endDate = this.endDate.endOf('day');\n            this.container.find('.calendar-time').hide();\n        }\n\n        //can't be used together for now\n        if (this.timePicker && this.autoApply)\n            this.autoApply = false;\n\n        if (this.autoApply && typeof options.ranges !== 'object') {\n            this.container.find('.ranges').hide();\n        } else if (this.autoApply) {\n            this.container.find('.applyBtn, .cancelBtn').addClass('hide');\n        }\n\n        if (this.singleDatePicker) {\n            this.container.addClass('single');\n            this.container.find('.calendar.left').addClass('single');\n            this.container.find('.calendar.left').show();\n            this.container.find('.calendar.right').hide();\n            this.container.find('.daterangepicker_input input, .daterangepicker_input > i').hide();\n            if (this.timePicker) {\n                this.container.find('.ranges ul').hide();\n            } else {\n                this.container.find('.ranges').hide();\n            }\n        }\n\n        if ((typeof options.ranges === 'undefined' && !this.singleDatePicker) || this.alwaysShowCalendars) {\n            this.container.addClass('show-calendar');\n        }\n\n        this.container.addClass('opens' + this.opens);\n\n        //swap the position of the predefined ranges if opens right\n        if (typeof options.ranges !== 'undefined' && this.opens == 'right') {\n            this.container.find('.ranges').prependTo( this.container.find('.calendar.left').parent() );\n        }\n\n        //apply CSS classes and labels to buttons\n        this.container.find('.applyBtn, .cancelBtn').addClass(this.buttonClasses);\n        if (this.applyClass.length)\n            this.container.find('.applyBtn').addClass(this.applyClass);\n        if (this.cancelClass.length)\n            this.container.find('.cancelBtn').addClass(this.cancelClass);\n        this.container.find('.applyBtn').html(this.locale.applyLabel);\n        this.container.find('.cancelBtn').html(this.locale.cancelLabel);\n\n        //\n        // event listeners\n        //\n\n        this.container.find('.calendar')\n            .on('click.daterangepicker', '.prev', $.proxy(this.clickPrev, this))\n            .on('click.daterangepicker', '.next', $.proxy(this.clickNext, this))\n            .on('mousedown.daterangepicker', 'td.available', $.proxy(this.clickDate, this))\n            .on('mouseenter.daterangepicker', 'td.available', $.proxy(this.hoverDate, this))\n            .on('mouseleave.daterangepicker', 'td.available', $.proxy(this.updateFormInputs, this))\n            .on('change.daterangepicker', 'select.yearselect', $.proxy(this.monthOrYearChanged, this))\n            .on('change.daterangepicker', 'select.monthselect', $.proxy(this.monthOrYearChanged, this))\n            .on('change.daterangepicker', 'select.hourselect,select.minuteselect,select.secondselect,select.ampmselect', $.proxy(this.timeChanged, this))\n            .on('click.daterangepicker', '.daterangepicker_input input', $.proxy(this.showCalendars, this))\n            .on('focus.daterangepicker', '.daterangepicker_input input', $.proxy(this.formInputsFocused, this))\n            .on('blur.daterangepicker', '.daterangepicker_input input', $.proxy(this.formInputsBlurred, this))\n            .on('change.daterangepicker', '.daterangepicker_input input', $.proxy(this.formInputsChanged, this));\n\n        this.container.find('.ranges')\n            .on('click.daterangepicker', 'button.applyBtn', $.proxy(this.clickApply, this))\n            .on('click.daterangepicker', 'button.cancelBtn', $.proxy(this.clickCancel, this))\n            .on('click.daterangepicker', 'li', $.proxy(this.clickRange, this))\n            .on('mouseenter.daterangepicker', 'li', $.proxy(this.hoverRange, this))\n            .on('mouseleave.daterangepicker', 'li', $.proxy(this.updateFormInputs, this));\n\n        if (this.element.is('input') || this.element.is('button')) {\n            this.element.on({\n                'click.daterangepicker': $.proxy(this.show, this),\n                'focus.daterangepicker': $.proxy(this.show, this),\n                'keyup.daterangepicker': $.proxy(this.elementChanged, this),\n                'keydown.daterangepicker': $.proxy(this.keydown, this)\n            });\n        } else {\n            this.element.on('click.daterangepicker', $.proxy(this.toggle, this));\n        }\n\n        //\n        // if attached to a text input, set the initial value\n        //\n\n        if (this.element.is('input') && !this.singleDatePicker && this.autoUpdateInput) {\n            this.element.val(this.startDate.format(this.locale.format) + this.locale.separator + this.endDate.format(this.locale.format));\n            this.element.trigger('change');\n        } else if (this.element.is('input') && this.autoUpdateInput) {\n            this.element.val(this.startDate.format(this.locale.format));\n            this.element.trigger('change');\n        }\n\n    };\n\n    DateRangePicker.prototype = {\n\n        constructor: DateRangePicker,\n\n        setStartDate: function(startDate) {\n            if (typeof startDate === 'string')\n                this.startDate = moment(startDate, this.locale.format);\n\n            if (typeof startDate === 'object')\n                this.startDate = moment(startDate);\n\n            if (!this.timePicker)\n                this.startDate = this.startDate.startOf('day');\n\n            if (this.timePicker && this.timePickerIncrement)\n                this.startDate.minute(Math.round(this.startDate.minute() / this.timePickerIncrement) * this.timePickerIncrement);\n\n            if (this.minDate && this.startDate.isBefore(this.minDate)) {\n                this.startDate = this.minDate;\n                if (this.timePicker && this.timePickerIncrement)\n                    this.startDate.minute(Math.round(this.startDate.minute() / this.timePickerIncrement) * this.timePickerIncrement);\n            }\n\n            if (this.maxDate && this.startDate.isAfter(this.maxDate)) {\n                this.startDate = this.maxDate;\n                if (this.timePicker && this.timePickerIncrement)\n                    this.startDate.minute(Math.floor(this.startDate.minute() / this.timePickerIncrement) * this.timePickerIncrement);\n            }\n\n            if (!this.isShowing)\n                this.updateElement();\n\n            this.updateMonthsInView();\n        },\n\n        setEndDate: function(endDate) {\n            if (typeof endDate === 'string')\n                this.endDate = moment(endDate, this.locale.format);\n\n            if (typeof endDate === 'object')\n                this.endDate = moment(endDate);\n\n            if (!this.timePicker)\n                this.endDate = this.endDate.endOf('day');\n\n            if (this.timePicker && this.timePickerIncrement)\n                this.endDate.minute(Math.round(this.endDate.minute() / this.timePickerIncrement) * this.timePickerIncrement);\n\n            if (this.endDate.isBefore(this.startDate))\n                this.endDate = this.startDate.clone();\n\n            if (this.maxDate && this.endDate.isAfter(this.maxDate))\n                this.endDate = this.maxDate;\n\n            if (this.dateLimit && this.startDate.clone().add(this.dateLimit).isBefore(this.endDate))\n                this.endDate = this.startDate.clone().add(this.dateLimit);\n\n            this.previousRightTime = this.endDate.clone();\n\n            if (!this.isShowing)\n                this.updateElement();\n\n            this.updateMonthsInView();\n        },\n\n        isInvalidDate: function() {\n            return false;\n        },\n\n        isCustomDate: function() {\n            return false;\n        },\n\n        updateView: function() {\n            if (this.timePicker) {\n                this.renderTimePicker('left');\n                this.renderTimePicker('right');\n                if (!this.endDate) {\n                    this.container.find('.right .calendar-time select').attr('disabled', 'disabled').addClass('disabled');\n                } else {\n                    this.container.find('.right .calendar-time select').removeAttr('disabled').removeClass('disabled');\n                }\n            }\n            if (this.endDate) {\n                this.container.find('input[name=\"daterangepicker_end\"]').removeClass('active');\n                this.container.find('input[name=\"daterangepicker_start\"]').addClass('active');\n            } else {\n                this.container.find('input[name=\"daterangepicker_end\"]').addClass('active');\n                this.container.find('input[name=\"daterangepicker_start\"]').removeClass('active');\n            }\n            this.updateMonthsInView();\n            this.updateCalendars();\n            this.updateFormInputs();\n        },\n\n        updateMonthsInView: function() {\n            if (this.endDate) {\n\n                //if both dates are visible already, do nothing\n                if (!this.singleDatePicker && this.leftCalendar.month && this.rightCalendar.month &&\n                    (this.startDate.format('YYYY-MM') == this.leftCalendar.month.format('YYYY-MM') || this.startDate.format('YYYY-MM') == this.rightCalendar.month.format('YYYY-MM'))\n                    &&\n                    (this.endDate.format('YYYY-MM') == this.leftCalendar.month.format('YYYY-MM') || this.endDate.format('YYYY-MM') == this.rightCalendar.month.format('YYYY-MM'))\n                    ) {\n                    return;\n                }\n\n                this.leftCalendar.month = this.startDate.clone().date(2);\n                if (!this.linkedCalendars && (this.endDate.month() != this.startDate.month() || this.endDate.year() != this.startDate.year())) {\n                    this.rightCalendar.month = this.endDate.clone().date(2);\n                } else {\n                    this.rightCalendar.month = this.startDate.clone().date(2).add(1, 'month');\n                }\n\n            } else {\n                if (this.leftCalendar.month.format('YYYY-MM') != this.startDate.format('YYYY-MM') && this.rightCalendar.month.format('YYYY-MM') != this.startDate.format('YYYY-MM')) {\n                    this.leftCalendar.month = this.startDate.clone().date(2);\n                    this.rightCalendar.month = this.startDate.clone().date(2).add(1, 'month');\n                }\n            }\n            if (this.maxDate && this.linkedCalendars && !this.singleDatePicker && this.rightCalendar.month > this.maxDate) {\n              this.rightCalendar.month = this.maxDate.clone().date(2);\n              this.leftCalendar.month = this.maxDate.clone().date(2).subtract(1, 'month');\n            }\n        },\n\n        updateCalendars: function() {\n\n            if (this.timePicker) {\n                var hour, minute, second;\n                if (this.endDate) {\n                    hour = parseInt(this.container.find('.left .hourselect').val(), 10);\n                    minute = parseInt(this.container.find('.left .minuteselect').val(), 10);\n                    second = this.timePickerSeconds ? parseInt(this.container.find('.left .secondselect').val(), 10) : 0;\n                    if (!this.timePicker24Hour) {\n                        var ampm = this.container.find('.left .ampmselect').val();\n                        if (ampm === 'PM' && hour < 12)\n                            hour += 12;\n                        if (ampm === 'AM' && hour === 12)\n                            hour = 0;\n                    }\n                } else {\n                    hour = parseInt(this.container.find('.right .hourselect').val(), 10);\n                    minute = parseInt(this.container.find('.right .minuteselect').val(), 10);\n                    second = this.timePickerSeconds ? parseInt(this.container.find('.right .secondselect').val(), 10) : 0;\n                    if (!this.timePicker24Hour) {\n                        var ampm = this.container.find('.right .ampmselect').val();\n                        if (ampm === 'PM' && hour < 12)\n                            hour += 12;\n                        if (ampm === 'AM' && hour === 12)\n                            hour = 0;\n                    }\n                }\n                this.leftCalendar.month.hour(hour).minute(minute).second(second);\n                this.rightCalendar.month.hour(hour).minute(minute).second(second);\n            }\n\n            this.renderCalendar('left');\n            this.renderCalendar('right');\n\n            //highlight any predefined range matching the current start and end dates\n            this.container.find('.ranges li').removeClass('active');\n            if (this.endDate == null) return;\n\n            this.calculateChosenLabel();\n        },\n\n        renderCalendar: function(side) {\n\n            //\n            // Build the matrix of dates that will populate the calendar\n            //\n\n            var calendar = side == 'left' ? this.leftCalendar : this.rightCalendar;\n            var month = calendar.month.month();\n            var year = calendar.month.year();\n            var hour = calendar.month.hour();\n            var minute = calendar.month.minute();\n            var second = calendar.month.second();\n            var daysInMonth = moment([year, month]).daysInMonth();\n            var firstDay = moment([year, month, 1]);\n            var lastDay = moment([year, month, daysInMonth]);\n            var lastMonth = moment(firstDay).subtract(1, 'month').month();\n            var lastYear = moment(firstDay).subtract(1, 'month').year();\n            var daysInLastMonth = moment([lastYear, lastMonth]).daysInMonth();\n            var dayOfWeek = firstDay.day();\n\n            //initialize a 6 rows x 7 columns array for the calendar\n            var calendar = [];\n            calendar.firstDay = firstDay;\n            calendar.lastDay = lastDay;\n\n            for (var i = 0; i < 6; i++) {\n                calendar[i] = [];\n            }\n\n            //populate the calendar with date objects\n            var startDay = daysInLastMonth - dayOfWeek + this.locale.firstDay + 1;\n            if (startDay > daysInLastMonth)\n                startDay -= 7;\n\n            if (dayOfWeek == this.locale.firstDay)\n                startDay = daysInLastMonth - 6;\n\n            var curDate = moment([lastYear, lastMonth, startDay, 12, minute, second]);\n\n            var col, row;\n            for (var i = 0, col = 0, row = 0; i < 42; i++, col++, curDate = moment(curDate).add(24, 'hour')) {\n                if (i > 0 && col % 7 === 0) {\n                    col = 0;\n                    row++;\n                }\n                calendar[row][col] = curDate.clone().hour(hour).minute(minute).second(second);\n                curDate.hour(12);\n\n                if (this.minDate && calendar[row][col].format('YYYY-MM-DD') == this.minDate.format('YYYY-MM-DD') && calendar[row][col].isBefore(this.minDate) && side == 'left') {\n                    calendar[row][col] = this.minDate.clone();\n                }\n\n                if (this.maxDate && calendar[row][col].format('YYYY-MM-DD') == this.maxDate.format('YYYY-MM-DD') && calendar[row][col].isAfter(this.maxDate) && side == 'right') {\n                    calendar[row][col] = this.maxDate.clone();\n                }\n\n            }\n\n            //make the calendar object available to hoverDate/clickDate\n            if (side == 'left') {\n                this.leftCalendar.calendar = calendar;\n            } else {\n                this.rightCalendar.calendar = calendar;\n            }\n\n            //\n            // Display the calendar\n            //\n\n            var minDate = side == 'left' ? this.minDate : this.startDate;\n            var maxDate = this.maxDate;\n            var selected = side == 'left' ? this.startDate : this.endDate;\n            var arrow = this.locale.direction == 'ltr' ? {left: 'chevron-left', right: 'chevron-right'} : {left: 'chevron-right', right: 'chevron-left'};\n\n            var html = '<table class=\"table-condensed\">';\n            html += '<thead>';\n            html += '<tr>';\n\n            // add empty cell for week number\n            if (this.showWeekNumbers || this.showISOWeekNumbers)\n                html += '<th></th>';\n\n            if ((!minDate || minDate.isBefore(calendar.firstDay)) && (!this.linkedCalendars || side == 'left')) {\n                html += '<th class=\"prev available\"><i class=\"fa fa-' + arrow.left + ' glyphicon glyphicon-' + arrow.left + '\"></i></th>';\n            } else {\n                html += '<th></th>';\n            }\n\n            var dateHtml = this.locale.monthNames[calendar[1][1].month()] + calendar[1][1].format(\" YYYY\");\n\n            if (this.showDropdowns) {\n                var currentMonth = calendar[1][1].month();\n                var currentYear = calendar[1][1].year();\n                var maxYear = (maxDate && maxDate.year()) || (currentYear + 5);\n                var minYear = (minDate && minDate.year()) || (currentYear - 50);\n                var inMinYear = currentYear == minYear;\n                var inMaxYear = currentYear == maxYear;\n\n                var monthHtml = '<select class=\"monthselect\">';\n                for (var m = 0; m < 12; m++) {\n                    if ((!inMinYear || m >= minDate.month()) && (!inMaxYear || m <= maxDate.month())) {\n                        monthHtml += \"<option value='\" + m + \"'\" +\n                            (m === currentMonth ? \" selected='selected'\" : \"\") +\n                            \">\" + this.locale.monthNames[m] + \"</option>\";\n                    } else {\n                        monthHtml += \"<option value='\" + m + \"'\" +\n                            (m === currentMonth ? \" selected='selected'\" : \"\") +\n                            \" disabled='disabled'>\" + this.locale.monthNames[m] + \"</option>\";\n                    }\n                }\n                monthHtml += \"</select>\";\n\n                var yearHtml = '<select class=\"yearselect\">';\n                for (var y = minYear; y <= maxYear; y++) {\n                    yearHtml += '<option value=\"' + y + '\"' +\n                        (y === currentYear ? ' selected=\"selected\"' : '') +\n                        '>' + y + '</option>';\n                }\n                yearHtml += '</select>';\n\n                dateHtml = monthHtml + yearHtml;\n            }\n\n            html += '<th colspan=\"5\" class=\"month\">' + dateHtml + '</th>';\n            if ((!maxDate || maxDate.isAfter(calendar.lastDay)) && (!this.linkedCalendars || side == 'right' || this.singleDatePicker)) {\n                html += '<th class=\"next available\"><i class=\"fa fa-' + arrow.right + ' glyphicon glyphicon-' + arrow.right + '\"></i></th>';\n            } else {\n                html += '<th></th>';\n            }\n\n            html += '</tr>';\n            html += '<tr>';\n\n            // add week number label\n            if (this.showWeekNumbers || this.showISOWeekNumbers)\n                html += '<th class=\"week\">' + this.locale.weekLabel + '</th>';\n\n            $.each(this.locale.daysOfWeek, function(index, dayOfWeek) {\n                html += '<th>' + dayOfWeek + '</th>';\n            });\n\n            html += '</tr>';\n            html += '</thead>';\n            html += '<tbody>';\n\n            //adjust maxDate to reflect the dateLimit setting in order to\n            //grey out end dates beyond the dateLimit\n            if (this.endDate == null && this.dateLimit) {\n                var maxLimit = this.startDate.clone().add(this.dateLimit).endOf('day');\n                if (!maxDate || maxLimit.isBefore(maxDate)) {\n                    maxDate = maxLimit;\n                }\n            }\n\n            for (var row = 0; row < 6; row++) {\n                html += '<tr>';\n\n                // add week number\n                if (this.showWeekNumbers)\n                    html += '<td class=\"week\">' + calendar[row][0].week() + '</td>';\n                else if (this.showISOWeekNumbers)\n                    html += '<td class=\"week\">' + calendar[row][0].isoWeek() + '</td>';\n\n                for (var col = 0; col < 7; col++) {\n\n                    var classes = [];\n\n                    //highlight today's date\n                    if (calendar[row][col].isSame(new Date(), \"day\"))\n                        classes.push('today');\n\n                    //highlight weekends\n                    if (calendar[row][col].isoWeekday() > 5)\n                        classes.push('weekend');\n\n                    //grey out the dates in other months displayed at beginning and end of this calendar\n                    if (calendar[row][col].month() != calendar[1][1].month())\n                        classes.push('off');\n\n                    //don't allow selection of dates before the minimum date\n                    if (this.minDate && calendar[row][col].isBefore(this.minDate, 'day'))\n                        classes.push('off', 'disabled');\n\n                    //don't allow selection of dates after the maximum date\n                    if (maxDate && calendar[row][col].isAfter(maxDate, 'day'))\n                        classes.push('off', 'disabled');\n\n                    //don't allow selection of date if a custom function decides it's invalid\n                    if (this.isInvalidDate(calendar[row][col]))\n                        classes.push('off', 'disabled');\n\n                    //highlight the currently selected start date\n                    if (calendar[row][col].format('YYYY-MM-DD') == this.startDate.format('YYYY-MM-DD'))\n                        classes.push('active', 'start-date');\n\n                    //highlight the currently selected end date\n                    if (this.endDate != null && calendar[row][col].format('YYYY-MM-DD') == this.endDate.format('YYYY-MM-DD'))\n                        classes.push('active', 'end-date');\n\n                    //highlight dates in-between the selected dates\n                    if (this.endDate != null && calendar[row][col] > this.startDate && calendar[row][col] < this.endDate)\n                        classes.push('in-range');\n\n                    //apply custom classes for this date\n                    var isCustom = this.isCustomDate(calendar[row][col]);\n                    if (isCustom !== false) {\n                        if (typeof isCustom === 'string')\n                            classes.push(isCustom);\n                        else\n                            Array.prototype.push.apply(classes, isCustom);\n                    }\n\n                    var cname = '', disabled = false;\n                    for (var i = 0; i < classes.length; i++) {\n                        cname += classes[i] + ' ';\n                        if (classes[i] == 'disabled')\n                            disabled = true;\n                    }\n                    if (!disabled)\n                        cname += 'available';\n\n                    html += '<td class=\"' + cname.replace(/^\\s+|\\s+$/g, '') + '\" data-title=\"' + 'r' + row + 'c' + col + '\">' + calendar[row][col].date() + '</td>';\n\n                }\n                html += '</tr>';\n            }\n\n            html += '</tbody>';\n            html += '</table>';\n\n            this.container.find('.calendar.' + side + ' .calendar-table').html(html);\n\n        },\n\n        renderTimePicker: function(side) {\n\n            // Don't bother updating the time picker if it's currently disabled\n            // because an end date hasn't been clicked yet\n            if (side == 'right' && !this.endDate) return;\n\n            var html, selected, minDate, maxDate = this.maxDate;\n\n            if (this.dateLimit && (!this.maxDate || this.startDate.clone().add(this.dateLimit).isAfter(this.maxDate)))\n                maxDate = this.startDate.clone().add(this.dateLimit);\n\n            if (side == 'left') {\n                selected = this.startDate.clone();\n                minDate = this.minDate;\n            } else if (side == 'right') {\n                selected = this.endDate.clone();\n                minDate = this.startDate;\n\n                //Preserve the time already selected\n                var timeSelector = this.container.find('.calendar.right .calendar-time div');\n                if (!this.endDate && timeSelector.html() != '') {\n\n                    selected.hour(timeSelector.find('.hourselect option:selected').val() || selected.hour());\n                    selected.minute(timeSelector.find('.minuteselect option:selected').val() || selected.minute());\n                    selected.second(timeSelector.find('.secondselect option:selected').val() || selected.second());\n\n                    if (!this.timePicker24Hour) {\n                        var ampm = timeSelector.find('.ampmselect option:selected').val();\n                        if (ampm === 'PM' && selected.hour() < 12)\n                            selected.hour(selected.hour() + 12);\n                        if (ampm === 'AM' && selected.hour() === 12)\n                            selected.hour(0);\n                    }\n\n                }\n\n                if (selected.isBefore(this.startDate))\n                    selected = this.startDate.clone();\n\n                if (maxDate && selected.isAfter(maxDate))\n                    selected = maxDate.clone();\n\n            }\n\n            //\n            // hours\n            //\n\n            html = '<select class=\"hourselect\">';\n\n            var start = this.timePicker24Hour ? 0 : 1;\n            var end = this.timePicker24Hour ? 23 : 12;\n\n            for (var i = start; i <= end; i++) {\n                var i_in_24 = i;\n                if (!this.timePicker24Hour)\n                    i_in_24 = selected.hour() >= 12 ? (i == 12 ? 12 : i + 12) : (i == 12 ? 0 : i);\n\n                var time = selected.clone().hour(i_in_24);\n                var disabled = false;\n                if (minDate && time.minute(59).isBefore(minDate))\n                    disabled = true;\n                if (maxDate && time.minute(0).isAfter(maxDate))\n                    disabled = true;\n\n                if (i_in_24 == selected.hour() && !disabled) {\n                    html += '<option value=\"' + i + '\" selected=\"selected\">' + i + '</option>';\n                } else if (disabled) {\n                    html += '<option value=\"' + i + '\" disabled=\"disabled\" class=\"disabled\">' + i + '</option>';\n                } else {\n                    html += '<option value=\"' + i + '\">' + i + '</option>';\n                }\n            }\n\n            html += '</select> ';\n\n            //\n            // minutes\n            //\n\n            html += ': <select class=\"minuteselect\">';\n\n            for (var i = 0; i < 60; i += this.timePickerIncrement) {\n                var padded = i < 10 ? '0' + i : i;\n                var time = selected.clone().minute(i);\n\n                var disabled = false;\n                if (minDate && time.second(59).isBefore(minDate))\n                    disabled = true;\n                if (maxDate && time.second(0).isAfter(maxDate))\n                    disabled = true;\n\n                if (selected.minute() == i && !disabled) {\n                    html += '<option value=\"' + i + '\" selected=\"selected\">' + padded + '</option>';\n                } else if (disabled) {\n                    html += '<option value=\"' + i + '\" disabled=\"disabled\" class=\"disabled\">' + padded + '</option>';\n                } else {\n                    html += '<option value=\"' + i + '\">' + padded + '</option>';\n                }\n            }\n\n            html += '</select> ';\n\n            //\n            // seconds\n            //\n\n            if (this.timePickerSeconds) {\n                html += ': <select class=\"secondselect\">';\n\n                for (var i = 0; i < 60; i++) {\n                    var padded = i < 10 ? '0' + i : i;\n                    var time = selected.clone().second(i);\n\n                    var disabled = false;\n                    if (minDate && time.isBefore(minDate))\n                        disabled = true;\n                    if (maxDate && time.isAfter(maxDate))\n                        disabled = true;\n\n                    if (selected.second() == i && !disabled) {\n                        html += '<option value=\"' + i + '\" selected=\"selected\">' + padded + '</option>';\n                    } else if (disabled) {\n                        html += '<option value=\"' + i + '\" disabled=\"disabled\" class=\"disabled\">' + padded + '</option>';\n                    } else {\n                        html += '<option value=\"' + i + '\">' + padded + '</option>';\n                    }\n                }\n\n                html += '</select> ';\n            }\n\n            //\n            // AM/PM\n            //\n\n            if (!this.timePicker24Hour) {\n                html += '<select class=\"ampmselect\">';\n\n                var am_html = '';\n                var pm_html = '';\n\n                if (minDate && selected.clone().hour(12).minute(0).second(0).isBefore(minDate))\n                    am_html = ' disabled=\"disabled\" class=\"disabled\"';\n\n                if (maxDate && selected.clone().hour(0).minute(0).second(0).isAfter(maxDate))\n                    pm_html = ' disabled=\"disabled\" class=\"disabled\"';\n\n                if (selected.hour() >= 12) {\n                    html += '<option value=\"AM\"' + am_html + '>AM</option><option value=\"PM\" selected=\"selected\"' + pm_html + '>PM</option>';\n                } else {\n                    html += '<option value=\"AM\" selected=\"selected\"' + am_html + '>AM</option><option value=\"PM\"' + pm_html + '>PM</option>';\n                }\n\n                html += '</select>';\n            }\n\n            this.container.find('.calendar.' + side + ' .calendar-time div').html(html);\n\n        },\n\n        updateFormInputs: function() {\n\n            //ignore mouse movements while an above-calendar text input has focus\n            if (this.container.find('input[name=daterangepicker_start]').is(\":focus\") || this.container.find('input[name=daterangepicker_end]').is(\":focus\"))\n                return;\n\n            this.container.find('input[name=daterangepicker_start]').val(this.startDate.format(this.locale.format));\n            if (this.endDate)\n                this.container.find('input[name=daterangepicker_end]').val(this.endDate.format(this.locale.format));\n\n            if (this.singleDatePicker || (this.endDate && (this.startDate.isBefore(this.endDate) || this.startDate.isSame(this.endDate)))) {\n                this.container.find('button.applyBtn').removeAttr('disabled');\n            } else {\n                this.container.find('button.applyBtn').attr('disabled', 'disabled');\n            }\n\n        },\n\n        move: function() {\n            var parentOffset = { top: 0, left: 0 },\n                containerTop;\n            var parentRightEdge = $(window).width();\n            if (!this.parentEl.is('body')) {\n                parentOffset = {\n                    top: this.parentEl.offset().top - this.parentEl.scrollTop(),\n                    left: this.parentEl.offset().left - this.parentEl.scrollLeft()\n                };\n                parentRightEdge = this.parentEl[0].clientWidth + this.parentEl.offset().left;\n            }\n\n            if (this.drops == 'up')\n                containerTop = this.element.offset().top - this.container.outerHeight() - parentOffset.top;\n            else\n                containerTop = this.element.offset().top + this.element.outerHeight() - parentOffset.top;\n            this.container[this.drops == 'up' ? 'addClass' : 'removeClass']('dropup');\n\n            if (this.opens == 'left') {\n                this.container.css({\n                    top: containerTop,\n                    right: parentRightEdge - this.element.offset().left - this.element.outerWidth(),\n                    left: 'auto'\n                });\n                if (this.container.offset().left < 0) {\n                    this.container.css({\n                        right: 'auto',\n                        left: 9\n                    });\n                }\n            } else if (this.opens == 'center') {\n                this.container.css({\n                    top: containerTop,\n                    left: this.element.offset().left - parentOffset.left + this.element.outerWidth() / 2\n                            - this.container.outerWidth() / 2,\n                    right: 'auto'\n                });\n                if (this.container.offset().left < 0) {\n                    this.container.css({\n                        right: 'auto',\n                        left: 9\n                    });\n                }\n            } else {\n                this.container.css({\n                    top: containerTop,\n                    left: this.element.offset().left - parentOffset.left,\n                    right: 'auto'\n                });\n                if (this.container.offset().left + this.container.outerWidth() > $(window).width()) {\n                    this.container.css({\n                        left: 'auto',\n                        right: 0\n                    });\n                }\n            }\n        },\n\n        show: function(e) {\n            if (this.isShowing) return;\n\n            // Create a click proxy that is private to this instance of datepicker, for unbinding\n            this._outsideClickProxy = $.proxy(function(e) { this.outsideClick(e); }, this);\n\n            // Bind global datepicker mousedown for hiding and\n            $(document)\n              .on('mousedown.daterangepicker', this._outsideClickProxy)\n              // also support mobile devices\n              .on('touchend.daterangepicker', this._outsideClickProxy)\n              // also explicitly play nice with Bootstrap dropdowns, which stopPropagation when clicking them\n              .on('click.daterangepicker', '[data-toggle=dropdown]', this._outsideClickProxy)\n              // and also close when focus changes to outside the picker (eg. tabbing between controls)\n              .on('focusin.daterangepicker', this._outsideClickProxy);\n\n            // Reposition the picker if the window is resized while it's open\n            $(window).on('resize.daterangepicker', $.proxy(function(e) { this.move(e); }, this));\n\n            this.oldStartDate = this.startDate.clone();\n            this.oldEndDate = this.endDate.clone();\n            this.previousRightTime = this.endDate.clone();\n\n            this.updateView();\n            this.container.show();\n            this.move();\n            this.element.trigger('show.daterangepicker', this);\n            this.isShowing = true;\n        },\n\n        hide: function(e) {\n            if (!this.isShowing) return;\n\n            //incomplete date selection, revert to last values\n            if (!this.endDate) {\n                this.startDate = this.oldStartDate.clone();\n                this.endDate = this.oldEndDate.clone();\n            }\n\n            //if a new date range was selected, invoke the user callback function\n            if (!this.startDate.isSame(this.oldStartDate) || !this.endDate.isSame(this.oldEndDate))\n                this.callback(this.startDate, this.endDate, this.chosenLabel);\n\n            //if picker is attached to a text input, update it\n            this.updateElement();\n\n            $(document).off('.daterangepicker');\n            $(window).off('.daterangepicker');\n            this.container.hide();\n            this.element.trigger('hide.daterangepicker', this);\n            this.isShowing = false;\n        },\n\n        toggle: function(e) {\n            if (this.isShowing) {\n                this.hide();\n            } else {\n                this.show();\n            }\n        },\n\n        outsideClick: function(e) {\n            var target = $(e.target);\n            // if the page is clicked anywhere except within the daterangerpicker/button\n            // itself then call this.hide()\n            if (\n                // ie modal dialog fix\n                e.type == \"focusin\" ||\n                target.closest(this.element).length ||\n                target.closest(this.container).length ||\n                target.closest('.calendar-table').length\n                ) return;\n            this.hide();\n            this.element.trigger('outsideClick.daterangepicker', this);\n        },\n\n        showCalendars: function() {\n            this.container.addClass('show-calendar');\n            this.move();\n            this.element.trigger('showCalendar.daterangepicker', this);\n        },\n\n        hideCalendars: function() {\n            this.container.removeClass('show-calendar');\n            this.element.trigger('hideCalendar.daterangepicker', this);\n        },\n\n        hoverRange: function(e) {\n\n            //ignore mouse movements while an above-calendar text input has focus\n            if (this.container.find('input[name=daterangepicker_start]').is(\":focus\") || this.container.find('input[name=daterangepicker_end]').is(\":focus\"))\n                return;\n\n            var label = e.target.getAttribute('data-range-key');\n\n            if (label == this.locale.customRangeLabel) {\n                this.updateView();\n            } else {\n                var dates = this.ranges[label];\n                this.container.find('input[name=daterangepicker_start]').val(dates[0].format(this.locale.format));\n                this.container.find('input[name=daterangepicker_end]').val(dates[1].format(this.locale.format));\n            }\n\n        },\n\n        clickRange: function(e) {\n            var label = e.target.getAttribute('data-range-key');\n            this.chosenLabel = label;\n            if (label == this.locale.customRangeLabel) {\n                this.showCalendars();\n            } else {\n                var dates = this.ranges[label];\n                this.startDate = dates[0];\n                this.endDate = dates[1];\n\n                if (!this.timePicker) {\n                    this.startDate.startOf('day');\n                    this.endDate.endOf('day');\n                }\n\n                if (!this.alwaysShowCalendars)\n                    this.hideCalendars();\n                this.clickApply();\n            }\n        },\n\n        clickPrev: function(e) {\n            var cal = $(e.target).parents('.calendar');\n            if (cal.hasClass('left')) {\n                this.leftCalendar.month.subtract(1, 'month');\n                if (this.linkedCalendars)\n                    this.rightCalendar.month.subtract(1, 'month');\n            } else {\n                this.rightCalendar.month.subtract(1, 'month');\n            }\n            this.updateCalendars();\n        },\n\n        clickNext: function(e) {\n            var cal = $(e.target).parents('.calendar');\n            if (cal.hasClass('left')) {\n                this.leftCalendar.month.add(1, 'month');\n            } else {\n                this.rightCalendar.month.add(1, 'month');\n                if (this.linkedCalendars)\n                    this.leftCalendar.month.add(1, 'month');\n            }\n            this.updateCalendars();\n        },\n\n        hoverDate: function(e) {\n\n            //ignore mouse movements while an above-calendar text input has focus\n            //if (this.container.find('input[name=daterangepicker_start]').is(\":focus\") || this.container.find('input[name=daterangepicker_end]').is(\":focus\"))\n            //    return;\n\n            //ignore dates that can't be selected\n            if (!$(e.target).hasClass('available')) return;\n\n            //have the text inputs above calendars reflect the date being hovered over\n            var title = $(e.target).attr('data-title');\n            var row = title.substr(1, 1);\n            var col = title.substr(3, 1);\n            var cal = $(e.target).parents('.calendar');\n            var date = cal.hasClass('left') ? this.leftCalendar.calendar[row][col] : this.rightCalendar.calendar[row][col];\n\n            if (this.endDate && !this.container.find('input[name=daterangepicker_start]').is(\":focus\")) {\n                this.container.find('input[name=daterangepicker_start]').val(date.format(this.locale.format));\n            } else if (!this.endDate && !this.container.find('input[name=daterangepicker_end]').is(\":focus\")) {\n                this.container.find('input[name=daterangepicker_end]').val(date.format(this.locale.format));\n            }\n\n            //highlight the dates between the start date and the date being hovered as a potential end date\n            var leftCalendar = this.leftCalendar;\n            var rightCalendar = this.rightCalendar;\n            var startDate = this.startDate;\n            if (!this.endDate) {\n                this.container.find('.calendar td').each(function(index, el) {\n\n                    //skip week numbers, only look at dates\n                    if ($(el).hasClass('week')) return;\n\n                    var title = $(el).attr('data-title');\n                    var row = title.substr(1, 1);\n                    var col = title.substr(3, 1);\n                    var cal = $(el).parents('.calendar');\n                    var dt = cal.hasClass('left') ? leftCalendar.calendar[row][col] : rightCalendar.calendar[row][col];\n\n                    if ((dt.isAfter(startDate) && dt.isBefore(date)) || dt.isSame(date, 'day')) {\n                        $(el).addClass('in-range');\n                    } else {\n                        $(el).removeClass('in-range');\n                    }\n\n                });\n            }\n\n        },\n\n        clickDate: function(e) {\n\n            if (!$(e.target).hasClass('available')) return;\n\n            var title = $(e.target).attr('data-title');\n            var row = title.substr(1, 1);\n            var col = title.substr(3, 1);\n            var cal = $(e.target).parents('.calendar');\n            var date = cal.hasClass('left') ? this.leftCalendar.calendar[row][col] : this.rightCalendar.calendar[row][col];\n\n            //\n            // this function needs to do a few things:\n            // * alternate between selecting a start and end date for the range,\n            // * if the time picker is enabled, apply the hour/minute/second from the select boxes to the clicked date\n            // * if autoapply is enabled, and an end date was chosen, apply the selection\n            // * if single date picker mode, and time picker isn't enabled, apply the selection immediately\n            // * if one of the inputs above the calendars was focused, cancel that manual input\n            //\n\n            if (this.endDate || date.isBefore(this.startDate, 'day')) { //picking start\n                if (this.timePicker) {\n                    var hour = parseInt(this.container.find('.left .hourselect').val(), 10);\n                    if (!this.timePicker24Hour) {\n                        var ampm = this.container.find('.left .ampmselect').val();\n                        if (ampm === 'PM' && hour < 12)\n                            hour += 12;\n                        if (ampm === 'AM' && hour === 12)\n                            hour = 0;\n                    }\n                    var minute = parseInt(this.container.find('.left .minuteselect').val(), 10);\n                    var second = this.timePickerSeconds ? parseInt(this.container.find('.left .secondselect').val(), 10) : 0;\n                    date = date.clone().hour(hour).minute(minute).second(second);\n                }\n                this.endDate = null;\n                this.setStartDate(date.clone());\n            } else if (!this.endDate && date.isBefore(this.startDate)) {\n                //special case: clicking the same date for start/end,\n                //but the time of the end date is before the start date\n                this.setEndDate(this.startDate.clone());\n            } else { // picking end\n                if (this.timePicker) {\n                    var hour = parseInt(this.container.find('.right .hourselect').val(), 10);\n                    if (!this.timePicker24Hour) {\n                        var ampm = this.container.find('.right .ampmselect').val();\n                        if (ampm === 'PM' && hour < 12)\n                            hour += 12;\n                        if (ampm === 'AM' && hour === 12)\n                            hour = 0;\n                    }\n                    var minute = parseInt(this.container.find('.right .minuteselect').val(), 10);\n                    var second = this.timePickerSeconds ? parseInt(this.container.find('.right .secondselect').val(), 10) : 0;\n                    date = date.clone().hour(hour).minute(minute).second(second);\n                }\n                this.setEndDate(date.clone());\n                if (this.autoApply) {\n                  this.calculateChosenLabel();\n                  this.clickApply();\n                }\n            }\n\n            if (this.singleDatePicker) {\n                this.setEndDate(this.startDate);\n                if (!this.timePicker)\n                    this.clickApply();\n            }\n\n            this.updateView();\n\n            //This is to cancel the blur event handler if the mouse was in one of the inputs\n            e.stopPropagation();\n\n        },\n\n        calculateChosenLabel: function() {\n          var customRange = true;\n          var i = 0;\n          for (var range in this.ranges) {\n              if (this.timePicker) {\n                  if (this.startDate.isSame(this.ranges[range][0]) && this.endDate.isSame(this.ranges[range][1])) {\n                      customRange = false;\n                      this.chosenLabel = this.container.find('.ranges li:eq(' + i + ')').addClass('active').html();\n                      break;\n                  }\n              } else {\n                  //ignore times when comparing dates if time picker is not enabled\n                  if (this.startDate.format('YYYY-MM-DD') == this.ranges[range][0].format('YYYY-MM-DD') && this.endDate.format('YYYY-MM-DD') == this.ranges[range][1].format('YYYY-MM-DD')) {\n                      customRange = false;\n                      this.chosenLabel = this.container.find('.ranges li:eq(' + i + ')').addClass('active').html();\n                      break;\n                  }\n              }\n              i++;\n          }\n          if (customRange && this.showCustomRangeLabel) {\n              this.chosenLabel = this.container.find('.ranges li:last').addClass('active').html();\n              this.showCalendars();\n          }\n        },\n\n        clickApply: function(e) {\n            this.hide();\n            this.element.trigger('apply.daterangepicker', this);\n        },\n\n        clickCancel: function(e) {\n            this.startDate = this.oldStartDate;\n            this.endDate = this.oldEndDate;\n            this.hide();\n            this.element.trigger('cancel.daterangepicker', this);\n        },\n\n        monthOrYearChanged: function(e) {\n            var isLeft = $(e.target).closest('.calendar').hasClass('left'),\n                leftOrRight = isLeft ? 'left' : 'right',\n                cal = this.container.find('.calendar.'+leftOrRight);\n\n            // Month must be Number for new moment versions\n            var month = parseInt(cal.find('.monthselect').val(), 10);\n            var year = cal.find('.yearselect').val();\n\n            if (!isLeft) {\n                if (year < this.startDate.year() || (year == this.startDate.year() && month < this.startDate.month())) {\n                    month = this.startDate.month();\n                    year = this.startDate.year();\n                }\n            }\n\n            if (this.minDate) {\n                if (year < this.minDate.year() || (year == this.minDate.year() && month < this.minDate.month())) {\n                    month = this.minDate.month();\n                    year = this.minDate.year();\n                }\n            }\n\n            if (this.maxDate) {\n                if (year > this.maxDate.year() || (year == this.maxDate.year() && month > this.maxDate.month())) {\n                    month = this.maxDate.month();\n                    year = this.maxDate.year();\n                }\n            }\n\n            if (isLeft) {\n                this.leftCalendar.month.month(month).year(year);\n                if (this.linkedCalendars)\n                    this.rightCalendar.month = this.leftCalendar.month.clone().add(1, 'month');\n            } else {\n                this.rightCalendar.month.month(month).year(year);\n                if (this.linkedCalendars)\n                    this.leftCalendar.month = this.rightCalendar.month.clone().subtract(1, 'month');\n            }\n            this.updateCalendars();\n        },\n\n        timeChanged: function(e) {\n\n            var cal = $(e.target).closest('.calendar'),\n                isLeft = cal.hasClass('left');\n\n            var hour = parseInt(cal.find('.hourselect').val(), 10);\n            var minute = parseInt(cal.find('.minuteselect').val(), 10);\n            var second = this.timePickerSeconds ? parseInt(cal.find('.secondselect').val(), 10) : 0;\n\n            if (!this.timePicker24Hour) {\n                var ampm = cal.find('.ampmselect').val();\n                if (ampm === 'PM' && hour < 12)\n                    hour += 12;\n                if (ampm === 'AM' && hour === 12)\n                    hour = 0;\n            }\n\n            if (isLeft) {\n                var start = this.startDate.clone();\n                start.hour(hour);\n                start.minute(minute);\n                start.second(second);\n                this.setStartDate(start);\n                if (this.singleDatePicker) {\n                    this.endDate = this.startDate.clone();\n                } else if (this.endDate && this.endDate.format('YYYY-MM-DD') == start.format('YYYY-MM-DD') && this.endDate.isBefore(start)) {\n                    this.setEndDate(start.clone());\n                }\n            } else if (this.endDate) {\n                var end = this.endDate.clone();\n                end.hour(hour);\n                end.minute(minute);\n                end.second(second);\n                this.setEndDate(end);\n            }\n\n            //update the calendars so all clickable dates reflect the new time component\n            this.updateCalendars();\n\n            //update the form inputs above the calendars with the new time\n            this.updateFormInputs();\n\n            //re-render the time pickers because changing one selection can affect what's enabled in another\n            this.renderTimePicker('left');\n            this.renderTimePicker('right');\n\n        },\n\n        formInputsChanged: function(e) {\n            var isRight = $(e.target).closest('.calendar').hasClass('right');\n            var start = moment(this.container.find('input[name=\"daterangepicker_start\"]').val(), this.locale.format);\n            var end = moment(this.container.find('input[name=\"daterangepicker_end\"]').val(), this.locale.format);\n\n            if (start.isValid() && end.isValid()) {\n\n                if (isRight && end.isBefore(start))\n                    start = end.clone();\n\n                this.setStartDate(start);\n                this.setEndDate(end);\n\n                if (isRight) {\n                    this.container.find('input[name=\"daterangepicker_start\"]').val(this.startDate.format(this.locale.format));\n                } else {\n                    this.container.find('input[name=\"daterangepicker_end\"]').val(this.endDate.format(this.locale.format));\n                }\n\n            }\n\n            this.updateView();\n        },\n\n        formInputsFocused: function(e) {\n\n            // Highlight the focused input\n            this.container.find('input[name=\"daterangepicker_start\"], input[name=\"daterangepicker_end\"]').removeClass('active');\n            $(e.target).addClass('active');\n\n            // Set the state such that if the user goes back to using a mouse, \n            // the calendars are aware we're selecting the end of the range, not\n            // the start. This allows someone to edit the end of a date range without\n            // re-selecting the beginning, by clicking on the end date input then\n            // using the calendar.\n            var isRight = $(e.target).closest('.calendar').hasClass('right');\n            if (isRight) {\n                this.endDate = null;\n                this.setStartDate(this.startDate.clone());\n                this.updateView();\n            }\n\n        },\n\n        formInputsBlurred: function(e) {\n\n            // this function has one purpose right now: if you tab from the first\n            // text input to the second in the UI, the endDate is nulled so that\n            // you can click another, but if you tab out without clicking anything\n            // or changing the input value, the old endDate should be retained\n\n            if (!this.endDate) {\n                var val = this.container.find('input[name=\"daterangepicker_end\"]').val();\n                var end = moment(val, this.locale.format);\n                if (end.isValid()) {\n                    this.setEndDate(end);\n                    this.updateView();\n                }\n            }\n\n        },\n\n        elementChanged: function() {\n            if (!this.element.is('input')) return;\n            if (!this.element.val().length) return;\n            if (this.element.val().length < this.locale.format.length) return;\n\n            var dateString = this.element.val().split(this.locale.separator),\n                start = null,\n                end = null;\n\n            if (dateString.length === 2) {\n                start = moment(dateString[0], this.locale.format);\n                end = moment(dateString[1], this.locale.format);\n            }\n\n            if (this.singleDatePicker || start === null || end === null) {\n                start = moment(this.element.val(), this.locale.format);\n                end = start;\n            }\n\n            if (!start.isValid() || !end.isValid()) return;\n\n            this.setStartDate(start);\n            this.setEndDate(end);\n            this.updateView();\n        },\n\n        keydown: function(e) {\n            //hide on tab or enter\n            if ((e.keyCode === 9) || (e.keyCode === 13)) {\n                this.hide();\n            }\n        },\n\n        updateElement: function() {\n            if (this.element.is('input') && !this.singleDatePicker && this.autoUpdateInput) {\n                this.element.val(this.startDate.format(this.locale.format) + this.locale.separator + this.endDate.format(this.locale.format));\n                this.element.trigger('change');\n            } else if (this.element.is('input') && this.autoUpdateInput) {\n                this.element.val(this.startDate.format(this.locale.format));\n                this.element.trigger('change');\n            }\n        },\n\n        remove: function() {\n            this.container.remove();\n            this.element.off('.daterangepicker');\n            this.element.removeData();\n        }\n\n    };\n\n    $.fn.daterangepicker = function(options, callback) {\n        this.each(function() {\n            var el = $(this);\n            if (el.data('daterangepicker'))\n                el.data('daterangepicker').remove();\n            el.data('daterangepicker', new DateRangePicker(el, options, callback));\n        });\n        return this;\n    };\n\n    return DateRangePicker;\n\n}));\n"]},"metadata":{},"sourceType":"module"}