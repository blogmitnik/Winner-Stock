{"ast":null,"code":"/* @license\nmorris.js v0.5.1\nCopyright 2014 Olly Smith All rights reserved.\nLicensed under the BSD-2-Clause License.\n*/\n(function () {\n  var $,\n      Morris,\n      minutesSpecHelper,\n      secondsSpecHelper,\n      __slice = [].slice,\n      __bind = function __bind(fn, me) {\n    return function () {\n      return fn.apply(me, arguments);\n    };\n  },\n      __hasProp = {}.hasOwnProperty,\n      __extends = function __extends(child, parent) {\n    for (var key in parent) {\n      if (__hasProp.call(parent, key)) child[key] = parent[key];\n    }\n\n    function ctor() {\n      this.constructor = child;\n    }\n\n    ctor.prototype = parent.prototype;\n    child.prototype = new ctor();\n    child.__super__ = parent.prototype;\n    return child;\n  },\n      __indexOf = [].indexOf || function (item) {\n    for (var i = 0, l = this.length; i < l; i++) {\n      if (i in this && this[i] === item) return i;\n    }\n\n    return -1;\n  };\n\n  Morris = window.Morris = {};\n  $ = jQuery;\n\n  Morris.EventEmitter = function () {\n    function EventEmitter() {}\n\n    EventEmitter.prototype.on = function (name, handler) {\n      if (this.handlers == null) {\n        this.handlers = {};\n      }\n\n      if (this.handlers[name] == null) {\n        this.handlers[name] = [];\n      }\n\n      this.handlers[name].push(handler);\n      return this;\n    };\n\n    EventEmitter.prototype.fire = function () {\n      var args, handler, name, _i, _len, _ref, _results;\n\n      name = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n\n      if (this.handlers != null && this.handlers[name] != null) {\n        _ref = this.handlers[name];\n        _results = [];\n\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          handler = _ref[_i];\n\n          _results.push(handler.apply(null, args));\n        }\n\n        return _results;\n      }\n    };\n\n    return EventEmitter;\n  }();\n\n  Morris.commas = function (num) {\n    var absnum, intnum, ret, strabsnum;\n\n    if (num != null) {\n      ret = num < 0 ? \"-\" : \"\";\n      absnum = Math.abs(num);\n      intnum = Math.floor(absnum).toFixed(0);\n      ret += intnum.replace(/(?=(?:\\d{3})+$)(?!^)/g, ',');\n      strabsnum = absnum.toString();\n\n      if (strabsnum.length > intnum.length) {\n        ret += strabsnum.slice(intnum.length);\n      }\n\n      return ret;\n    } else {\n      return '-';\n    }\n  };\n\n  Morris.pad2 = function (number) {\n    return (number < 10 ? '0' : '') + number;\n  };\n\n  Morris.Grid = function (_super) {\n    __extends(Grid, _super);\n\n    function Grid(options) {\n      this.hasToShow = __bind(this.hasToShow, this);\n      this.resizeHandler = __bind(this.resizeHandler, this);\n\n      var _this = this;\n\n      if (typeof options.element === 'string') {\n        this.el = $(document.getElementById(options.element));\n      } else {\n        this.el = $(options.element);\n      }\n\n      if (this.el == null || this.el.length === 0) {\n        throw new Error(\"Graph container element not found\");\n      }\n\n      if (this.el.css('position') === 'static') {\n        this.el.css('position', 'relative');\n      }\n\n      this.options = $.extend({}, this.gridDefaults, this.defaults || {}, options);\n\n      if (typeof this.options.units === 'string') {\n        this.options.postUnits = options.units;\n      }\n\n      this.raphael = new Raphael(this.el[0]);\n      this.elementWidth = null;\n      this.elementHeight = null;\n      this.dirty = false;\n      this.selectFrom = null;\n\n      if (this.init) {\n        this.init();\n      }\n\n      this.setData(this.options.data);\n      this.el.bind('mousemove', function (evt) {\n        var left, offset, right, width, x;\n        offset = _this.el.offset();\n        x = evt.pageX - offset.left;\n\n        if (_this.selectFrom) {\n          left = _this.data[_this.hitTest(Math.min(x, _this.selectFrom))]._x;\n          right = _this.data[_this.hitTest(Math.max(x, _this.selectFrom))]._x;\n          width = right - left;\n          return _this.selectionRect.attr({\n            x: left,\n            width: width\n          });\n        } else {\n          return _this.fire('hovermove', x, evt.pageY - offset.top);\n        }\n      });\n      this.el.bind('mouseleave', function (evt) {\n        if (_this.selectFrom) {\n          _this.selectionRect.hide();\n\n          _this.selectFrom = null;\n        }\n\n        return _this.fire('hoverout');\n      });\n      this.el.bind('touchstart touchmove touchend', function (evt) {\n        var offset, touch;\n        touch = evt.originalEvent.touches[0] || evt.originalEvent.changedTouches[0];\n        offset = _this.el.offset();\n        return _this.fire('hovermove', touch.pageX - offset.left, touch.pageY - offset.top);\n      });\n      this.el.bind('click', function (evt) {\n        var offset;\n        offset = _this.el.offset();\n        return _this.fire('gridclick', evt.pageX - offset.left, evt.pageY - offset.top);\n      });\n\n      if (this.options.rangeSelect) {\n        this.selectionRect = this.raphael.rect(0, 0, 0, this.el.innerHeight()).attr({\n          fill: this.options.rangeSelectColor,\n          stroke: false\n        }).toBack().hide();\n        this.el.bind('mousedown', function (evt) {\n          var offset;\n          offset = _this.el.offset();\n          return _this.startRange(evt.pageX - offset.left);\n        });\n        this.el.bind('mouseup', function (evt) {\n          var offset;\n          offset = _this.el.offset();\n\n          _this.endRange(evt.pageX - offset.left);\n\n          return _this.fire('hovermove', evt.pageX - offset.left, evt.pageY - offset.top);\n        });\n      }\n\n      if (this.options.resize) {\n        $(window).bind('resize', function (evt) {\n          if (_this.timeoutId != null) {\n            window.clearTimeout(_this.timeoutId);\n          }\n\n          return _this.timeoutId = window.setTimeout(_this.resizeHandler, 100);\n        });\n      }\n\n      this.el.css('-webkit-tap-highlight-color', 'rgba(0,0,0,0)');\n\n      if (this.postInit) {\n        this.postInit();\n      }\n    }\n\n    Grid.prototype.gridDefaults = {\n      dateFormat: null,\n      axes: true,\n      grid: true,\n      gridLineColor: '#aaa',\n      gridStrokeWidth: 0.5,\n      gridTextColor: '#888',\n      gridTextSize: 12,\n      gridTextFamily: 'sans-serif',\n      gridTextWeight: 'normal',\n      hideHover: false,\n      yLabelFormat: null,\n      xLabelAngle: 0,\n      numLines: 5,\n      padding: 25,\n      parseTime: true,\n      postUnits: '',\n      preUnits: '',\n      ymax: 'auto',\n      ymin: 'auto 0',\n      goals: [],\n      goalStrokeWidth: 1.0,\n      goalLineColors: ['#666633', '#999966', '#cc6666', '#663333'],\n      events: [],\n      eventStrokeWidth: 1.0,\n      eventLineColors: ['#005a04', '#ccffbb', '#3a5f0b', '#005502'],\n      rangeSelect: null,\n      rangeSelectColor: '#eef',\n      resize: false\n    };\n\n    Grid.prototype.setData = function (data, redraw) {\n      var e, flatEvents, from, idx, index, maxGoal, minGoal, ret, row, step, to, total, y, ykey, ymax, ymin, yval, _i, _len, _ref, _ref1;\n\n      if (redraw == null) {\n        redraw = true;\n      }\n\n      this.options.data = data;\n\n      if (data == null || data.length === 0) {\n        this.data = [];\n        this.raphael.clear();\n\n        if (this.hover != null) {\n          this.hover.hide();\n        }\n\n        return;\n      }\n\n      ymax = this.cumulative ? 0 : null;\n      ymin = this.cumulative ? 0 : null;\n\n      if (this.options.goals.length > 0) {\n        minGoal = Math.min.apply(Math, this.options.goals);\n        maxGoal = Math.max.apply(Math, this.options.goals);\n        ymin = ymin != null ? Math.min(ymin, minGoal) : minGoal;\n        ymax = ymax != null ? Math.max(ymax, maxGoal) : maxGoal;\n      }\n\n      this.data = function () {\n        var _i, _len, _results;\n\n        _results = [];\n\n        for (index = _i = 0, _len = data.length; _i < _len; index = ++_i) {\n          row = data[index];\n          ret = {\n            src: row\n          };\n          ret.label = row[this.options.xkey];\n\n          if (this.options.parseTime) {\n            ret.x = Morris.parseDate(ret.label);\n\n            if (this.options.dateFormat) {\n              ret.label = this.options.dateFormat(ret.x);\n            } else if (typeof ret.label === 'number') {\n              ret.label = new Date(ret.label).toString();\n            }\n          } else {\n            ret.x = index;\n\n            if (this.options.xLabelFormat) {\n              ret.label = this.options.xLabelFormat(ret);\n            }\n          }\n\n          total = 0;\n\n          ret.y = function () {\n            var _j, _len1, _ref, _results1;\n\n            _ref = this.options.ykeys;\n            _results1 = [];\n\n            for (idx = _j = 0, _len1 = _ref.length; _j < _len1; idx = ++_j) {\n              ykey = _ref[idx];\n              yval = row[ykey];\n\n              if (typeof yval === 'string') {\n                yval = parseFloat(yval);\n              }\n\n              if (yval != null && typeof yval !== 'number') {\n                yval = null;\n              }\n\n              if (yval != null && this.hasToShow(idx)) {\n                if (this.cumulative) {\n                  total += yval;\n                } else {\n                  if (ymax != null) {\n                    ymax = Math.max(yval, ymax);\n                    ymin = Math.min(yval, ymin);\n                  } else {\n                    ymax = ymin = yval;\n                  }\n                }\n              }\n\n              if (this.cumulative && total != null) {\n                ymax = Math.max(total, ymax);\n                ymin = Math.min(total, ymin);\n              }\n\n              _results1.push(yval);\n            }\n\n            return _results1;\n          }.call(this);\n\n          _results.push(ret);\n        }\n\n        return _results;\n      }.call(this);\n\n      if (this.options.parseTime) {\n        this.data = this.data.sort(function (a, b) {\n          return (a.x > b.x) - (b.x > a.x);\n        });\n      }\n\n      this.xmin = this.data[0].x;\n      this.xmax = this.data[this.data.length - 1].x;\n      this.events = [];\n\n      if (this.options.events.length > 0) {\n        if (this.options.parseTime) {\n          _ref = this.options.events;\n\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            e = _ref[_i];\n\n            if (e instanceof Array) {\n              from = e[0], to = e[1];\n              this.events.push([Morris.parseDate(from), Morris.parseDate(to)]);\n            } else {\n              this.events.push(Morris.parseDate(e));\n            }\n          }\n        } else {\n          this.events = this.options.events;\n        }\n\n        flatEvents = $.map(this.events, function (e) {\n          return e;\n        });\n        this.xmax = Math.max(this.xmax, Math.max.apply(Math, flatEvents));\n        this.xmin = Math.min(this.xmin, Math.min.apply(Math, flatEvents));\n      }\n\n      if (this.xmin === this.xmax) {\n        this.xmin -= 1;\n        this.xmax += 1;\n      }\n\n      this.ymin = this.yboundary('min', ymin);\n      this.ymax = this.yboundary('max', ymax);\n\n      if (this.ymin === this.ymax) {\n        if (ymin) {\n          this.ymin -= 1;\n        }\n\n        this.ymax += 1;\n      }\n\n      if ((_ref1 = this.options.axes) === true || _ref1 === 'both' || _ref1 === 'y' || this.options.grid === true) {\n        if (this.options.ymax === this.gridDefaults.ymax && this.options.ymin === this.gridDefaults.ymin) {\n          this.grid = this.autoGridLines(this.ymin, this.ymax, this.options.numLines);\n          this.ymin = Math.min(this.ymin, this.grid[0]);\n          this.ymax = Math.max(this.ymax, this.grid[this.grid.length - 1]);\n        } else {\n          step = (this.ymax - this.ymin) / (this.options.numLines - 1);\n\n          this.grid = function () {\n            var _j, _ref2, _ref3, _results;\n\n            _results = [];\n\n            for (y = _j = _ref2 = this.ymin, _ref3 = this.ymax; step > 0 ? _j <= _ref3 : _j >= _ref3; y = _j += step) {\n              _results.push(y);\n            }\n\n            return _results;\n          }.call(this);\n        }\n      }\n\n      this.dirty = true;\n\n      if (redraw) {\n        return this.redraw();\n      }\n    };\n\n    Grid.prototype.yboundary = function (boundaryType, currentValue) {\n      var boundaryOption, suggestedValue;\n      boundaryOption = this.options[\"y\" + boundaryType];\n\n      if (typeof boundaryOption === 'string') {\n        if (boundaryOption.slice(0, 4) === 'auto') {\n          if (boundaryOption.length > 5) {\n            suggestedValue = parseInt(boundaryOption.slice(5), 10);\n\n            if (currentValue == null) {\n              return suggestedValue;\n            }\n\n            return Math[boundaryType](currentValue, suggestedValue);\n          } else {\n            if (currentValue != null) {\n              return currentValue;\n            } else {\n              return 0;\n            }\n          }\n        } else {\n          return parseInt(boundaryOption, 10);\n        }\n      } else {\n        return boundaryOption;\n      }\n    };\n\n    Grid.prototype.autoGridLines = function (ymin, ymax, nlines) {\n      var gmax, gmin, grid, smag, span, step, unit, y, ymag;\n      span = ymax - ymin;\n      ymag = Math.floor(Math.log(span) / Math.log(10));\n      unit = Math.pow(10, ymag);\n      gmin = Math.floor(ymin / unit) * unit;\n      gmax = Math.ceil(ymax / unit) * unit;\n      step = (gmax - gmin) / (nlines - 1);\n\n      if (unit === 1 && step > 1 && Math.ceil(step) !== step) {\n        step = Math.ceil(step);\n        gmax = gmin + step * (nlines - 1);\n      }\n\n      if (gmin < 0 && gmax > 0) {\n        gmin = Math.floor(ymin / step) * step;\n        gmax = Math.ceil(ymax / step) * step;\n      }\n\n      if (step < 1) {\n        smag = Math.floor(Math.log(step) / Math.log(10));\n\n        grid = function () {\n          var _i, _results;\n\n          _results = [];\n\n          for (y = _i = gmin; step > 0 ? _i <= gmax : _i >= gmax; y = _i += step) {\n            _results.push(parseFloat(y.toFixed(1 - smag)));\n          }\n\n          return _results;\n        }();\n      } else {\n        grid = function () {\n          var _i, _results;\n\n          _results = [];\n\n          for (y = _i = gmin; step > 0 ? _i <= gmax : _i >= gmax; y = _i += step) {\n            _results.push(y);\n          }\n\n          return _results;\n        }();\n      }\n\n      return grid;\n    };\n\n    Grid.prototype._calc = function () {\n      var angle, bottomOffsets, gridLine, h, i, w, yLabelWidths, _ref, _ref1;\n\n      w = this.el.width();\n      h = this.el.height();\n\n      if (this.elementWidth !== w || this.elementHeight !== h || this.dirty) {\n        this.elementWidth = w;\n        this.elementHeight = h;\n        this.dirty = false;\n        this.left = this.options.padding;\n        this.right = this.elementWidth - this.options.padding;\n        this.top = this.options.padding;\n        this.bottom = this.elementHeight - this.options.padding;\n\n        if ((_ref = this.options.axes) === true || _ref === 'both' || _ref === 'y') {\n          yLabelWidths = function () {\n            var _i, _len, _ref1, _results;\n\n            _ref1 = this.grid;\n            _results = [];\n\n            for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n              gridLine = _ref1[_i];\n\n              _results.push(this.measureText(this.yAxisFormat(gridLine)).width);\n            }\n\n            return _results;\n          }.call(this);\n\n          if (!this.options.horizontal) {\n            this.left += Math.max.apply(Math, yLabelWidths);\n          } else {\n            this.bottom -= Math.max.apply(Math, yLabelWidths);\n          }\n        }\n\n        if ((_ref1 = this.options.axes) === true || _ref1 === 'both' || _ref1 === 'x') {\n          if (!this.options.horizontal) {\n            angle = -this.options.xLabelAngle;\n          } else {\n            angle = -90;\n          }\n\n          bottomOffsets = function () {\n            var _i, _ref2, _results;\n\n            _results = [];\n\n            for (i = _i = 0, _ref2 = this.data.length; 0 <= _ref2 ? _i < _ref2 : _i > _ref2; i = 0 <= _ref2 ? ++_i : --_i) {\n              _results.push(this.measureText(this.data[i].label, angle).height);\n            }\n\n            return _results;\n          }.call(this);\n\n          if (!this.options.horizontal) {\n            this.bottom -= Math.max.apply(Math, bottomOffsets);\n          } else {\n            this.left += Math.max.apply(Math, bottomOffsets);\n          }\n        }\n\n        this.width = Math.max(1, this.right - this.left);\n        this.height = Math.max(1, this.bottom - this.top);\n\n        if (!this.options.horizontal) {\n          this.dx = this.width / (this.xmax - this.xmin);\n          this.dy = this.height / (this.ymax - this.ymin);\n          this.yStart = this.bottom;\n          this.yEnd = this.top;\n          this.xStart = this.left;\n          this.xEnd = this.right;\n          this.xSize = this.width;\n          this.ySize = this.height;\n        } else {\n          this.dx = this.height / (this.xmax - this.xmin);\n          this.dy = this.width / (this.ymax - this.ymin);\n          this.yStart = this.left;\n          this.yEnd = this.right;\n          this.xStart = this.top;\n          this.xEnd = this.bottom;\n          this.xSize = this.height;\n          this.ySize = this.width;\n        }\n\n        if (this.calc) {\n          return this.calc();\n        }\n      }\n    };\n\n    Grid.prototype.transY = function (y) {\n      if (!this.options.horizontal) {\n        return this.bottom - (y - this.ymin) * this.dy;\n      } else {\n        return this.left + (y - this.ymin) * this.dy;\n      }\n    };\n\n    Grid.prototype.transX = function (x) {\n      if (this.data.length === 1) {\n        return (this.xStart + this.xEnd) / 2;\n      } else {\n        return this.xStart + (x - this.xmin) * this.dx;\n      }\n    };\n\n    Grid.prototype.redraw = function () {\n      this.raphael.clear();\n\n      this._calc();\n\n      this.drawGrid();\n      this.drawGoals();\n      this.drawEvents();\n\n      if (this.draw) {\n        return this.draw();\n      }\n    };\n\n    Grid.prototype.measureText = function (text, angle) {\n      var ret, tt;\n\n      if (angle == null) {\n        angle = 0;\n      }\n\n      tt = this.raphael.text(100, 100, text).attr('font-size', this.options.gridTextSize).attr('font-family', this.options.gridTextFamily).attr('font-weight', this.options.gridTextWeight).rotate(angle);\n      ret = tt.getBBox();\n      tt.remove();\n      return ret;\n    };\n\n    Grid.prototype.yAxisFormat = function (label) {\n      return this.yLabelFormat(label, 0);\n    };\n\n    Grid.prototype.yLabelFormat = function (label, i) {\n      if (typeof this.options.yLabelFormat === 'function') {\n        return this.options.yLabelFormat(label, i);\n      } else {\n        return \"\" + this.options.preUnits + Morris.commas(label) + this.options.postUnits;\n      }\n    };\n\n    Grid.prototype.getYAxisLabelX = function () {\n      return this.left - this.options.padding / 2;\n    };\n\n    Grid.prototype.drawGrid = function () {\n      var basePos, lineY, pos, _i, _len, _ref, _ref1, _ref2, _results;\n\n      if (this.options.grid === false && (_ref = this.options.axes) !== true && _ref !== 'both' && _ref !== 'y') {\n        return;\n      }\n\n      if (!this.options.horizontal) {\n        basePos = this.getYAxisLabelX();\n      } else {\n        basePos = this.getXAxisLabelY();\n      }\n\n      _ref1 = this.grid;\n      _results = [];\n\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        lineY = _ref1[_i];\n        pos = this.transY(lineY);\n\n        if ((_ref2 = this.options.axes) === true || _ref2 === 'both' || _ref2 === 'y') {\n          if (!this.options.horizontal) {\n            this.drawYAxisLabel(basePos, pos, this.yAxisFormat(lineY));\n          } else {\n            this.drawXAxisLabel(pos, basePos, this.yAxisFormat(lineY));\n          }\n        }\n\n        if (this.options.grid) {\n          pos = Math.floor(pos) + 0.5;\n\n          if (!this.options.horizontal) {\n            _results.push(this.drawGridLine(\"M\" + this.xStart + \",\" + pos + \"H\" + this.xEnd));\n          } else {\n            _results.push(this.drawGridLine(\"M\" + pos + \",\" + this.xStart + \"V\" + this.xEnd));\n          }\n        } else {\n          _results.push(void 0);\n        }\n      }\n\n      return _results;\n    };\n\n    Grid.prototype.drawGoals = function () {\n      var color, goal, i, _i, _len, _ref, _results;\n\n      _ref = this.options.goals;\n      _results = [];\n\n      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {\n        goal = _ref[i];\n        color = this.options.goalLineColors[i % this.options.goalLineColors.length];\n\n        _results.push(this.drawGoal(goal, color));\n      }\n\n      return _results;\n    };\n\n    Grid.prototype.drawEvents = function () {\n      var color, event, i, _i, _len, _ref, _results;\n\n      _ref = this.events;\n      _results = [];\n\n      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {\n        event = _ref[i];\n        color = this.options.eventLineColors[i % this.options.eventLineColors.length];\n\n        _results.push(this.drawEvent(event, color));\n      }\n\n      return _results;\n    };\n\n    Grid.prototype.drawGoal = function (goal, color) {\n      var path, y;\n      y = Math.floor(this.transY(goal)) + 0.5;\n\n      if (!this.options.horizontal) {\n        path = \"M\" + this.xStart + \",\" + y + \"H\" + this.xEnd;\n      } else {\n        path = \"M\" + y + \",\" + this.xStart + \"V\" + this.xEnd;\n      }\n\n      return this.raphael.path(path).attr('stroke', color).attr('stroke-width', this.options.goalStrokeWidth);\n    };\n\n    Grid.prototype.drawEvent = function (event, color) {\n      var from, path, to, x;\n\n      if (event instanceof Array) {\n        from = event[0], to = event[1];\n        from = Math.floor(this.transX(from)) + 0.5;\n        to = Math.floor(this.transX(to)) + 0.5;\n\n        if (!this.options.horizontal) {\n          return this.raphael.rect(from, this.yEnd, to - from, this.yStart - this.yEnd).attr({\n            fill: color,\n            stroke: false\n          }).toBack();\n        } else {\n          return this.raphael.rect(this.yStart, from, this.yEnd - this.yStart, to - from).attr({\n            fill: color,\n            stroke: false\n          }).toBack();\n        }\n      } else {\n        x = Math.floor(this.transX(event)) + 0.5;\n\n        if (!this.options.horizontal) {\n          path = \"M\" + x + \",\" + this.yStart + \"V\" + this.yEnd;\n        } else {\n          path = \"M\" + this.yStart + \",\" + x + \"H\" + this.yEnd;\n        }\n\n        return this.raphael.path(path).attr('stroke', color).attr('stroke-width', this.options.eventStrokeWidth);\n      }\n    };\n\n    Grid.prototype.drawYAxisLabel = function (xPos, yPos, text) {\n      return this.raphael.text(xPos, yPos, text).attr('font-size', this.options.gridTextSize).attr('font-family', this.options.gridTextFamily).attr('font-weight', this.options.gridTextWeight).attr('fill', this.options.gridTextColor).attr('text-anchor', 'end');\n    };\n\n    Grid.prototype.drawGridLine = function (path) {\n      return this.raphael.path(path).attr('stroke', this.options.gridLineColor).attr('stroke-width', this.options.gridStrokeWidth);\n    };\n\n    Grid.prototype.startRange = function (x) {\n      this.hover.hide();\n      this.selectFrom = x;\n      return this.selectionRect.attr({\n        x: x,\n        width: 0\n      }).show();\n    };\n\n    Grid.prototype.endRange = function (x) {\n      var end, start;\n\n      if (this.selectFrom) {\n        start = Math.min(this.selectFrom, x);\n        end = Math.max(this.selectFrom, x);\n        this.options.rangeSelect.call(this.el, {\n          start: this.data[this.hitTest(start)].x,\n          end: this.data[this.hitTest(end)].x\n        });\n        return this.selectFrom = null;\n      }\n    };\n\n    Grid.prototype.resizeHandler = function () {\n      this.timeoutId = null;\n      this.raphael.setSize(this.el.width(), this.el.height());\n      return this.redraw();\n    };\n\n    Grid.prototype.hasToShow = function (i) {\n      return this.options.shown === true || this.options.shown[i] === true;\n    };\n\n    return Grid;\n  }(Morris.EventEmitter);\n\n  Morris.parseDate = function (date) {\n    var isecs, m, msecs, n, o, offsetmins, p, q, r, ret, secs;\n\n    if (typeof date === 'number') {\n      return date;\n    }\n\n    m = date.match(/^(\\d+) Q(\\d)$/);\n    n = date.match(/^(\\d+)-(\\d+)$/);\n    o = date.match(/^(\\d+)-(\\d+)-(\\d+)$/);\n    p = date.match(/^(\\d+) W(\\d+)$/);\n    q = date.match(/^(\\d+)-(\\d+)-(\\d+)[ T](\\d+):(\\d+)(Z|([+-])(\\d\\d):?(\\d\\d))?$/);\n    r = date.match(/^(\\d+)-(\\d+)-(\\d+)[ T](\\d+):(\\d+):(\\d+(\\.\\d+)?)(Z|([+-])(\\d\\d):?(\\d\\d))?$/);\n\n    if (m) {\n      return new Date(parseInt(m[1], 10), parseInt(m[2], 10) * 3 - 1, 1).getTime();\n    } else if (n) {\n      return new Date(parseInt(n[1], 10), parseInt(n[2], 10) - 1, 1).getTime();\n    } else if (o) {\n      return new Date(parseInt(o[1], 10), parseInt(o[2], 10) - 1, parseInt(o[3], 10)).getTime();\n    } else if (p) {\n      ret = new Date(parseInt(p[1], 10), 0, 1);\n\n      if (ret.getDay() !== 4) {\n        ret.setMonth(0, 1 + (4 - ret.getDay() + 7) % 7);\n      }\n\n      return ret.getTime() + parseInt(p[2], 10) * 604800000;\n    } else if (q) {\n      if (!q[6]) {\n        return new Date(parseInt(q[1], 10), parseInt(q[2], 10) - 1, parseInt(q[3], 10), parseInt(q[4], 10), parseInt(q[5], 10)).getTime();\n      } else {\n        offsetmins = 0;\n\n        if (q[6] !== 'Z') {\n          offsetmins = parseInt(q[8], 10) * 60 + parseInt(q[9], 10);\n\n          if (q[7] === '+') {\n            offsetmins = 0 - offsetmins;\n          }\n        }\n\n        return Date.UTC(parseInt(q[1], 10), parseInt(q[2], 10) - 1, parseInt(q[3], 10), parseInt(q[4], 10), parseInt(q[5], 10) + offsetmins);\n      }\n    } else if (r) {\n      secs = parseFloat(r[6]);\n      isecs = Math.floor(secs);\n      msecs = Math.round((secs - isecs) * 1000);\n\n      if (!r[8]) {\n        return new Date(parseInt(r[1], 10), parseInt(r[2], 10) - 1, parseInt(r[3], 10), parseInt(r[4], 10), parseInt(r[5], 10), isecs, msecs).getTime();\n      } else {\n        offsetmins = 0;\n\n        if (r[8] !== 'Z') {\n          offsetmins = parseInt(r[10], 10) * 60 + parseInt(r[11], 10);\n\n          if (r[9] === '+') {\n            offsetmins = 0 - offsetmins;\n          }\n        }\n\n        return Date.UTC(parseInt(r[1], 10), parseInt(r[2], 10) - 1, parseInt(r[3], 10), parseInt(r[4], 10), parseInt(r[5], 10) + offsetmins, isecs, msecs);\n      }\n    } else {\n      return new Date(parseInt(date, 10), 0, 1).getTime();\n    }\n  };\n\n  Morris.Hover = function () {\n    Hover.defaults = {\n      \"class\": 'morris-hover morris-default-style'\n    };\n\n    function Hover(options) {\n      if (options == null) {\n        options = {};\n      }\n\n      this.options = $.extend({}, Morris.Hover.defaults, options);\n      this.el = $(\"<div class='\" + this.options[\"class\"] + \"'></div>\");\n      this.el.hide();\n      this.options.parent.append(this.el);\n    }\n\n    Hover.prototype.update = function (html, x, y, centre_y) {\n      if (!html) {\n        return this.hide();\n      } else {\n        this.html(html);\n        this.show();\n        return this.moveTo(x, y, centre_y);\n      }\n    };\n\n    Hover.prototype.html = function (content) {\n      return this.el.html(content);\n    };\n\n    Hover.prototype.moveTo = function (x, y, centre_y) {\n      var hoverHeight, hoverWidth, left, parentHeight, parentWidth, top;\n      parentWidth = this.options.parent.innerWidth();\n      parentHeight = this.options.parent.innerHeight();\n      hoverWidth = this.el.outerWidth();\n      hoverHeight = this.el.outerHeight();\n      left = Math.min(Math.max(0, x - hoverWidth / 2), parentWidth - hoverWidth);\n\n      if (y != null) {\n        if (centre_y === true) {\n          top = y - hoverHeight / 2;\n\n          if (top < 0) {\n            top = 0;\n          }\n        } else {\n          top = y - hoverHeight - 10;\n\n          if (top < 0) {\n            top = y + 10;\n\n            if (top + hoverHeight > parentHeight) {\n              top = parentHeight / 2 - hoverHeight / 2;\n            }\n          }\n        }\n      } else {\n        top = parentHeight / 2 - hoverHeight / 2;\n      }\n\n      return this.el.css({\n        left: left + \"px\",\n        top: parseInt(top) + \"px\"\n      });\n    };\n\n    Hover.prototype.show = function () {\n      return this.el.show();\n    };\n\n    Hover.prototype.hide = function () {\n      return this.el.hide();\n    };\n\n    return Hover;\n  }();\n\n  Morris.Line = function (_super) {\n    __extends(Line, _super);\n\n    function Line(options) {\n      this.hilight = __bind(this.hilight, this);\n      this.onHoverOut = __bind(this.onHoverOut, this);\n      this.onHoverMove = __bind(this.onHoverMove, this);\n      this.onGridClick = __bind(this.onGridClick, this);\n\n      if (!(this instanceof Morris.Line)) {\n        return new Morris.Line(options);\n      }\n\n      Line.__super__.constructor.call(this, options);\n    }\n\n    Line.prototype.init = function () {\n      if (this.options.hideHover !== 'always') {\n        this.hover = new Morris.Hover({\n          parent: this.el\n        });\n        this.on('hovermove', this.onHoverMove);\n        this.on('hoverout', this.onHoverOut);\n        return this.on('gridclick', this.onGridClick);\n      }\n    };\n\n    Line.prototype.defaults = {\n      lineWidth: 3,\n      pointSize: 4,\n      lineColors: ['#0b62a4', '#7A92A3', '#4da74d', '#afd8f8', '#edc240', '#cb4b4b', '#9440ed'],\n      pointStrokeWidths: [1],\n      pointStrokeColors: ['#ffffff'],\n      pointFillColors: [],\n      smooth: true,\n      shown: true,\n      xLabels: 'auto',\n      xLabelFormat: null,\n      xLabelMargin: 24,\n      hideHover: false,\n      trendLine: false,\n      trendLineWidth: 2,\n      trendLineColors: ['#689bc3', '#a2b3bf', '#64b764']\n    };\n\n    Line.prototype.calc = function () {\n      this.calcPoints();\n      return this.generatePaths();\n    };\n\n    Line.prototype.calcPoints = function () {\n      var row, y, _i, _len, _ref, _results;\n\n      _ref = this.data;\n      _results = [];\n\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        row = _ref[_i];\n        row._x = this.transX(row.x);\n\n        row._y = function () {\n          var _j, _len1, _ref1, _results1;\n\n          _ref1 = row.y;\n          _results1 = [];\n\n          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n            y = _ref1[_j];\n\n            if (y != null) {\n              _results1.push(this.transY(y));\n            } else {\n              _results1.push(y);\n            }\n          }\n\n          return _results1;\n        }.call(this);\n\n        _results.push(row._ymax = Math.min.apply(Math, [this.bottom].concat(function () {\n          var _j, _len1, _ref1, _results1;\n\n          _ref1 = row._y;\n          _results1 = [];\n\n          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n            y = _ref1[_j];\n\n            if (y != null) {\n              _results1.push(y);\n            }\n          }\n\n          return _results1;\n        }())));\n      }\n\n      return _results;\n    };\n\n    Line.prototype.hitTest = function (x) {\n      var index, r, _i, _len, _ref;\n\n      if (this.data.length === 0) {\n        return null;\n      }\n\n      _ref = this.data.slice(1);\n\n      for (index = _i = 0, _len = _ref.length; _i < _len; index = ++_i) {\n        r = _ref[index];\n\n        if (x < (r._x + this.data[index]._x) / 2) {\n          break;\n        }\n      }\n\n      return index;\n    };\n\n    Line.prototype.onGridClick = function (x, y) {\n      var index;\n      index = this.hitTest(x);\n      return this.fire('click', index, this.data[index].src, x, y);\n    };\n\n    Line.prototype.onHoverMove = function (x, y) {\n      var index;\n      index = this.hitTest(x);\n      return this.displayHoverForRow(index);\n    };\n\n    Line.prototype.onHoverOut = function () {\n      if (this.options.hideHover !== false) {\n        return this.displayHoverForRow(null);\n      }\n    };\n\n    Line.prototype.displayHoverForRow = function (index) {\n      var _ref;\n\n      if (index != null) {\n        (_ref = this.hover).update.apply(_ref, this.hoverContentForRow(index));\n\n        return this.hilight(index);\n      } else {\n        this.hover.hide();\n        return this.hilight();\n      }\n    };\n\n    Line.prototype.hoverContentForRow = function (index) {\n      var content, j, row, y, _i, _len, _ref;\n\n      row = this.data[index];\n      content = $(\"<div class='morris-hover-row-label'>\").text(row.label);\n      content = content.prop('outerHTML');\n      _ref = row.y;\n\n      for (j = _i = 0, _len = _ref.length; _i < _len; j = ++_i) {\n        y = _ref[j];\n\n        if (this.options.labels[j] === false) {\n          continue;\n        }\n\n        content += \"<div class='morris-hover-point' style='color: \" + this.colorFor(row, j, 'label') + \"'>\\n  \" + this.options.labels[j] + \":\\n  \" + this.yLabelFormat(y, j) + \"\\n</div>\";\n      }\n\n      if (typeof this.options.hoverCallback === 'function') {\n        content = this.options.hoverCallback(index, this.options, content, row.src);\n      }\n\n      return [content, row._x, row._ymax];\n    };\n\n    Line.prototype.generatePaths = function () {\n      var coords, i, r, smooth;\n      return this.paths = function () {\n        var _i, _ref, _ref1, _results;\n\n        _results = [];\n\n        for (i = _i = 0, _ref = this.options.ykeys.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n          smooth = typeof this.options.smooth === \"boolean\" ? this.options.smooth : (_ref1 = this.options.ykeys[i], __indexOf.call(this.options.smooth, _ref1) >= 0);\n\n          coords = function () {\n            var _j, _len, _ref2, _results1;\n\n            _ref2 = this.data;\n            _results1 = [];\n\n            for (_j = 0, _len = _ref2.length; _j < _len; _j++) {\n              r = _ref2[_j];\n\n              if (r._y[i] !== void 0) {\n                _results1.push({\n                  x: r._x,\n                  y: r._y[i]\n                });\n              }\n            }\n\n            return _results1;\n          }.call(this);\n\n          if (coords.length > 1) {\n            _results.push(Morris.Line.createPath(coords, smooth, this.bottom));\n          } else {\n            _results.push(null);\n          }\n        }\n\n        return _results;\n      }.call(this);\n    };\n\n    Line.prototype.draw = function () {\n      var _ref;\n\n      if ((_ref = this.options.axes) === true || _ref === 'both' || _ref === 'x') {\n        this.drawXAxis();\n      }\n\n      this.drawSeries();\n\n      if (this.options.hideHover === false) {\n        return this.displayHoverForRow(this.data.length - 1);\n      }\n    };\n\n    Line.prototype.drawXAxis = function () {\n      var drawLabel,\n          l,\n          labels,\n          prevAngleMargin,\n          prevLabelMargin,\n          row,\n          ypos,\n          _i,\n          _len,\n          _results,\n          _this = this;\n\n      ypos = this.bottom + this.options.padding / 2;\n      prevLabelMargin = null;\n      prevAngleMargin = null;\n\n      drawLabel = function drawLabel(labelText, xpos) {\n        var label, labelBox, margin, offset, textBox;\n        label = _this.drawXAxisLabel(_this.transX(xpos), ypos, labelText);\n        textBox = label.getBBox();\n        label.transform(\"r\" + -_this.options.xLabelAngle);\n        labelBox = label.getBBox();\n        label.transform(\"t0,\" + labelBox.height / 2 + \"...\");\n\n        if (_this.options.xLabelAngle !== 0) {\n          offset = -0.5 * textBox.width * Math.cos(_this.options.xLabelAngle * Math.PI / 180.0);\n          label.transform(\"t\" + offset + \",0...\");\n        }\n\n        labelBox = label.getBBox();\n\n        if ((prevLabelMargin == null || prevLabelMargin >= labelBox.x + labelBox.width || prevAngleMargin != null && prevAngleMargin >= labelBox.x) && labelBox.x >= 0 && labelBox.x + labelBox.width < _this.el.width()) {\n          if (_this.options.xLabelAngle !== 0) {\n            margin = 1.25 * _this.options.gridTextSize / Math.sin(_this.options.xLabelAngle * Math.PI / 180.0);\n            prevAngleMargin = labelBox.x - margin;\n          }\n\n          return prevLabelMargin = labelBox.x - _this.options.xLabelMargin;\n        } else {\n          return label.remove();\n        }\n      };\n\n      if (this.options.parseTime) {\n        if (this.data.length === 1 && this.options.xLabels === 'auto') {\n          labels = [[this.data[0].label, this.data[0].x]];\n        } else {\n          labels = Morris.labelSeries(this.xmin, this.xmax, this.width, this.options.xLabels, this.options.xLabelFormat);\n        }\n      } else {\n        labels = function () {\n          var _i, _len, _ref, _results;\n\n          _ref = this.data;\n          _results = [];\n\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            row = _ref[_i];\n\n            _results.push([row.label, row.x]);\n          }\n\n          return _results;\n        }.call(this);\n      }\n\n      labels.reverse();\n      _results = [];\n\n      for (_i = 0, _len = labels.length; _i < _len; _i++) {\n        l = labels[_i];\n\n        _results.push(drawLabel(l[0], l[1]));\n      }\n\n      return _results;\n    };\n\n    Line.prototype.drawSeries = function () {\n      var i, _i, _j, _ref, _ref1, _results;\n\n      this.seriesPoints = [];\n\n      for (i = _i = _ref = this.options.ykeys.length - 1; _ref <= 0 ? _i <= 0 : _i >= 0; i = _ref <= 0 ? ++_i : --_i) {\n        if (this.hasToShow(i)) {\n          if (this.options.trendLine !== false && this.options.trendLine === true || this.options.trendLine[i] === true) {\n            this._drawTrendLine(i);\n          }\n\n          this._drawLineFor(i);\n        }\n      }\n\n      _results = [];\n\n      for (i = _j = _ref1 = this.options.ykeys.length - 1; _ref1 <= 0 ? _j <= 0 : _j >= 0; i = _ref1 <= 0 ? ++_j : --_j) {\n        if (this.hasToShow(i)) {\n          _results.push(this._drawPointFor(i));\n        } else {\n          _results.push(void 0);\n        }\n      }\n\n      return _results;\n    };\n\n    Line.prototype._drawPointFor = function (index) {\n      var circle, row, _i, _len, _ref, _results;\n\n      this.seriesPoints[index] = [];\n      _ref = this.data;\n      _results = [];\n\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        row = _ref[_i];\n        circle = null;\n\n        if (row._y[index] != null) {\n          circle = this.drawLinePoint(row._x, row._y[index], this.colorFor(row, index, 'point'), index);\n        }\n\n        _results.push(this.seriesPoints[index].push(circle));\n      }\n\n      return _results;\n    };\n\n    Line.prototype._drawLineFor = function (index) {\n      var path;\n      path = this.paths[index];\n\n      if (path !== null) {\n        return this.drawLinePath(path, this.colorFor(null, index, 'line'), index);\n      }\n    };\n\n    Line.prototype._drawTrendLine = function (index) {\n      var a, b, data, datapoints, path, sum_x, sum_xx, sum_xy, sum_y, val, x, y, _i, _len, _ref;\n\n      sum_x = 0;\n      sum_y = 0;\n      sum_xx = 0;\n      sum_xy = 0;\n      datapoints = 0;\n      _ref = this.data;\n\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        val = _ref[_i];\n        x = val.x;\n        y = val.y[index];\n\n        if (y === void 0) {\n          continue;\n        }\n\n        datapoints += 1;\n        sum_x += x;\n        sum_y += y;\n        sum_xx += x * x;\n        sum_xy += x * y;\n      }\n\n      a = (datapoints * sum_xy - sum_x * sum_y) / (datapoints * sum_xx - sum_x * sum_x);\n      b = sum_y / datapoints - a * sum_x / datapoints;\n      data = [{}, {}];\n      data[0].x = this.transX(this.data[0].x);\n      data[0].y = this.transY(this.data[0].x * a + b);\n      data[1].x = this.transX(this.data[this.data.length - 1].x);\n      data[1].y = this.transY(this.data[this.data.length - 1].x * a + b);\n      path = Morris.Line.createPath(data, false, this.bottom);\n      return path = this.raphael.path(path).attr('stroke', this.colorFor(null, index, 'trendLine')).attr('stroke-width', this.options.trendLineWidth);\n    };\n\n    Line.createPath = function (coords, smooth, bottom) {\n      var coord, g, grads, i, ix, lg, path, prevCoord, x1, x2, y1, y2, _i, _len;\n\n      path = \"\";\n\n      if (smooth) {\n        grads = Morris.Line.gradients(coords);\n      }\n\n      prevCoord = {\n        y: null\n      };\n\n      for (i = _i = 0, _len = coords.length; _i < _len; i = ++_i) {\n        coord = coords[i];\n\n        if (coord.y != null) {\n          if (prevCoord.y != null) {\n            if (smooth) {\n              g = grads[i];\n              lg = grads[i - 1];\n              ix = (coord.x - prevCoord.x) / 4;\n              x1 = prevCoord.x + ix;\n              y1 = Math.min(bottom, prevCoord.y + ix * lg);\n              x2 = coord.x - ix;\n              y2 = Math.min(bottom, coord.y - ix * g);\n              path += \"C\" + x1 + \",\" + y1 + \",\" + x2 + \",\" + y2 + \",\" + coord.x + \",\" + coord.y;\n            } else {\n              path += \"L\" + coord.x + \",\" + coord.y;\n            }\n          } else {\n            if (!smooth || grads[i] != null) {\n              path += \"M\" + coord.x + \",\" + coord.y;\n            }\n          }\n        }\n\n        prevCoord = coord;\n      }\n\n      return path;\n    };\n\n    Line.gradients = function (coords) {\n      var coord, grad, i, nextCoord, prevCoord, _i, _len, _results;\n\n      grad = function grad(a, b) {\n        return (a.y - b.y) / (a.x - b.x);\n      };\n\n      _results = [];\n\n      for (i = _i = 0, _len = coords.length; _i < _len; i = ++_i) {\n        coord = coords[i];\n\n        if (coord.y != null) {\n          nextCoord = coords[i + 1] || {\n            y: null\n          };\n          prevCoord = coords[i - 1] || {\n            y: null\n          };\n\n          if (prevCoord.y != null && nextCoord.y != null) {\n            _results.push(grad(prevCoord, nextCoord));\n          } else if (prevCoord.y != null) {\n            _results.push(grad(prevCoord, coord));\n          } else if (nextCoord.y != null) {\n            _results.push(grad(coord, nextCoord));\n          } else {\n            _results.push(null);\n          }\n        } else {\n          _results.push(null);\n        }\n      }\n\n      return _results;\n    };\n\n    Line.prototype.hilight = function (index) {\n      var i, _i, _j, _ref, _ref1;\n\n      if (this.prevHilight !== null && this.prevHilight !== index) {\n        for (i = _i = 0, _ref = this.seriesPoints.length - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {\n          if (this.seriesPoints[i][this.prevHilight]) {\n            this.seriesPoints[i][this.prevHilight].animate(this.pointShrinkSeries(i));\n          }\n        }\n      }\n\n      if (index !== null && this.prevHilight !== index) {\n        for (i = _j = 0, _ref1 = this.seriesPoints.length - 1; 0 <= _ref1 ? _j <= _ref1 : _j >= _ref1; i = 0 <= _ref1 ? ++_j : --_j) {\n          if (this.seriesPoints[i][index]) {\n            this.seriesPoints[i][index].animate(this.pointGrowSeries(i));\n          }\n        }\n      }\n\n      return this.prevHilight = index;\n    };\n\n    Line.prototype.colorFor = function (row, sidx, type) {\n      if (typeof this.options.lineColors === 'function') {\n        return this.options.lineColors.call(this, row, sidx, type);\n      } else if (type === 'point') {\n        return this.options.pointFillColors[sidx % this.options.pointFillColors.length] || this.options.lineColors[sidx % this.options.lineColors.length];\n      } else if (type === 'line') {\n        return this.options.lineColors[sidx % this.options.lineColors.length];\n      } else {\n        return this.options.trendLineColors[sidx % this.options.trendLineColors.length];\n      }\n    };\n\n    Line.prototype.drawXAxisLabel = function (xPos, yPos, text) {\n      return this.raphael.text(xPos, yPos, text).attr('font-size', this.options.gridTextSize).attr('font-family', this.options.gridTextFamily).attr('font-weight', this.options.gridTextWeight).attr('fill', this.options.gridTextColor);\n    };\n\n    Line.prototype.drawLinePath = function (path, lineColor, lineIndex) {\n      return this.raphael.path(path).attr('stroke', lineColor).attr('stroke-width', this.lineWidthForSeries(lineIndex));\n    };\n\n    Line.prototype.drawLinePoint = function (xPos, yPos, pointColor, lineIndex) {\n      return this.raphael.circle(xPos, yPos, this.pointSizeForSeries(lineIndex)).attr('fill', pointColor).attr('stroke-width', this.pointStrokeWidthForSeries(lineIndex)).attr('stroke', this.pointStrokeColorForSeries(lineIndex));\n    };\n\n    Line.prototype.pointStrokeWidthForSeries = function (index) {\n      return this.options.pointStrokeWidths[index % this.options.pointStrokeWidths.length];\n    };\n\n    Line.prototype.pointStrokeColorForSeries = function (index) {\n      return this.options.pointStrokeColors[index % this.options.pointStrokeColors.length];\n    };\n\n    Line.prototype.lineWidthForSeries = function (index) {\n      if (this.options.lineWidth instanceof Array) {\n        return this.options.lineWidth[index % this.options.lineWidth.length];\n      } else {\n        return this.options.lineWidth;\n      }\n    };\n\n    Line.prototype.pointSizeForSeries = function (index) {\n      if (this.options.pointSize instanceof Array) {\n        return this.options.pointSize[index % this.options.pointSize.length];\n      } else {\n        return this.options.pointSize;\n      }\n    };\n\n    Line.prototype.pointGrowSeries = function (index) {\n      if (this.pointSizeForSeries(index) === 0) {\n        return;\n      }\n\n      return Raphael.animation({\n        r: this.pointSizeForSeries(index) + 3\n      }, 25, 'linear');\n    };\n\n    Line.prototype.pointShrinkSeries = function (index) {\n      return Raphael.animation({\n        r: this.pointSizeForSeries(index)\n      }, 25, 'linear');\n    };\n\n    return Line;\n  }(Morris.Grid);\n\n  Morris.labelSeries = function (dmin, dmax, pxwidth, specName, xLabelFormat) {\n    var d, d0, ddensity, name, ret, s, spec, t, _i, _len, _ref;\n\n    ddensity = 200 * (dmax - dmin) / pxwidth;\n    d0 = new Date(dmin);\n    spec = Morris.LABEL_SPECS[specName];\n\n    if (spec === void 0) {\n      _ref = Morris.AUTO_LABEL_ORDER;\n\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        name = _ref[_i];\n        s = Morris.LABEL_SPECS[name];\n\n        if (ddensity >= s.span) {\n          spec = s;\n          break;\n        }\n      }\n    }\n\n    if (spec === void 0) {\n      spec = Morris.LABEL_SPECS[\"second\"];\n    }\n\n    if (xLabelFormat) {\n      spec = $.extend({}, spec, {\n        fmt: xLabelFormat\n      });\n    }\n\n    d = spec.start(d0);\n    ret = [];\n\n    while ((t = d.getTime()) <= dmax) {\n      if (t >= dmin) {\n        ret.push([spec.fmt(d), t]);\n      }\n\n      spec.incr(d);\n    }\n\n    return ret;\n  };\n\n  minutesSpecHelper = function minutesSpecHelper(interval) {\n    return {\n      span: interval * 60 * 1000,\n      start: function start(d) {\n        return new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours());\n      },\n      fmt: function fmt(d) {\n        return \"\" + Morris.pad2(d.getHours()) + \":\" + Morris.pad2(d.getMinutes());\n      },\n      incr: function incr(d) {\n        return d.setUTCMinutes(d.getUTCMinutes() + interval);\n      }\n    };\n  };\n\n  secondsSpecHelper = function secondsSpecHelper(interval) {\n    return {\n      span: interval * 1000,\n      start: function start(d) {\n        return new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), d.getMinutes());\n      },\n      fmt: function fmt(d) {\n        return \"\" + Morris.pad2(d.getHours()) + \":\" + Morris.pad2(d.getMinutes()) + \":\" + Morris.pad2(d.getSeconds());\n      },\n      incr: function incr(d) {\n        return d.setUTCSeconds(d.getUTCSeconds() + interval);\n      }\n    };\n  };\n\n  Morris.LABEL_SPECS = {\n    \"decade\": {\n      span: 172800000000,\n      start: function start(d) {\n        return new Date(d.getFullYear() - d.getFullYear() % 10, 0, 1);\n      },\n      fmt: function fmt(d) {\n        return \"\" + d.getFullYear();\n      },\n      incr: function incr(d) {\n        return d.setFullYear(d.getFullYear() + 10);\n      }\n    },\n    \"year\": {\n      span: 17280000000,\n      start: function start(d) {\n        return new Date(d.getFullYear(), 0, 1);\n      },\n      fmt: function fmt(d) {\n        return \"\" + d.getFullYear();\n      },\n      incr: function incr(d) {\n        return d.setFullYear(d.getFullYear() + 1);\n      }\n    },\n    \"month\": {\n      span: 2419200000,\n      start: function start(d) {\n        return new Date(d.getFullYear(), d.getMonth(), 1);\n      },\n      fmt: function fmt(d) {\n        return \"\" + d.getFullYear() + \"-\" + Morris.pad2(d.getMonth() + 1);\n      },\n      incr: function incr(d) {\n        return d.setMonth(d.getMonth() + 1);\n      }\n    },\n    \"week\": {\n      span: 604800000,\n      start: function start(d) {\n        return new Date(d.getFullYear(), d.getMonth(), d.getDate());\n      },\n      fmt: function fmt(d) {\n        return \"\" + d.getFullYear() + \"-\" + Morris.pad2(d.getMonth() + 1) + \"-\" + Morris.pad2(d.getDate());\n      },\n      incr: function incr(d) {\n        return d.setDate(d.getDate() + 7);\n      }\n    },\n    \"day\": {\n      span: 86400000,\n      start: function start(d) {\n        return new Date(d.getFullYear(), d.getMonth(), d.getDate());\n      },\n      fmt: function fmt(d) {\n        return \"\" + d.getFullYear() + \"-\" + Morris.pad2(d.getMonth() + 1) + \"-\" + Morris.pad2(d.getDate());\n      },\n      incr: function incr(d) {\n        return d.setDate(d.getDate() + 1);\n      }\n    },\n    \"hour\": minutesSpecHelper(60),\n    \"30min\": minutesSpecHelper(30),\n    \"15min\": minutesSpecHelper(15),\n    \"10min\": minutesSpecHelper(10),\n    \"5min\": minutesSpecHelper(5),\n    \"minute\": minutesSpecHelper(1),\n    \"30sec\": secondsSpecHelper(30),\n    \"15sec\": secondsSpecHelper(15),\n    \"10sec\": secondsSpecHelper(10),\n    \"5sec\": secondsSpecHelper(5),\n    \"second\": secondsSpecHelper(1)\n  };\n  Morris.AUTO_LABEL_ORDER = [\"decade\", \"year\", \"month\", \"week\", \"day\", \"hour\", \"30min\", \"15min\", \"10min\", \"5min\", \"minute\", \"30sec\", \"15sec\", \"10sec\", \"5sec\", \"second\"];\n\n  Morris.Area = function (_super) {\n    var areaDefaults;\n\n    __extends(Area, _super);\n\n    areaDefaults = {\n      fillOpacity: 'auto',\n      behaveLikeLine: false\n    };\n\n    function Area(options) {\n      var areaOptions;\n\n      if (!(this instanceof Morris.Area)) {\n        return new Morris.Area(options);\n      }\n\n      areaOptions = $.extend({}, areaDefaults, options);\n      this.cumulative = !areaOptions.behaveLikeLine;\n\n      if (areaOptions.fillOpacity === 'auto') {\n        areaOptions.fillOpacity = areaOptions.behaveLikeLine ? .8 : 1;\n      }\n\n      Area.__super__.constructor.call(this, areaOptions);\n    }\n\n    Area.prototype.calcPoints = function () {\n      var row, total, y, _i, _len, _ref, _results;\n\n      _ref = this.data;\n      _results = [];\n\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        row = _ref[_i];\n        row._x = this.transX(row.x);\n        total = 0;\n\n        row._y = function () {\n          var _j, _len1, _ref1, _results1;\n\n          _ref1 = row.y;\n          _results1 = [];\n\n          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n            y = _ref1[_j];\n\n            if (this.options.behaveLikeLine) {\n              _results1.push(this.transY(y));\n            } else {\n              total += y || 0;\n\n              _results1.push(this.transY(total));\n            }\n          }\n\n          return _results1;\n        }.call(this);\n\n        _results.push(row._ymax = Math.max.apply(Math, row._y));\n      }\n\n      return _results;\n    };\n\n    Area.prototype.drawSeries = function () {\n      var i, range, _i, _j, _k, _len, _ref, _ref1, _results, _results1, _results2;\n\n      this.seriesPoints = [];\n\n      if (this.options.behaveLikeLine) {\n        range = function () {\n          _results = [];\n\n          for (var _i = 0, _ref = this.options.ykeys.length - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; 0 <= _ref ? _i++ : _i--) {\n            _results.push(_i);\n          }\n\n          return _results;\n        }.apply(this);\n      } else {\n        range = function () {\n          _results1 = [];\n\n          for (var _j = _ref1 = this.options.ykeys.length - 1; _ref1 <= 0 ? _j <= 0 : _j >= 0; _ref1 <= 0 ? _j++ : _j--) {\n            _results1.push(_j);\n          }\n\n          return _results1;\n        }.apply(this);\n      }\n\n      _results2 = [];\n\n      for (_k = 0, _len = range.length; _k < _len; _k++) {\n        i = range[_k];\n\n        this._drawFillFor(i);\n\n        this._drawLineFor(i);\n\n        _results2.push(this._drawPointFor(i));\n      }\n\n      return _results2;\n    };\n\n    Area.prototype._drawFillFor = function (index) {\n      var path;\n      path = this.paths[index];\n\n      if (path !== null) {\n        path = path + (\"L\" + this.transX(this.xmax) + \",\" + this.bottom + \"L\" + this.transX(this.xmin) + \",\" + this.bottom + \"Z\");\n        return this.drawFilledPath(path, this.fillForSeries(index));\n      }\n    };\n\n    Area.prototype.fillForSeries = function (i) {\n      var color;\n      color = Raphael.rgb2hsl(this.colorFor(this.data[i], i, 'line'));\n      return Raphael.hsl(color.h, this.options.behaveLikeLine ? color.s * 0.9 : color.s * 0.75, Math.min(0.98, this.options.behaveLikeLine ? color.l * 1.2 : color.l * 1.25));\n    };\n\n    Area.prototype.drawFilledPath = function (path, fill) {\n      return this.raphael.path(path).attr('fill', fill).attr('fill-opacity', this.options.fillOpacity).attr('stroke', 'none');\n    };\n\n    return Area;\n  }(Morris.Line);\n\n  Morris.Bar = function (_super) {\n    __extends(Bar, _super);\n\n    function Bar(options) {\n      this.onHoverOut = __bind(this.onHoverOut, this);\n      this.onHoverMove = __bind(this.onHoverMove, this);\n      this.onGridClick = __bind(this.onGridClick, this);\n\n      if (!(this instanceof Morris.Bar)) {\n        return new Morris.Bar(options);\n      }\n\n      Bar.__super__.constructor.call(this, $.extend({}, options, {\n        parseTime: false\n      }));\n    }\n\n    Bar.prototype.init = function () {\n      this.cumulative = this.options.stacked;\n\n      if (this.options.hideHover !== 'always') {\n        this.hover = new Morris.Hover({\n          parent: this.el\n        });\n        this.on('hovermove', this.onHoverMove);\n        this.on('hoverout', this.onHoverOut);\n        return this.on('gridclick', this.onGridClick);\n      }\n    };\n\n    Bar.prototype.defaults = {\n      barSizeRatio: 0.75,\n      barGap: 3,\n      barColors: ['#0b62a4', '#7a92a3', '#4da74d', '#afd8f8', '#edc240', '#cb4b4b', '#9440ed'],\n      barOpacity: 1.0,\n      barRadius: [0, 0, 0, 0],\n      xLabelMargin: 50,\n      horizontal: false,\n      shown: true\n    };\n\n    Bar.prototype.calc = function () {\n      var _ref;\n\n      this.calcBars();\n\n      if (this.options.hideHover === false) {\n        return (_ref = this.hover).update.apply(_ref, this.hoverContentForRow(this.data.length - 1));\n      }\n    };\n\n    Bar.prototype.calcBars = function () {\n      var idx, row, y, _i, _len, _ref, _results;\n\n      _ref = this.data;\n      _results = [];\n\n      for (idx = _i = 0, _len = _ref.length; _i < _len; idx = ++_i) {\n        row = _ref[idx];\n        row._x = this.xStart + this.xSize * (idx + 0.5) / this.data.length;\n\n        _results.push(row._y = function () {\n          var _j, _len1, _ref1, _results1;\n\n          _ref1 = row.y;\n          _results1 = [];\n\n          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n            y = _ref1[_j];\n\n            if (y != null) {\n              _results1.push(this.transY(y));\n            } else {\n              _results1.push(null);\n            }\n          }\n\n          return _results1;\n        }.call(this));\n      }\n\n      return _results;\n    };\n\n    Bar.prototype.draw = function () {\n      var _ref;\n\n      if ((_ref = this.options.axes) === true || _ref === 'both' || _ref === 'x') {\n        this.drawXAxis();\n      }\n\n      return this.drawSeries();\n    };\n\n    Bar.prototype.drawXAxis = function () {\n      var angle, basePos, i, label, labelBox, margin, maxSize, offset, prevAngleMargin, prevLabelMargin, row, size, startPos, textBox, _i, _ref, _results;\n\n      if (!this.options.horizontal) {\n        basePos = this.getXAxisLabelY();\n      } else {\n        basePos = this.getYAxisLabelX();\n      }\n\n      prevLabelMargin = null;\n      prevAngleMargin = null;\n      _results = [];\n\n      for (i = _i = 0, _ref = this.data.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        row = this.data[this.data.length - 1 - i];\n\n        if (!this.options.horizontal) {\n          label = this.drawXAxisLabel(row._x, basePos, row.label);\n        } else {\n          label = this.drawYAxisLabel(basePos, row._x - 0.5 * this.options.gridTextSize, row.label);\n        }\n\n        if (!this.options.horizontal) {\n          angle = this.options.xLabelAngle;\n        } else {\n          angle = 0;\n        }\n\n        textBox = label.getBBox();\n        label.transform(\"r\" + -angle);\n        labelBox = label.getBBox();\n        label.transform(\"t0,\" + labelBox.height / 2 + \"...\");\n\n        if (angle !== 0) {\n          offset = -0.5 * textBox.width * Math.cos(angle * Math.PI / 180.0);\n          label.transform(\"t\" + offset + \",0...\");\n        }\n\n        if (!this.options.horizontal) {\n          startPos = labelBox.x;\n          size = labelBox.width;\n          maxSize = this.el.width();\n        } else {\n          startPos = labelBox.y;\n          size = labelBox.height;\n          maxSize = this.el.height();\n        }\n\n        if ((prevLabelMargin == null || prevLabelMargin >= startPos + size || prevAngleMargin != null && prevAngleMargin >= startPos) && startPos >= 0 && startPos + size < maxSize) {\n          if (angle !== 0) {\n            margin = 1.25 * this.options.gridTextSize / Math.sin(angle * Math.PI / 180.0);\n            prevAngleMargin = startPos - margin;\n          }\n\n          if (!this.options.horizontal) {\n            _results.push(prevLabelMargin = startPos - this.options.xLabelMargin);\n          } else {\n            _results.push(prevLabelMargin = startPos);\n          }\n        } else {\n          _results.push(label.remove());\n        }\n      }\n\n      return _results;\n    };\n\n    Bar.prototype.getXAxisLabelY = function () {\n      return this.bottom + (this.options.xAxisLabelTopPadding || this.options.padding / 2);\n    };\n\n    Bar.prototype.drawSeries = function () {\n      var barWidth, bottom, groupWidth, i, idx, lastTop, left, leftPadding, numBars, row, sidx, size, spaceLeft, top, ypos, zeroPos, _i, _ref;\n\n      groupWidth = this.xSize / this.options.data.length;\n\n      if (this.options.stacked) {\n        numBars = 1;\n      } else {\n        numBars = 0;\n\n        for (i = _i = 0, _ref = this.options.ykeys.length - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {\n          if (this.hasToShow(i)) {\n            numBars += 1;\n          }\n        }\n      }\n\n      barWidth = (groupWidth * this.options.barSizeRatio - this.options.barGap * (numBars - 1)) / numBars;\n\n      if (this.options.barSize) {\n        barWidth = Math.min(barWidth, this.options.barSize);\n      }\n\n      spaceLeft = groupWidth - barWidth * numBars - this.options.barGap * (numBars - 1);\n      leftPadding = spaceLeft / 2;\n      zeroPos = this.ymin <= 0 && this.ymax >= 0 ? this.transY(0) : null;\n      return this.bars = function () {\n        var _j, _len, _ref1, _results;\n\n        _ref1 = this.data;\n        _results = [];\n\n        for (idx = _j = 0, _len = _ref1.length; _j < _len; idx = ++_j) {\n          row = _ref1[idx];\n          lastTop = 0;\n\n          _results.push(function () {\n            var _k, _len1, _ref2, _results1;\n\n            _ref2 = row._y;\n            _results1 = [];\n\n            for (sidx = _k = 0, _len1 = _ref2.length; _k < _len1; sidx = ++_k) {\n              ypos = _ref2[sidx];\n\n              if (!this.hasToShow(sidx)) {\n                continue;\n              }\n\n              if (ypos !== null) {\n                if (zeroPos) {\n                  top = Math.min(ypos, zeroPos);\n                  bottom = Math.max(ypos, zeroPos);\n                } else {\n                  top = ypos;\n                  bottom = this.bottom;\n                }\n\n                left = this.xStart + idx * groupWidth + leftPadding;\n\n                if (!this.options.stacked) {\n                  left += sidx * (barWidth + this.options.barGap);\n                }\n\n                size = bottom - top;\n\n                if (this.options.verticalGridCondition && this.options.verticalGridCondition(row.x)) {\n                  if (!this.options.horizontal) {\n                    this.drawBar(this.xStart + idx * groupWidth, this.yEnd, groupWidth, this.ySize, this.options.verticalGridColor, this.options.verticalGridOpacity, this.options.barRadius);\n                  } else {\n                    this.drawBar(this.yStart, this.xStart + idx * groupWidth, this.ySize, groupWidth, this.options.verticalGridColor, this.options.verticalGridOpacity, this.options.barRadius);\n                  }\n                }\n\n                if (this.options.stacked) {\n                  top -= lastTop;\n                }\n\n                if (!this.options.horizontal) {\n                  this.drawBar(left, top, barWidth, size, this.colorFor(row, sidx, 'bar'), this.options.barOpacity, this.options.barRadius);\n\n                  _results1.push(lastTop += size);\n                } else {\n                  this.drawBar(top, left, size, barWidth, this.colorFor(row, sidx, 'bar'), this.options.barOpacity, this.options.barRadius);\n\n                  _results1.push(lastTop -= size);\n                }\n              } else {\n                _results1.push(null);\n              }\n            }\n\n            return _results1;\n          }.call(this));\n        }\n\n        return _results;\n      }.call(this);\n    };\n\n    Bar.prototype.colorFor = function (row, sidx, type) {\n      var r, s;\n\n      if (typeof this.options.barColors === 'function') {\n        r = {\n          x: row.x,\n          y: row.y[sidx],\n          label: row.label\n        };\n        s = {\n          index: sidx,\n          key: this.options.ykeys[sidx],\n          label: this.options.labels[sidx]\n        };\n        return this.options.barColors.call(this, r, s, type);\n      } else {\n        return this.options.barColors[sidx % this.options.barColors.length];\n      }\n    };\n\n    Bar.prototype.hitTest = function (x, y) {\n      var pos;\n\n      if (this.data.length === 0) {\n        return null;\n      }\n\n      if (!this.options.horizontal) {\n        pos = x;\n      } else {\n        pos = y;\n      }\n\n      pos = Math.max(Math.min(pos, this.xEnd), this.xStart);\n      return Math.min(this.data.length - 1, Math.floor((pos - this.xStart) / (this.xSize / this.data.length)));\n    };\n\n    Bar.prototype.onGridClick = function (x, y) {\n      var index;\n      index = this.hitTest(x, y);\n      return this.fire('click', index, this.data[index].src, x, y);\n    };\n\n    Bar.prototype.onHoverMove = function (x, y) {\n      var index, _ref;\n\n      index = this.hitTest(x, y);\n      return (_ref = this.hover).update.apply(_ref, this.hoverContentForRow(index));\n    };\n\n    Bar.prototype.onHoverOut = function () {\n      if (this.options.hideHover !== false) {\n        return this.hover.hide();\n      }\n    };\n\n    Bar.prototype.hoverContentForRow = function (index) {\n      var content, j, row, x, y, _i, _len, _ref;\n\n      row = this.data[index];\n      content = $(\"<div class='morris-hover-row-label'>\").text(row.label);\n      content = content.prop('outerHTML');\n      _ref = row.y;\n\n      for (j = _i = 0, _len = _ref.length; _i < _len; j = ++_i) {\n        y = _ref[j];\n\n        if (this.options.labels[j] === false) {\n          continue;\n        }\n\n        content += \"<div class='morris-hover-point' style='color: \" + this.colorFor(row, j, 'label') + \"'>\\n  \" + this.options.labels[j] + \":\\n  \" + this.yLabelFormat(y, j) + \"\\n</div>\";\n      }\n\n      if (typeof this.options.hoverCallback === 'function') {\n        content = this.options.hoverCallback(index, this.options, content, row.src);\n      }\n\n      if (!this.options.horizontal) {\n        x = this.left + (index + 0.5) * this.width / this.data.length;\n        return [content, x];\n      } else {\n        x = this.left + 0.5 * this.width;\n        y = this.top + (index + 0.5) * this.height / this.data.length;\n        return [content, x, y, true];\n      }\n    };\n\n    Bar.prototype.drawXAxisLabel = function (xPos, yPos, text) {\n      var label;\n      return label = this.raphael.text(xPos, yPos, text).attr('font-size', this.options.gridTextSize).attr('font-family', this.options.gridTextFamily).attr('font-weight', this.options.gridTextWeight).attr('fill', this.options.gridTextColor);\n    };\n\n    Bar.prototype.drawBar = function (xPos, yPos, width, height, barColor, opacity, radiusArray) {\n      var maxRadius, path;\n      maxRadius = Math.max.apply(Math, radiusArray);\n\n      if (maxRadius === 0 || maxRadius > height) {\n        path = this.raphael.rect(xPos, yPos, width, height);\n      } else {\n        path = this.raphael.path(this.roundedRect(xPos, yPos, width, height, radiusArray));\n      }\n\n      return path.attr('fill', barColor).attr('fill-opacity', opacity).attr('stroke', 'none');\n    };\n\n    Bar.prototype.roundedRect = function (x, y, w, h, r) {\n      if (r == null) {\n        r = [0, 0, 0, 0];\n      }\n\n      return [\"M\", x, r[0] + y, \"Q\", x, y, x + r[0], y, \"L\", x + w - r[1], y, \"Q\", x + w, y, x + w, y + r[1], \"L\", x + w, y + h - r[2], \"Q\", x + w, y + h, x + w - r[2], y + h, \"L\", x + r[3], y + h, \"Q\", x, y + h, x, y + h - r[3], \"Z\"];\n    };\n\n    return Bar;\n  }(Morris.Grid);\n\n  Morris.Donut = function (_super) {\n    __extends(Donut, _super);\n\n    Donut.prototype.defaults = {\n      colors: ['#0B62A4', '#3980B5', '#679DC6', '#95BBD7', '#B0CCE1', '#095791', '#095085', '#083E67', '#052C48', '#042135'],\n      backgroundColor: '#FFFFFF',\n      labelColor: '#000000',\n      formatter: Morris.commas,\n      resize: false\n    };\n\n    function Donut(options) {\n      this.resizeHandler = __bind(this.resizeHandler, this);\n      this.select = __bind(this.select, this);\n      this.click = __bind(this.click, this);\n\n      var _this = this;\n\n      if (!(this instanceof Morris.Donut)) {\n        return new Morris.Donut(options);\n      }\n\n      this.options = $.extend({}, this.defaults, options);\n\n      if (typeof options.element === 'string') {\n        this.el = $(document.getElementById(options.element));\n      } else {\n        this.el = $(options.element);\n      }\n\n      if (this.el === null || this.el.length === 0) {\n        throw new Error(\"Graph placeholder not found.\");\n      }\n\n      if (options.data === void 0 || options.data.length === 0) {\n        return;\n      }\n\n      this.raphael = new Raphael(this.el[0]);\n\n      if (this.options.resize) {\n        $(window).bind('resize', function (evt) {\n          if (_this.timeoutId != null) {\n            window.clearTimeout(_this.timeoutId);\n          }\n\n          return _this.timeoutId = window.setTimeout(_this.resizeHandler, 100);\n        });\n      }\n\n      this.setData(options.data);\n    }\n\n    Donut.prototype.redraw = function () {\n      var C, cx, cy, i, idx, last, max_value, min, next, seg, total, value, w, _i, _j, _k, _len, _len1, _len2, _ref, _ref1, _ref2, _results;\n\n      this.raphael.clear();\n      cx = this.el.width() / 2;\n      cy = this.el.height() / 2;\n      w = (Math.min(cx, cy) - 10) / 3;\n      total = 0;\n      _ref = this.values;\n\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        value = _ref[_i];\n        total += value;\n      }\n\n      min = 5 / (2 * w);\n      C = 1.9999 * Math.PI - min * this.data.length;\n      last = 0;\n      idx = 0;\n      this.segments = [];\n      _ref1 = this.values;\n\n      for (i = _j = 0, _len1 = _ref1.length; _j < _len1; i = ++_j) {\n        value = _ref1[i];\n        next = last + min + C * (value / total);\n        seg = new Morris.DonutSegment(cx, cy, w * 2, w, last, next, this.data[i].color || this.options.colors[idx % this.options.colors.length], this.options.backgroundColor, idx, this.raphael);\n        seg.render();\n        this.segments.push(seg);\n        seg.on('hover', this.select);\n        seg.on('click', this.click);\n        last = next;\n        idx += 1;\n      }\n\n      this.text1 = this.drawEmptyDonutLabel(cx, cy - 10, this.options.labelColor, 15, 800);\n      this.text2 = this.drawEmptyDonutLabel(cx, cy + 10, this.options.labelColor, 14);\n      max_value = Math.max.apply(Math, this.values);\n      idx = 0;\n      _ref2 = this.values;\n      _results = [];\n\n      for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {\n        value = _ref2[_k];\n\n        if (value === max_value) {\n          this.select(idx);\n          break;\n        }\n\n        _results.push(idx += 1);\n      }\n\n      return _results;\n    };\n\n    Donut.prototype.setData = function (data) {\n      var row;\n      this.data = data;\n\n      this.values = function () {\n        var _i, _len, _ref, _results;\n\n        _ref = this.data;\n        _results = [];\n\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          row = _ref[_i];\n\n          _results.push(parseFloat(row.value));\n        }\n\n        return _results;\n      }.call(this);\n\n      return this.redraw();\n    };\n\n    Donut.prototype.click = function (idx) {\n      return this.fire('click', idx, this.data[idx]);\n    };\n\n    Donut.prototype.select = function (idx) {\n      var row, s, segment, _i, _len, _ref;\n\n      _ref = this.segments;\n\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        s = _ref[_i];\n        s.deselect();\n      }\n\n      segment = this.segments[idx];\n      segment.select();\n      row = this.data[idx];\n      return this.setLabels(row.label, this.options.formatter(row.value, row));\n    };\n\n    Donut.prototype.setLabels = function (label1, label2) {\n      var inner, maxHeightBottom, maxHeightTop, maxWidth, text1bbox, text1scale, text2bbox, text2scale;\n      inner = (Math.min(this.el.width() / 2, this.el.height() / 2) - 10) * 2 / 3;\n      maxWidth = 1.8 * inner;\n      maxHeightTop = inner / 2;\n      maxHeightBottom = inner / 3;\n      this.text1.attr({\n        text: label1,\n        transform: ''\n      });\n      text1bbox = this.text1.getBBox();\n      text1scale = Math.min(maxWidth / text1bbox.width, maxHeightTop / text1bbox.height);\n      this.text1.attr({\n        transform: \"S\" + text1scale + \",\" + text1scale + \",\" + (text1bbox.x + text1bbox.width / 2) + \",\" + (text1bbox.y + text1bbox.height)\n      });\n      this.text2.attr({\n        text: label2,\n        transform: ''\n      });\n      text2bbox = this.text2.getBBox();\n      text2scale = Math.min(maxWidth / text2bbox.width, maxHeightBottom / text2bbox.height);\n      return this.text2.attr({\n        transform: \"S\" + text2scale + \",\" + text2scale + \",\" + (text2bbox.x + text2bbox.width / 2) + \",\" + text2bbox.y\n      });\n    };\n\n    Donut.prototype.drawEmptyDonutLabel = function (xPos, yPos, color, fontSize, fontWeight) {\n      var text;\n      text = this.raphael.text(xPos, yPos, '').attr('font-size', fontSize).attr('fill', color);\n\n      if (fontWeight != null) {\n        text.attr('font-weight', fontWeight);\n      }\n\n      return text;\n    };\n\n    Donut.prototype.resizeHandler = function () {\n      this.timeoutId = null;\n      this.raphael.setSize(this.el.width(), this.el.height());\n      return this.redraw();\n    };\n\n    return Donut;\n  }(Morris.EventEmitter);\n\n  Morris.DonutSegment = function (_super) {\n    __extends(DonutSegment, _super);\n\n    function DonutSegment(cx, cy, inner, outer, p0, p1, color, backgroundColor, index, raphael) {\n      this.cx = cx;\n      this.cy = cy;\n      this.inner = inner;\n      this.outer = outer;\n      this.color = color;\n      this.backgroundColor = backgroundColor;\n      this.index = index;\n      this.raphael = raphael;\n      this.deselect = __bind(this.deselect, this);\n      this.select = __bind(this.select, this);\n      this.sin_p0 = Math.sin(p0);\n      this.cos_p0 = Math.cos(p0);\n      this.sin_p1 = Math.sin(p1);\n      this.cos_p1 = Math.cos(p1);\n      this.is_long = p1 - p0 > Math.PI ? 1 : 0;\n      this.path = this.calcSegment(this.inner + 3, this.inner + this.outer - 5);\n      this.selectedPath = this.calcSegment(this.inner + 3, this.inner + this.outer);\n      this.hilight = this.calcArc(this.inner);\n    }\n\n    DonutSegment.prototype.calcArcPoints = function (r) {\n      return [this.cx + r * this.sin_p0, this.cy + r * this.cos_p0, this.cx + r * this.sin_p1, this.cy + r * this.cos_p1];\n    };\n\n    DonutSegment.prototype.calcSegment = function (r1, r2) {\n      var ix0, ix1, iy0, iy1, ox0, ox1, oy0, oy1, _ref, _ref1;\n\n      _ref = this.calcArcPoints(r1), ix0 = _ref[0], iy0 = _ref[1], ix1 = _ref[2], iy1 = _ref[3];\n      _ref1 = this.calcArcPoints(r2), ox0 = _ref1[0], oy0 = _ref1[1], ox1 = _ref1[2], oy1 = _ref1[3];\n      return \"M\" + ix0 + \",\" + iy0 + (\"A\" + r1 + \",\" + r1 + \",0,\" + this.is_long + \",0,\" + ix1 + \",\" + iy1) + (\"L\" + ox1 + \",\" + oy1) + (\"A\" + r2 + \",\" + r2 + \",0,\" + this.is_long + \",1,\" + ox0 + \",\" + oy0) + \"Z\";\n    };\n\n    DonutSegment.prototype.calcArc = function (r) {\n      var ix0, ix1, iy0, iy1, _ref;\n\n      _ref = this.calcArcPoints(r), ix0 = _ref[0], iy0 = _ref[1], ix1 = _ref[2], iy1 = _ref[3];\n      return \"M\" + ix0 + \",\" + iy0 + (\"A\" + r + \",\" + r + \",0,\" + this.is_long + \",0,\" + ix1 + \",\" + iy1);\n    };\n\n    DonutSegment.prototype.render = function () {\n      var _this = this;\n\n      this.arc = this.drawDonutArc(this.hilight, this.color);\n      return this.seg = this.drawDonutSegment(this.path, this.color, this.backgroundColor, function () {\n        return _this.fire('hover', _this.index);\n      }, function () {\n        return _this.fire('click', _this.index);\n      });\n    };\n\n    DonutSegment.prototype.drawDonutArc = function (path, color) {\n      return this.raphael.path(path).attr({\n        stroke: color,\n        'stroke-width': 2,\n        opacity: 0\n      });\n    };\n\n    DonutSegment.prototype.drawDonutSegment = function (path, fillColor, strokeColor, hoverFunction, clickFunction) {\n      return this.raphael.path(path).attr({\n        fill: fillColor,\n        stroke: strokeColor,\n        'stroke-width': 3\n      }).hover(hoverFunction).click(clickFunction);\n    };\n\n    DonutSegment.prototype.select = function () {\n      if (!this.selected) {\n        this.seg.animate({\n          path: this.selectedPath\n        }, 150, '<>');\n        this.arc.animate({\n          opacity: 1\n        }, 150, '<>');\n        return this.selected = true;\n      }\n    };\n\n    DonutSegment.prototype.deselect = function () {\n      if (this.selected) {\n        this.seg.animate({\n          path: this.path\n        }, 150, '<>');\n        this.arc.animate({\n          opacity: 0\n        }, 150, '<>');\n        return this.selected = false;\n      }\n    };\n\n    return DonutSegment;\n  }(Morris.EventEmitter);\n}).call(this);","map":{"version":3,"sources":["/Users/david/Winner-Stock/app/javascript/packs/custom/morris.js"],"names":["$","Morris","minutesSpecHelper","secondsSpecHelper","__slice","slice","__bind","fn","me","apply","arguments","__hasProp","hasOwnProperty","__extends","child","parent","key","call","ctor","constructor","prototype","__super__","__indexOf","indexOf","item","i","l","length","window","jQuery","EventEmitter","on","name","handler","handlers","push","fire","args","_i","_len","_ref","_results","commas","num","absnum","intnum","ret","strabsnum","Math","abs","floor","toFixed","replace","toString","pad2","number","Grid","_super","options","hasToShow","resizeHandler","_this","element","el","document","getElementById","Error","css","extend","gridDefaults","defaults","units","postUnits","raphael","Raphael","elementWidth","elementHeight","dirty","selectFrom","init","setData","data","bind","evt","left","offset","right","width","x","pageX","hitTest","min","_x","max","selectionRect","attr","pageY","top","hide","touch","originalEvent","touches","changedTouches","rangeSelect","rect","innerHeight","fill","rangeSelectColor","stroke","toBack","startRange","endRange","resize","timeoutId","clearTimeout","setTimeout","postInit","dateFormat","axes","grid","gridLineColor","gridStrokeWidth","gridTextColor","gridTextSize","gridTextFamily","gridTextWeight","hideHover","yLabelFormat","xLabelAngle","numLines","padding","parseTime","preUnits","ymax","ymin","goals","goalStrokeWidth","goalLineColors","events","eventStrokeWidth","eventLineColors","redraw","e","flatEvents","from","idx","index","maxGoal","minGoal","row","step","to","total","y","ykey","yval","_ref1","clear","hover","cumulative","src","label","xkey","parseDate","Date","xLabelFormat","_j","_len1","_results1","ykeys","parseFloat","sort","a","b","xmin","xmax","Array","map","yboundary","autoGridLines","_ref2","_ref3","boundaryType","currentValue","boundaryOption","suggestedValue","parseInt","nlines","gmax","gmin","smag","span","unit","ymag","log","pow","ceil","_calc","angle","bottomOffsets","gridLine","h","w","yLabelWidths","height","bottom","measureText","yAxisFormat","horizontal","dx","dy","yStart","yEnd","xStart","xEnd","xSize","ySize","calc","transY","transX","drawGrid","drawGoals","drawEvents","draw","text","tt","rotate","getBBox","remove","getYAxisLabelX","basePos","lineY","pos","getXAxisLabelY","drawYAxisLabel","drawXAxisLabel","drawGridLine","color","goal","drawGoal","event","drawEvent","path","xPos","yPos","show","end","start","setSize","shown","date","isecs","m","msecs","n","o","offsetmins","p","q","r","secs","match","getTime","getDay","setMonth","UTC","round","Hover","append","update","html","centre_y","moveTo","content","hoverHeight","hoverWidth","parentHeight","parentWidth","innerWidth","outerWidth","outerHeight","Line","hilight","onHoverOut","onHoverMove","onGridClick","lineWidth","pointSize","lineColors","pointStrokeWidths","pointStrokeColors","pointFillColors","smooth","xLabels","xLabelMargin","trendLine","trendLineWidth","trendLineColors","calcPoints","generatePaths","_y","_ymax","concat","displayHoverForRow","hoverContentForRow","j","prop","labels","colorFor","hoverCallback","coords","paths","createPath","drawXAxis","drawSeries","drawLabel","prevAngleMargin","prevLabelMargin","ypos","labelText","xpos","labelBox","margin","textBox","transform","cos","PI","sin","labelSeries","reverse","seriesPoints","_drawTrendLine","_drawLineFor","_drawPointFor","circle","drawLinePoint","drawLinePath","datapoints","sum_x","sum_xx","sum_xy","sum_y","val","coord","g","grads","ix","lg","prevCoord","x1","x2","y1","y2","gradients","grad","nextCoord","prevHilight","animate","pointShrinkSeries","pointGrowSeries","sidx","type","lineColor","lineIndex","lineWidthForSeries","pointColor","pointSizeForSeries","pointStrokeWidthForSeries","pointStrokeColorForSeries","animation","dmin","dmax","pxwidth","specName","d","d0","ddensity","s","spec","t","LABEL_SPECS","AUTO_LABEL_ORDER","fmt","incr","interval","getFullYear","getMonth","getDate","getHours","getMinutes","setUTCMinutes","getUTCMinutes","getSeconds","setUTCSeconds","getUTCSeconds","setFullYear","setDate","Area","areaDefaults","fillOpacity","behaveLikeLine","areaOptions","range","_k","_results2","_drawFillFor","drawFilledPath","fillForSeries","rgb2hsl","hsl","Bar","stacked","barSizeRatio","barGap","barColors","barOpacity","barRadius","calcBars","maxSize","size","startPos","xAxisLabelTopPadding","barWidth","groupWidth","lastTop","leftPadding","numBars","spaceLeft","zeroPos","barSize","bars","verticalGridCondition","drawBar","verticalGridColor","verticalGridOpacity","barColor","opacity","radiusArray","maxRadius","roundedRect","Donut","colors","backgroundColor","labelColor","formatter","select","click","C","cx","cy","last","max_value","next","seg","value","_len2","values","segments","DonutSegment","render","text1","drawEmptyDonutLabel","text2","segment","deselect","setLabels","label1","label2","inner","maxHeightBottom","maxHeightTop","maxWidth","text1bbox","text1scale","text2bbox","text2scale","fontSize","fontWeight","outer","p0","p1","sin_p0","cos_p0","sin_p1","cos_p1","is_long","calcSegment","selectedPath","calcArc","calcArcPoints","r1","r2","ix0","ix1","iy0","iy1","ox0","ox1","oy0","oy1","arc","drawDonutArc","drawDonutSegment","fillColor","strokeColor","hoverFunction","clickFunction","selected"],"mappings":"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","sourcesContent":["/* @license\nmorris.js v0.5.1\nCopyright 2014 Olly Smith All rights reserved.\nLicensed under the BSD-2-Clause License.\n*/\n\n\n(function() {\n  var $, Morris, minutesSpecHelper, secondsSpecHelper,\n    __slice = [].slice,\n    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  Morris = window.Morris = {};\n\n  $ = jQuery;\n\n  Morris.EventEmitter = (function() {\n    function EventEmitter() {}\n\n    EventEmitter.prototype.on = function(name, handler) {\n      if (this.handlers == null) {\n        this.handlers = {};\n      }\n      if (this.handlers[name] == null) {\n        this.handlers[name] = [];\n      }\n      this.handlers[name].push(handler);\n      return this;\n    };\n\n    EventEmitter.prototype.fire = function() {\n      var args, handler, name, _i, _len, _ref, _results;\n      name = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      if ((this.handlers != null) && (this.handlers[name] != null)) {\n        _ref = this.handlers[name];\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          handler = _ref[_i];\n          _results.push(handler.apply(null, args));\n        }\n        return _results;\n      }\n    };\n\n    return EventEmitter;\n\n  })();\n\n  Morris.commas = function(num) {\n    var absnum, intnum, ret, strabsnum;\n    if (num != null) {\n      ret = num < 0 ? \"-\" : \"\";\n      absnum = Math.abs(num);\n      intnum = Math.floor(absnum).toFixed(0);\n      ret += intnum.replace(/(?=(?:\\d{3})+$)(?!^)/g, ',');\n      strabsnum = absnum.toString();\n      if (strabsnum.length > intnum.length) {\n        ret += strabsnum.slice(intnum.length);\n      }\n      return ret;\n    } else {\n      return '-';\n    }\n  };\n\n  Morris.pad2 = function(number) {\n    return (number < 10 ? '0' : '') + number;\n  };\n\n  Morris.Grid = (function(_super) {\n    __extends(Grid, _super);\n\n    function Grid(options) {\n      this.hasToShow = __bind(this.hasToShow, this);\n      this.resizeHandler = __bind(this.resizeHandler, this);\n      var _this = this;\n      if (typeof options.element === 'string') {\n        this.el = $(document.getElementById(options.element));\n      } else {\n        this.el = $(options.element);\n      }\n      if ((this.el == null) || this.el.length === 0) {\n        throw new Error(\"Graph container element not found\");\n      }\n      if (this.el.css('position') === 'static') {\n        this.el.css('position', 'relative');\n      }\n      this.options = $.extend({}, this.gridDefaults, this.defaults || {}, options);\n      if (typeof this.options.units === 'string') {\n        this.options.postUnits = options.units;\n      }\n      this.raphael = new Raphael(this.el[0]);\n      this.elementWidth = null;\n      this.elementHeight = null;\n      this.dirty = false;\n      this.selectFrom = null;\n      if (this.init) {\n        this.init();\n      }\n      this.setData(this.options.data);\n      this.el.bind('mousemove', function(evt) {\n        var left, offset, right, width, x;\n        offset = _this.el.offset();\n        x = evt.pageX - offset.left;\n        if (_this.selectFrom) {\n          left = _this.data[_this.hitTest(Math.min(x, _this.selectFrom))]._x;\n          right = _this.data[_this.hitTest(Math.max(x, _this.selectFrom))]._x;\n          width = right - left;\n          return _this.selectionRect.attr({\n            x: left,\n            width: width\n          });\n        } else {\n          return _this.fire('hovermove', x, evt.pageY - offset.top);\n        }\n      });\n      this.el.bind('mouseleave', function(evt) {\n        if (_this.selectFrom) {\n          _this.selectionRect.hide();\n          _this.selectFrom = null;\n        }\n        return _this.fire('hoverout');\n      });\n      this.el.bind('touchstart touchmove touchend', function(evt) {\n        var offset, touch;\n        touch = evt.originalEvent.touches[0] || evt.originalEvent.changedTouches[0];\n        offset = _this.el.offset();\n        return _this.fire('hovermove', touch.pageX - offset.left, touch.pageY - offset.top);\n      });\n      this.el.bind('click', function(evt) {\n        var offset;\n        offset = _this.el.offset();\n        return _this.fire('gridclick', evt.pageX - offset.left, evt.pageY - offset.top);\n      });\n      if (this.options.rangeSelect) {\n        this.selectionRect = this.raphael.rect(0, 0, 0, this.el.innerHeight()).attr({\n          fill: this.options.rangeSelectColor,\n          stroke: false\n        }).toBack().hide();\n        this.el.bind('mousedown', function(evt) {\n          var offset;\n          offset = _this.el.offset();\n          return _this.startRange(evt.pageX - offset.left);\n        });\n        this.el.bind('mouseup', function(evt) {\n          var offset;\n          offset = _this.el.offset();\n          _this.endRange(evt.pageX - offset.left);\n          return _this.fire('hovermove', evt.pageX - offset.left, evt.pageY - offset.top);\n        });\n      }\n      if (this.options.resize) {\n        $(window).bind('resize', function(evt) {\n          if (_this.timeoutId != null) {\n            window.clearTimeout(_this.timeoutId);\n          }\n          return _this.timeoutId = window.setTimeout(_this.resizeHandler, 100);\n        });\n      }\n      this.el.css('-webkit-tap-highlight-color', 'rgba(0,0,0,0)');\n      if (this.postInit) {\n        this.postInit();\n      }\n    }\n\n    Grid.prototype.gridDefaults = {\n      dateFormat: null,\n      axes: true,\n      grid: true,\n      gridLineColor: '#aaa',\n      gridStrokeWidth: 0.5,\n      gridTextColor: '#888',\n      gridTextSize: 12,\n      gridTextFamily: 'sans-serif',\n      gridTextWeight: 'normal',\n      hideHover: false,\n      yLabelFormat: null,\n      xLabelAngle: 0,\n      numLines: 5,\n      padding: 25,\n      parseTime: true,\n      postUnits: '',\n      preUnits: '',\n      ymax: 'auto',\n      ymin: 'auto 0',\n      goals: [],\n      goalStrokeWidth: 1.0,\n      goalLineColors: ['#666633', '#999966', '#cc6666', '#663333'],\n      events: [],\n      eventStrokeWidth: 1.0,\n      eventLineColors: ['#005a04', '#ccffbb', '#3a5f0b', '#005502'],\n      rangeSelect: null,\n      rangeSelectColor: '#eef',\n      resize: false\n    };\n\n    Grid.prototype.setData = function(data, redraw) {\n      var e, flatEvents, from, idx, index, maxGoal, minGoal, ret, row, step, to, total, y, ykey, ymax, ymin, yval, _i, _len, _ref, _ref1;\n      if (redraw == null) {\n        redraw = true;\n      }\n      this.options.data = data;\n      if ((data == null) || data.length === 0) {\n        this.data = [];\n        this.raphael.clear();\n        if (this.hover != null) {\n          this.hover.hide();\n        }\n        return;\n      }\n      ymax = this.cumulative ? 0 : null;\n      ymin = this.cumulative ? 0 : null;\n      if (this.options.goals.length > 0) {\n        minGoal = Math.min.apply(Math, this.options.goals);\n        maxGoal = Math.max.apply(Math, this.options.goals);\n        ymin = ymin != null ? Math.min(ymin, minGoal) : minGoal;\n        ymax = ymax != null ? Math.max(ymax, maxGoal) : maxGoal;\n      }\n      this.data = (function() {\n        var _i, _len, _results;\n        _results = [];\n        for (index = _i = 0, _len = data.length; _i < _len; index = ++_i) {\n          row = data[index];\n          ret = {\n            src: row\n          };\n          ret.label = row[this.options.xkey];\n          if (this.options.parseTime) {\n            ret.x = Morris.parseDate(ret.label);\n            if (this.options.dateFormat) {\n              ret.label = this.options.dateFormat(ret.x);\n            } else if (typeof ret.label === 'number') {\n              ret.label = new Date(ret.label).toString();\n            }\n          } else {\n            ret.x = index;\n            if (this.options.xLabelFormat) {\n              ret.label = this.options.xLabelFormat(ret);\n            }\n          }\n          total = 0;\n          ret.y = (function() {\n            var _j, _len1, _ref, _results1;\n            _ref = this.options.ykeys;\n            _results1 = [];\n            for (idx = _j = 0, _len1 = _ref.length; _j < _len1; idx = ++_j) {\n              ykey = _ref[idx];\n              yval = row[ykey];\n              if (typeof yval === 'string') {\n                yval = parseFloat(yval);\n              }\n              if ((yval != null) && typeof yval !== 'number') {\n                yval = null;\n              }\n              if ((yval != null) && this.hasToShow(idx)) {\n                if (this.cumulative) {\n                  total += yval;\n                } else {\n                  if (ymax != null) {\n                    ymax = Math.max(yval, ymax);\n                    ymin = Math.min(yval, ymin);\n                  } else {\n                    ymax = ymin = yval;\n                  }\n                }\n              }\n              if (this.cumulative && (total != null)) {\n                ymax = Math.max(total, ymax);\n                ymin = Math.min(total, ymin);\n              }\n              _results1.push(yval);\n            }\n            return _results1;\n          }).call(this);\n          _results.push(ret);\n        }\n        return _results;\n      }).call(this);\n      if (this.options.parseTime) {\n        this.data = this.data.sort(function(a, b) {\n          return (a.x > b.x) - (b.x > a.x);\n        });\n      }\n      this.xmin = this.data[0].x;\n      this.xmax = this.data[this.data.length - 1].x;\n      this.events = [];\n      if (this.options.events.length > 0) {\n        if (this.options.parseTime) {\n          _ref = this.options.events;\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            e = _ref[_i];\n            if (e instanceof Array) {\n              from = e[0], to = e[1];\n              this.events.push([Morris.parseDate(from), Morris.parseDate(to)]);\n            } else {\n              this.events.push(Morris.parseDate(e));\n            }\n          }\n        } else {\n          this.events = this.options.events;\n        }\n        flatEvents = $.map(this.events, function(e) {\n          return e;\n        });\n        this.xmax = Math.max(this.xmax, Math.max.apply(Math, flatEvents));\n        this.xmin = Math.min(this.xmin, Math.min.apply(Math, flatEvents));\n      }\n      if (this.xmin === this.xmax) {\n        this.xmin -= 1;\n        this.xmax += 1;\n      }\n      this.ymin = this.yboundary('min', ymin);\n      this.ymax = this.yboundary('max', ymax);\n      if (this.ymin === this.ymax) {\n        if (ymin) {\n          this.ymin -= 1;\n        }\n        this.ymax += 1;\n      }\n      if (((_ref1 = this.options.axes) === true || _ref1 === 'both' || _ref1 === 'y') || this.options.grid === true) {\n        if (this.options.ymax === this.gridDefaults.ymax && this.options.ymin === this.gridDefaults.ymin) {\n          this.grid = this.autoGridLines(this.ymin, this.ymax, this.options.numLines);\n          this.ymin = Math.min(this.ymin, this.grid[0]);\n          this.ymax = Math.max(this.ymax, this.grid[this.grid.length - 1]);\n        } else {\n          step = (this.ymax - this.ymin) / (this.options.numLines - 1);\n          this.grid = (function() {\n            var _j, _ref2, _ref3, _results;\n            _results = [];\n            for (y = _j = _ref2 = this.ymin, _ref3 = this.ymax; step > 0 ? _j <= _ref3 : _j >= _ref3; y = _j += step) {\n              _results.push(y);\n            }\n            return _results;\n          }).call(this);\n        }\n      }\n      this.dirty = true;\n      if (redraw) {\n        return this.redraw();\n      }\n    };\n\n    Grid.prototype.yboundary = function(boundaryType, currentValue) {\n      var boundaryOption, suggestedValue;\n      boundaryOption = this.options[\"y\" + boundaryType];\n      if (typeof boundaryOption === 'string') {\n        if (boundaryOption.slice(0, 4) === 'auto') {\n          if (boundaryOption.length > 5) {\n            suggestedValue = parseInt(boundaryOption.slice(5), 10);\n            if (currentValue == null) {\n              return suggestedValue;\n            }\n            return Math[boundaryType](currentValue, suggestedValue);\n          } else {\n            if (currentValue != null) {\n              return currentValue;\n            } else {\n              return 0;\n            }\n          }\n        } else {\n          return parseInt(boundaryOption, 10);\n        }\n      } else {\n        return boundaryOption;\n      }\n    };\n\n    Grid.prototype.autoGridLines = function(ymin, ymax, nlines) {\n      var gmax, gmin, grid, smag, span, step, unit, y, ymag;\n      span = ymax - ymin;\n      ymag = Math.floor(Math.log(span) / Math.log(10));\n      unit = Math.pow(10, ymag);\n      gmin = Math.floor(ymin / unit) * unit;\n      gmax = Math.ceil(ymax / unit) * unit;\n      step = (gmax - gmin) / (nlines - 1);\n      if (unit === 1 && step > 1 && Math.ceil(step) !== step) {\n        step = Math.ceil(step);\n        gmax = gmin + step * (nlines - 1);\n      }\n      if (gmin < 0 && gmax > 0) {\n        gmin = Math.floor(ymin / step) * step;\n        gmax = Math.ceil(ymax / step) * step;\n      }\n      if (step < 1) {\n        smag = Math.floor(Math.log(step) / Math.log(10));\n        grid = (function() {\n          var _i, _results;\n          _results = [];\n          for (y = _i = gmin; step > 0 ? _i <= gmax : _i >= gmax; y = _i += step) {\n            _results.push(parseFloat(y.toFixed(1 - smag)));\n          }\n          return _results;\n        })();\n      } else {\n        grid = (function() {\n          var _i, _results;\n          _results = [];\n          for (y = _i = gmin; step > 0 ? _i <= gmax : _i >= gmax; y = _i += step) {\n            _results.push(y);\n          }\n          return _results;\n        })();\n      }\n      return grid;\n    };\n\n    Grid.prototype._calc = function() {\n      var angle, bottomOffsets, gridLine, h, i, w, yLabelWidths, _ref, _ref1;\n      w = this.el.width();\n      h = this.el.height();\n      if (this.elementWidth !== w || this.elementHeight !== h || this.dirty) {\n        this.elementWidth = w;\n        this.elementHeight = h;\n        this.dirty = false;\n        this.left = this.options.padding;\n        this.right = this.elementWidth - this.options.padding;\n        this.top = this.options.padding;\n        this.bottom = this.elementHeight - this.options.padding;\n        if ((_ref = this.options.axes) === true || _ref === 'both' || _ref === 'y') {\n          yLabelWidths = (function() {\n            var _i, _len, _ref1, _results;\n            _ref1 = this.grid;\n            _results = [];\n            for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n              gridLine = _ref1[_i];\n              _results.push(this.measureText(this.yAxisFormat(gridLine)).width);\n            }\n            return _results;\n          }).call(this);\n          if (!this.options.horizontal) {\n            this.left += Math.max.apply(Math, yLabelWidths);\n          } else {\n            this.bottom -= Math.max.apply(Math, yLabelWidths);\n          }\n        }\n        if ((_ref1 = this.options.axes) === true || _ref1 === 'both' || _ref1 === 'x') {\n          if (!this.options.horizontal) {\n            angle = -this.options.xLabelAngle;\n          } else {\n            angle = -90;\n          }\n          bottomOffsets = (function() {\n            var _i, _ref2, _results;\n            _results = [];\n            for (i = _i = 0, _ref2 = this.data.length; 0 <= _ref2 ? _i < _ref2 : _i > _ref2; i = 0 <= _ref2 ? ++_i : --_i) {\n              _results.push(this.measureText(this.data[i].label, angle).height);\n            }\n            return _results;\n          }).call(this);\n          if (!this.options.horizontal) {\n            this.bottom -= Math.max.apply(Math, bottomOffsets);\n          } else {\n            this.left += Math.max.apply(Math, bottomOffsets);\n          }\n        }\n        this.width = Math.max(1, this.right - this.left);\n        this.height = Math.max(1, this.bottom - this.top);\n        if (!this.options.horizontal) {\n          this.dx = this.width / (this.xmax - this.xmin);\n          this.dy = this.height / (this.ymax - this.ymin);\n          this.yStart = this.bottom;\n          this.yEnd = this.top;\n          this.xStart = this.left;\n          this.xEnd = this.right;\n          this.xSize = this.width;\n          this.ySize = this.height;\n        } else {\n          this.dx = this.height / (this.xmax - this.xmin);\n          this.dy = this.width / (this.ymax - this.ymin);\n          this.yStart = this.left;\n          this.yEnd = this.right;\n          this.xStart = this.top;\n          this.xEnd = this.bottom;\n          this.xSize = this.height;\n          this.ySize = this.width;\n        }\n        if (this.calc) {\n          return this.calc();\n        }\n      }\n    };\n\n    Grid.prototype.transY = function(y) {\n      if (!this.options.horizontal) {\n        return this.bottom - (y - this.ymin) * this.dy;\n      } else {\n        return this.left + (y - this.ymin) * this.dy;\n      }\n    };\n\n    Grid.prototype.transX = function(x) {\n      if (this.data.length === 1) {\n        return (this.xStart + this.xEnd) / 2;\n      } else {\n        return this.xStart + (x - this.xmin) * this.dx;\n      }\n    };\n\n    Grid.prototype.redraw = function() {\n      this.raphael.clear();\n      this._calc();\n      this.drawGrid();\n      this.drawGoals();\n      this.drawEvents();\n      if (this.draw) {\n        return this.draw();\n      }\n    };\n\n    Grid.prototype.measureText = function(text, angle) {\n      var ret, tt;\n      if (angle == null) {\n        angle = 0;\n      }\n      tt = this.raphael.text(100, 100, text).attr('font-size', this.options.gridTextSize).attr('font-family', this.options.gridTextFamily).attr('font-weight', this.options.gridTextWeight).rotate(angle);\n      ret = tt.getBBox();\n      tt.remove();\n      return ret;\n    };\n\n    Grid.prototype.yAxisFormat = function(label) {\n      return this.yLabelFormat(label, 0);\n    };\n\n    Grid.prototype.yLabelFormat = function(label, i) {\n      if (typeof this.options.yLabelFormat === 'function') {\n        return this.options.yLabelFormat(label, i);\n      } else {\n        return \"\" + this.options.preUnits + (Morris.commas(label)) + this.options.postUnits;\n      }\n    };\n\n    Grid.prototype.getYAxisLabelX = function() {\n      return this.left - this.options.padding / 2;\n    };\n\n    Grid.prototype.drawGrid = function() {\n      var basePos, lineY, pos, _i, _len, _ref, _ref1, _ref2, _results;\n      if (this.options.grid === false && ((_ref = this.options.axes) !== true && _ref !== 'both' && _ref !== 'y')) {\n        return;\n      }\n      if (!this.options.horizontal) {\n        basePos = this.getYAxisLabelX();\n      } else {\n        basePos = this.getXAxisLabelY();\n      }\n      _ref1 = this.grid;\n      _results = [];\n      for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n        lineY = _ref1[_i];\n        pos = this.transY(lineY);\n        if ((_ref2 = this.options.axes) === true || _ref2 === 'both' || _ref2 === 'y') {\n          if (!this.options.horizontal) {\n            this.drawYAxisLabel(basePos, pos, this.yAxisFormat(lineY));\n          } else {\n            this.drawXAxisLabel(pos, basePos, this.yAxisFormat(lineY));\n          }\n        }\n        if (this.options.grid) {\n          pos = Math.floor(pos) + 0.5;\n          if (!this.options.horizontal) {\n            _results.push(this.drawGridLine(\"M\" + this.xStart + \",\" + pos + \"H\" + this.xEnd));\n          } else {\n            _results.push(this.drawGridLine(\"M\" + pos + \",\" + this.xStart + \"V\" + this.xEnd));\n          }\n        } else {\n          _results.push(void 0);\n        }\n      }\n      return _results;\n    };\n\n    Grid.prototype.drawGoals = function() {\n      var color, goal, i, _i, _len, _ref, _results;\n      _ref = this.options.goals;\n      _results = [];\n      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {\n        goal = _ref[i];\n        color = this.options.goalLineColors[i % this.options.goalLineColors.length];\n        _results.push(this.drawGoal(goal, color));\n      }\n      return _results;\n    };\n\n    Grid.prototype.drawEvents = function() {\n      var color, event, i, _i, _len, _ref, _results;\n      _ref = this.events;\n      _results = [];\n      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {\n        event = _ref[i];\n        color = this.options.eventLineColors[i % this.options.eventLineColors.length];\n        _results.push(this.drawEvent(event, color));\n      }\n      return _results;\n    };\n\n    Grid.prototype.drawGoal = function(goal, color) {\n      var path, y;\n      y = Math.floor(this.transY(goal)) + 0.5;\n      if (!this.options.horizontal) {\n        path = \"M\" + this.xStart + \",\" + y + \"H\" + this.xEnd;\n      } else {\n        path = \"M\" + y + \",\" + this.xStart + \"V\" + this.xEnd;\n      }\n      return this.raphael.path(path).attr('stroke', color).attr('stroke-width', this.options.goalStrokeWidth);\n    };\n\n    Grid.prototype.drawEvent = function(event, color) {\n      var from, path, to, x;\n      if (event instanceof Array) {\n        from = event[0], to = event[1];\n        from = Math.floor(this.transX(from)) + 0.5;\n        to = Math.floor(this.transX(to)) + 0.5;\n        if (!this.options.horizontal) {\n          return this.raphael.rect(from, this.yEnd, to - from, this.yStart - this.yEnd).attr({\n            fill: color,\n            stroke: false\n          }).toBack();\n        } else {\n          return this.raphael.rect(this.yStart, from, this.yEnd - this.yStart, to - from).attr({\n            fill: color,\n            stroke: false\n          }).toBack();\n        }\n      } else {\n        x = Math.floor(this.transX(event)) + 0.5;\n        if (!this.options.horizontal) {\n          path = \"M\" + x + \",\" + this.yStart + \"V\" + this.yEnd;\n        } else {\n          path = \"M\" + this.yStart + \",\" + x + \"H\" + this.yEnd;\n        }\n        return this.raphael.path(path).attr('stroke', color).attr('stroke-width', this.options.eventStrokeWidth);\n      }\n    };\n\n    Grid.prototype.drawYAxisLabel = function(xPos, yPos, text) {\n      return this.raphael.text(xPos, yPos, text).attr('font-size', this.options.gridTextSize).attr('font-family', this.options.gridTextFamily).attr('font-weight', this.options.gridTextWeight).attr('fill', this.options.gridTextColor).attr('text-anchor', 'end');\n    };\n\n    Grid.prototype.drawGridLine = function(path) {\n      return this.raphael.path(path).attr('stroke', this.options.gridLineColor).attr('stroke-width', this.options.gridStrokeWidth);\n    };\n\n    Grid.prototype.startRange = function(x) {\n      this.hover.hide();\n      this.selectFrom = x;\n      return this.selectionRect.attr({\n        x: x,\n        width: 0\n      }).show();\n    };\n\n    Grid.prototype.endRange = function(x) {\n      var end, start;\n      if (this.selectFrom) {\n        start = Math.min(this.selectFrom, x);\n        end = Math.max(this.selectFrom, x);\n        this.options.rangeSelect.call(this.el, {\n          start: this.data[this.hitTest(start)].x,\n          end: this.data[this.hitTest(end)].x\n        });\n        return this.selectFrom = null;\n      }\n    };\n\n    Grid.prototype.resizeHandler = function() {\n      this.timeoutId = null;\n      this.raphael.setSize(this.el.width(), this.el.height());\n      return this.redraw();\n    };\n\n    Grid.prototype.hasToShow = function(i) {\n      return this.options.shown === true || this.options.shown[i] === true;\n    };\n\n    return Grid;\n\n  })(Morris.EventEmitter);\n\n  Morris.parseDate = function(date) {\n    var isecs, m, msecs, n, o, offsetmins, p, q, r, ret, secs;\n    if (typeof date === 'number') {\n      return date;\n    }\n    m = date.match(/^(\\d+) Q(\\d)$/);\n    n = date.match(/^(\\d+)-(\\d+)$/);\n    o = date.match(/^(\\d+)-(\\d+)-(\\d+)$/);\n    p = date.match(/^(\\d+) W(\\d+)$/);\n    q = date.match(/^(\\d+)-(\\d+)-(\\d+)[ T](\\d+):(\\d+)(Z|([+-])(\\d\\d):?(\\d\\d))?$/);\n    r = date.match(/^(\\d+)-(\\d+)-(\\d+)[ T](\\d+):(\\d+):(\\d+(\\.\\d+)?)(Z|([+-])(\\d\\d):?(\\d\\d))?$/);\n    if (m) {\n      return new Date(parseInt(m[1], 10), parseInt(m[2], 10) * 3 - 1, 1).getTime();\n    } else if (n) {\n      return new Date(parseInt(n[1], 10), parseInt(n[2], 10) - 1, 1).getTime();\n    } else if (o) {\n      return new Date(parseInt(o[1], 10), parseInt(o[2], 10) - 1, parseInt(o[3], 10)).getTime();\n    } else if (p) {\n      ret = new Date(parseInt(p[1], 10), 0, 1);\n      if (ret.getDay() !== 4) {\n        ret.setMonth(0, 1 + ((4 - ret.getDay()) + 7) % 7);\n      }\n      return ret.getTime() + parseInt(p[2], 10) * 604800000;\n    } else if (q) {\n      if (!q[6]) {\n        return new Date(parseInt(q[1], 10), parseInt(q[2], 10) - 1, parseInt(q[3], 10), parseInt(q[4], 10), parseInt(q[5], 10)).getTime();\n      } else {\n        offsetmins = 0;\n        if (q[6] !== 'Z') {\n          offsetmins = parseInt(q[8], 10) * 60 + parseInt(q[9], 10);\n          if (q[7] === '+') {\n            offsetmins = 0 - offsetmins;\n          }\n        }\n        return Date.UTC(parseInt(q[1], 10), parseInt(q[2], 10) - 1, parseInt(q[3], 10), parseInt(q[4], 10), parseInt(q[5], 10) + offsetmins);\n      }\n    } else if (r) {\n      secs = parseFloat(r[6]);\n      isecs = Math.floor(secs);\n      msecs = Math.round((secs - isecs) * 1000);\n      if (!r[8]) {\n        return new Date(parseInt(r[1], 10), parseInt(r[2], 10) - 1, parseInt(r[3], 10), parseInt(r[4], 10), parseInt(r[5], 10), isecs, msecs).getTime();\n      } else {\n        offsetmins = 0;\n        if (r[8] !== 'Z') {\n          offsetmins = parseInt(r[10], 10) * 60 + parseInt(r[11], 10);\n          if (r[9] === '+') {\n            offsetmins = 0 - offsetmins;\n          }\n        }\n        return Date.UTC(parseInt(r[1], 10), parseInt(r[2], 10) - 1, parseInt(r[3], 10), parseInt(r[4], 10), parseInt(r[5], 10) + offsetmins, isecs, msecs);\n      }\n    } else {\n      return new Date(parseInt(date, 10), 0, 1).getTime();\n    }\n  };\n\n  Morris.Hover = (function() {\n    Hover.defaults = {\n      \"class\": 'morris-hover morris-default-style'\n    };\n\n    function Hover(options) {\n      if (options == null) {\n        options = {};\n      }\n      this.options = $.extend({}, Morris.Hover.defaults, options);\n      this.el = $(\"<div class='\" + this.options[\"class\"] + \"'></div>\");\n      this.el.hide();\n      this.options.parent.append(this.el);\n    }\n\n    Hover.prototype.update = function(html, x, y, centre_y) {\n      if (!html) {\n        return this.hide();\n      } else {\n        this.html(html);\n        this.show();\n        return this.moveTo(x, y, centre_y);\n      }\n    };\n\n    Hover.prototype.html = function(content) {\n      return this.el.html(content);\n    };\n\n    Hover.prototype.moveTo = function(x, y, centre_y) {\n      var hoverHeight, hoverWidth, left, parentHeight, parentWidth, top;\n      parentWidth = this.options.parent.innerWidth();\n      parentHeight = this.options.parent.innerHeight();\n      hoverWidth = this.el.outerWidth();\n      hoverHeight = this.el.outerHeight();\n      left = Math.min(Math.max(0, x - hoverWidth / 2), parentWidth - hoverWidth);\n      if (y != null) {\n        if (centre_y === true) {\n          top = y - hoverHeight / 2;\n          if (top < 0) {\n            top = 0;\n          }\n        } else {\n          top = y - hoverHeight - 10;\n          if (top < 0) {\n            top = y + 10;\n            if (top + hoverHeight > parentHeight) {\n              top = parentHeight / 2 - hoverHeight / 2;\n            }\n          }\n        }\n      } else {\n        top = parentHeight / 2 - hoverHeight / 2;\n      }\n      return this.el.css({\n        left: left + \"px\",\n        top: parseInt(top) + \"px\"\n      });\n    };\n\n    Hover.prototype.show = function() {\n      return this.el.show();\n    };\n\n    Hover.prototype.hide = function() {\n      return this.el.hide();\n    };\n\n    return Hover;\n\n  })();\n\n  Morris.Line = (function(_super) {\n    __extends(Line, _super);\n\n    function Line(options) {\n      this.hilight = __bind(this.hilight, this);\n      this.onHoverOut = __bind(this.onHoverOut, this);\n      this.onHoverMove = __bind(this.onHoverMove, this);\n      this.onGridClick = __bind(this.onGridClick, this);\n      if (!(this instanceof Morris.Line)) {\n        return new Morris.Line(options);\n      }\n      Line.__super__.constructor.call(this, options);\n    }\n\n    Line.prototype.init = function() {\n      if (this.options.hideHover !== 'always') {\n        this.hover = new Morris.Hover({\n          parent: this.el\n        });\n        this.on('hovermove', this.onHoverMove);\n        this.on('hoverout', this.onHoverOut);\n        return this.on('gridclick', this.onGridClick);\n      }\n    };\n\n    Line.prototype.defaults = {\n      lineWidth: 3,\n      pointSize: 4,\n      lineColors: ['#0b62a4', '#7A92A3', '#4da74d', '#afd8f8', '#edc240', '#cb4b4b', '#9440ed'],\n      pointStrokeWidths: [1],\n      pointStrokeColors: ['#ffffff'],\n      pointFillColors: [],\n      smooth: true,\n      shown: true,\n      xLabels: 'auto',\n      xLabelFormat: null,\n      xLabelMargin: 24,\n      hideHover: false,\n      trendLine: false,\n      trendLineWidth: 2,\n      trendLineColors: ['#689bc3', '#a2b3bf', '#64b764']\n    };\n\n    Line.prototype.calc = function() {\n      this.calcPoints();\n      return this.generatePaths();\n    };\n\n    Line.prototype.calcPoints = function() {\n      var row, y, _i, _len, _ref, _results;\n      _ref = this.data;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        row = _ref[_i];\n        row._x = this.transX(row.x);\n        row._y = (function() {\n          var _j, _len1, _ref1, _results1;\n          _ref1 = row.y;\n          _results1 = [];\n          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n            y = _ref1[_j];\n            if (y != null) {\n              _results1.push(this.transY(y));\n            } else {\n              _results1.push(y);\n            }\n          }\n          return _results1;\n        }).call(this);\n        _results.push(row._ymax = Math.min.apply(Math, [this.bottom].concat((function() {\n          var _j, _len1, _ref1, _results1;\n          _ref1 = row._y;\n          _results1 = [];\n          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n            y = _ref1[_j];\n            if (y != null) {\n              _results1.push(y);\n            }\n          }\n          return _results1;\n        })())));\n      }\n      return _results;\n    };\n\n    Line.prototype.hitTest = function(x) {\n      var index, r, _i, _len, _ref;\n      if (this.data.length === 0) {\n        return null;\n      }\n      _ref = this.data.slice(1);\n      for (index = _i = 0, _len = _ref.length; _i < _len; index = ++_i) {\n        r = _ref[index];\n        if (x < (r._x + this.data[index]._x) / 2) {\n          break;\n        }\n      }\n      return index;\n    };\n\n    Line.prototype.onGridClick = function(x, y) {\n      var index;\n      index = this.hitTest(x);\n      return this.fire('click', index, this.data[index].src, x, y);\n    };\n\n    Line.prototype.onHoverMove = function(x, y) {\n      var index;\n      index = this.hitTest(x);\n      return this.displayHoverForRow(index);\n    };\n\n    Line.prototype.onHoverOut = function() {\n      if (this.options.hideHover !== false) {\n        return this.displayHoverForRow(null);\n      }\n    };\n\n    Line.prototype.displayHoverForRow = function(index) {\n      var _ref;\n      if (index != null) {\n        (_ref = this.hover).update.apply(_ref, this.hoverContentForRow(index));\n        return this.hilight(index);\n      } else {\n        this.hover.hide();\n        return this.hilight();\n      }\n    };\n\n    Line.prototype.hoverContentForRow = function(index) {\n      var content, j, row, y, _i, _len, _ref;\n      row = this.data[index];\n      content = $(\"<div class='morris-hover-row-label'>\").text(row.label);\n      content = content.prop('outerHTML');\n      _ref = row.y;\n      for (j = _i = 0, _len = _ref.length; _i < _len; j = ++_i) {\n        y = _ref[j];\n        if (this.options.labels[j] === false) {\n          continue;\n        }\n        content += \"<div class='morris-hover-point' style='color: \" + (this.colorFor(row, j, 'label')) + \"'>\\n  \" + this.options.labels[j] + \":\\n  \" + (this.yLabelFormat(y, j)) + \"\\n</div>\";\n      }\n      if (typeof this.options.hoverCallback === 'function') {\n        content = this.options.hoverCallback(index, this.options, content, row.src);\n      }\n      return [content, row._x, row._ymax];\n    };\n\n    Line.prototype.generatePaths = function() {\n      var coords, i, r, smooth;\n      return this.paths = (function() {\n        var _i, _ref, _ref1, _results;\n        _results = [];\n        for (i = _i = 0, _ref = this.options.ykeys.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n          smooth = typeof this.options.smooth === \"boolean\" ? this.options.smooth : (_ref1 = this.options.ykeys[i], __indexOf.call(this.options.smooth, _ref1) >= 0);\n          coords = (function() {\n            var _j, _len, _ref2, _results1;\n            _ref2 = this.data;\n            _results1 = [];\n            for (_j = 0, _len = _ref2.length; _j < _len; _j++) {\n              r = _ref2[_j];\n              if (r._y[i] !== void 0) {\n                _results1.push({\n                  x: r._x,\n                  y: r._y[i]\n                });\n              }\n            }\n            return _results1;\n          }).call(this);\n          if (coords.length > 1) {\n            _results.push(Morris.Line.createPath(coords, smooth, this.bottom));\n          } else {\n            _results.push(null);\n          }\n        }\n        return _results;\n      }).call(this);\n    };\n\n    Line.prototype.draw = function() {\n      var _ref;\n      if ((_ref = this.options.axes) === true || _ref === 'both' || _ref === 'x') {\n        this.drawXAxis();\n      }\n      this.drawSeries();\n      if (this.options.hideHover === false) {\n        return this.displayHoverForRow(this.data.length - 1);\n      }\n    };\n\n    Line.prototype.drawXAxis = function() {\n      var drawLabel, l, labels, prevAngleMargin, prevLabelMargin, row, ypos, _i, _len, _results,\n        _this = this;\n      ypos = this.bottom + this.options.padding / 2;\n      prevLabelMargin = null;\n      prevAngleMargin = null;\n      drawLabel = function(labelText, xpos) {\n        var label, labelBox, margin, offset, textBox;\n        label = _this.drawXAxisLabel(_this.transX(xpos), ypos, labelText);\n        textBox = label.getBBox();\n        label.transform(\"r\" + (-_this.options.xLabelAngle));\n        labelBox = label.getBBox();\n        label.transform(\"t0,\" + (labelBox.height / 2) + \"...\");\n        if (_this.options.xLabelAngle !== 0) {\n          offset = -0.5 * textBox.width * Math.cos(_this.options.xLabelAngle * Math.PI / 180.0);\n          label.transform(\"t\" + offset + \",0...\");\n        }\n        labelBox = label.getBBox();\n        if (((prevLabelMargin == null) || prevLabelMargin >= labelBox.x + labelBox.width || (prevAngleMargin != null) && prevAngleMargin >= labelBox.x) && labelBox.x >= 0 && (labelBox.x + labelBox.width) < _this.el.width()) {\n          if (_this.options.xLabelAngle !== 0) {\n            margin = 1.25 * _this.options.gridTextSize / Math.sin(_this.options.xLabelAngle * Math.PI / 180.0);\n            prevAngleMargin = labelBox.x - margin;\n          }\n          return prevLabelMargin = labelBox.x - _this.options.xLabelMargin;\n        } else {\n          return label.remove();\n        }\n      };\n      if (this.options.parseTime) {\n        if (this.data.length === 1 && this.options.xLabels === 'auto') {\n          labels = [[this.data[0].label, this.data[0].x]];\n        } else {\n          labels = Morris.labelSeries(this.xmin, this.xmax, this.width, this.options.xLabels, this.options.xLabelFormat);\n        }\n      } else {\n        labels = (function() {\n          var _i, _len, _ref, _results;\n          _ref = this.data;\n          _results = [];\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            row = _ref[_i];\n            _results.push([row.label, row.x]);\n          }\n          return _results;\n        }).call(this);\n      }\n      labels.reverse();\n      _results = [];\n      for (_i = 0, _len = labels.length; _i < _len; _i++) {\n        l = labels[_i];\n        _results.push(drawLabel(l[0], l[1]));\n      }\n      return _results;\n    };\n\n    Line.prototype.drawSeries = function() {\n      var i, _i, _j, _ref, _ref1, _results;\n      this.seriesPoints = [];\n      for (i = _i = _ref = this.options.ykeys.length - 1; _ref <= 0 ? _i <= 0 : _i >= 0; i = _ref <= 0 ? ++_i : --_i) {\n        if (this.hasToShow(i)) {\n          if (this.options.trendLine !== false && this.options.trendLine === true || this.options.trendLine[i] === true) {\n            this._drawTrendLine(i);\n          }\n          this._drawLineFor(i);\n        }\n      }\n      _results = [];\n      for (i = _j = _ref1 = this.options.ykeys.length - 1; _ref1 <= 0 ? _j <= 0 : _j >= 0; i = _ref1 <= 0 ? ++_j : --_j) {\n        if (this.hasToShow(i)) {\n          _results.push(this._drawPointFor(i));\n        } else {\n          _results.push(void 0);\n        }\n      }\n      return _results;\n    };\n\n    Line.prototype._drawPointFor = function(index) {\n      var circle, row, _i, _len, _ref, _results;\n      this.seriesPoints[index] = [];\n      _ref = this.data;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        row = _ref[_i];\n        circle = null;\n        if (row._y[index] != null) {\n          circle = this.drawLinePoint(row._x, row._y[index], this.colorFor(row, index, 'point'), index);\n        }\n        _results.push(this.seriesPoints[index].push(circle));\n      }\n      return _results;\n    };\n\n    Line.prototype._drawLineFor = function(index) {\n      var path;\n      path = this.paths[index];\n      if (path !== null) {\n        return this.drawLinePath(path, this.colorFor(null, index, 'line'), index);\n      }\n    };\n\n    Line.prototype._drawTrendLine = function(index) {\n      var a, b, data, datapoints, path, sum_x, sum_xx, sum_xy, sum_y, val, x, y, _i, _len, _ref;\n      sum_x = 0;\n      sum_y = 0;\n      sum_xx = 0;\n      sum_xy = 0;\n      datapoints = 0;\n      _ref = this.data;\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        val = _ref[_i];\n        x = val.x;\n        y = val.y[index];\n        if (y === void 0) {\n          continue;\n        }\n        datapoints += 1;\n        sum_x += x;\n        sum_y += y;\n        sum_xx += x * x;\n        sum_xy += x * y;\n      }\n      a = (datapoints * sum_xy - sum_x * sum_y) / (datapoints * sum_xx - sum_x * sum_x);\n      b = (sum_y / datapoints) - ((a * sum_x) / datapoints);\n      data = [{}, {}];\n      data[0].x = this.transX(this.data[0].x);\n      data[0].y = this.transY(this.data[0].x * a + b);\n      data[1].x = this.transX(this.data[this.data.length - 1].x);\n      data[1].y = this.transY(this.data[this.data.length - 1].x * a + b);\n      path = Morris.Line.createPath(data, false, this.bottom);\n      return path = this.raphael.path(path).attr('stroke', this.colorFor(null, index, 'trendLine')).attr('stroke-width', this.options.trendLineWidth);\n    };\n\n    Line.createPath = function(coords, smooth, bottom) {\n      var coord, g, grads, i, ix, lg, path, prevCoord, x1, x2, y1, y2, _i, _len;\n      path = \"\";\n      if (smooth) {\n        grads = Morris.Line.gradients(coords);\n      }\n      prevCoord = {\n        y: null\n      };\n      for (i = _i = 0, _len = coords.length; _i < _len; i = ++_i) {\n        coord = coords[i];\n        if (coord.y != null) {\n          if (prevCoord.y != null) {\n            if (smooth) {\n              g = grads[i];\n              lg = grads[i - 1];\n              ix = (coord.x - prevCoord.x) / 4;\n              x1 = prevCoord.x + ix;\n              y1 = Math.min(bottom, prevCoord.y + ix * lg);\n              x2 = coord.x - ix;\n              y2 = Math.min(bottom, coord.y - ix * g);\n              path += \"C\" + x1 + \",\" + y1 + \",\" + x2 + \",\" + y2 + \",\" + coord.x + \",\" + coord.y;\n            } else {\n              path += \"L\" + coord.x + \",\" + coord.y;\n            }\n          } else {\n            if (!smooth || (grads[i] != null)) {\n              path += \"M\" + coord.x + \",\" + coord.y;\n            }\n          }\n        }\n        prevCoord = coord;\n      }\n      return path;\n    };\n\n    Line.gradients = function(coords) {\n      var coord, grad, i, nextCoord, prevCoord, _i, _len, _results;\n      grad = function(a, b) {\n        return (a.y - b.y) / (a.x - b.x);\n      };\n      _results = [];\n      for (i = _i = 0, _len = coords.length; _i < _len; i = ++_i) {\n        coord = coords[i];\n        if (coord.y != null) {\n          nextCoord = coords[i + 1] || {\n            y: null\n          };\n          prevCoord = coords[i - 1] || {\n            y: null\n          };\n          if ((prevCoord.y != null) && (nextCoord.y != null)) {\n            _results.push(grad(prevCoord, nextCoord));\n          } else if (prevCoord.y != null) {\n            _results.push(grad(prevCoord, coord));\n          } else if (nextCoord.y != null) {\n            _results.push(grad(coord, nextCoord));\n          } else {\n            _results.push(null);\n          }\n        } else {\n          _results.push(null);\n        }\n      }\n      return _results;\n    };\n\n    Line.prototype.hilight = function(index) {\n      var i, _i, _j, _ref, _ref1;\n      if (this.prevHilight !== null && this.prevHilight !== index) {\n        for (i = _i = 0, _ref = this.seriesPoints.length - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {\n          if (this.seriesPoints[i][this.prevHilight]) {\n            this.seriesPoints[i][this.prevHilight].animate(this.pointShrinkSeries(i));\n          }\n        }\n      }\n      if (index !== null && this.prevHilight !== index) {\n        for (i = _j = 0, _ref1 = this.seriesPoints.length - 1; 0 <= _ref1 ? _j <= _ref1 : _j >= _ref1; i = 0 <= _ref1 ? ++_j : --_j) {\n          if (this.seriesPoints[i][index]) {\n            this.seriesPoints[i][index].animate(this.pointGrowSeries(i));\n          }\n        }\n      }\n      return this.prevHilight = index;\n    };\n\n    Line.prototype.colorFor = function(row, sidx, type) {\n      if (typeof this.options.lineColors === 'function') {\n        return this.options.lineColors.call(this, row, sidx, type);\n      } else if (type === 'point') {\n        return this.options.pointFillColors[sidx % this.options.pointFillColors.length] || this.options.lineColors[sidx % this.options.lineColors.length];\n      } else if (type === 'line') {\n        return this.options.lineColors[sidx % this.options.lineColors.length];\n      } else {\n        return this.options.trendLineColors[sidx % this.options.trendLineColors.length];\n      }\n    };\n\n    Line.prototype.drawXAxisLabel = function(xPos, yPos, text) {\n      return this.raphael.text(xPos, yPos, text).attr('font-size', this.options.gridTextSize).attr('font-family', this.options.gridTextFamily).attr('font-weight', this.options.gridTextWeight).attr('fill', this.options.gridTextColor);\n    };\n\n    Line.prototype.drawLinePath = function(path, lineColor, lineIndex) {\n      return this.raphael.path(path).attr('stroke', lineColor).attr('stroke-width', this.lineWidthForSeries(lineIndex));\n    };\n\n    Line.prototype.drawLinePoint = function(xPos, yPos, pointColor, lineIndex) {\n      return this.raphael.circle(xPos, yPos, this.pointSizeForSeries(lineIndex)).attr('fill', pointColor).attr('stroke-width', this.pointStrokeWidthForSeries(lineIndex)).attr('stroke', this.pointStrokeColorForSeries(lineIndex));\n    };\n\n    Line.prototype.pointStrokeWidthForSeries = function(index) {\n      return this.options.pointStrokeWidths[index % this.options.pointStrokeWidths.length];\n    };\n\n    Line.prototype.pointStrokeColorForSeries = function(index) {\n      return this.options.pointStrokeColors[index % this.options.pointStrokeColors.length];\n    };\n\n    Line.prototype.lineWidthForSeries = function(index) {\n      if (this.options.lineWidth instanceof Array) {\n        return this.options.lineWidth[index % this.options.lineWidth.length];\n      } else {\n        return this.options.lineWidth;\n      }\n    };\n\n    Line.prototype.pointSizeForSeries = function(index) {\n      if (this.options.pointSize instanceof Array) {\n        return this.options.pointSize[index % this.options.pointSize.length];\n      } else {\n        return this.options.pointSize;\n      }\n    };\n\n    Line.prototype.pointGrowSeries = function(index) {\n      if (this.pointSizeForSeries(index) === 0) {\n        return;\n      }\n      return Raphael.animation({\n        r: this.pointSizeForSeries(index) + 3\n      }, 25, 'linear');\n    };\n\n    Line.prototype.pointShrinkSeries = function(index) {\n      return Raphael.animation({\n        r: this.pointSizeForSeries(index)\n      }, 25, 'linear');\n    };\n\n    return Line;\n\n  })(Morris.Grid);\n\n  Morris.labelSeries = function(dmin, dmax, pxwidth, specName, xLabelFormat) {\n    var d, d0, ddensity, name, ret, s, spec, t, _i, _len, _ref;\n    ddensity = 200 * (dmax - dmin) / pxwidth;\n    d0 = new Date(dmin);\n    spec = Morris.LABEL_SPECS[specName];\n    if (spec === void 0) {\n      _ref = Morris.AUTO_LABEL_ORDER;\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        name = _ref[_i];\n        s = Morris.LABEL_SPECS[name];\n        if (ddensity >= s.span) {\n          spec = s;\n          break;\n        }\n      }\n    }\n    if (spec === void 0) {\n      spec = Morris.LABEL_SPECS[\"second\"];\n    }\n    if (xLabelFormat) {\n      spec = $.extend({}, spec, {\n        fmt: xLabelFormat\n      });\n    }\n    d = spec.start(d0);\n    ret = [];\n    while ((t = d.getTime()) <= dmax) {\n      if (t >= dmin) {\n        ret.push([spec.fmt(d), t]);\n      }\n      spec.incr(d);\n    }\n    return ret;\n  };\n\n  minutesSpecHelper = function(interval) {\n    return {\n      span: interval * 60 * 1000,\n      start: function(d) {\n        return new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours());\n      },\n      fmt: function(d) {\n        return \"\" + (Morris.pad2(d.getHours())) + \":\" + (Morris.pad2(d.getMinutes()));\n      },\n      incr: function(d) {\n        return d.setUTCMinutes(d.getUTCMinutes() + interval);\n      }\n    };\n  };\n\n  secondsSpecHelper = function(interval) {\n    return {\n      span: interval * 1000,\n      start: function(d) {\n        return new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), d.getMinutes());\n      },\n      fmt: function(d) {\n        return \"\" + (Morris.pad2(d.getHours())) + \":\" + (Morris.pad2(d.getMinutes())) + \":\" + (Morris.pad2(d.getSeconds()));\n      },\n      incr: function(d) {\n        return d.setUTCSeconds(d.getUTCSeconds() + interval);\n      }\n    };\n  };\n\n  Morris.LABEL_SPECS = {\n    \"decade\": {\n      span: 172800000000,\n      start: function(d) {\n        return new Date(d.getFullYear() - d.getFullYear() % 10, 0, 1);\n      },\n      fmt: function(d) {\n        return \"\" + (d.getFullYear());\n      },\n      incr: function(d) {\n        return d.setFullYear(d.getFullYear() + 10);\n      }\n    },\n    \"year\": {\n      span: 17280000000,\n      start: function(d) {\n        return new Date(d.getFullYear(), 0, 1);\n      },\n      fmt: function(d) {\n        return \"\" + (d.getFullYear());\n      },\n      incr: function(d) {\n        return d.setFullYear(d.getFullYear() + 1);\n      }\n    },\n    \"month\": {\n      span: 2419200000,\n      start: function(d) {\n        return new Date(d.getFullYear(), d.getMonth(), 1);\n      },\n      fmt: function(d) {\n        return \"\" + (d.getFullYear()) + \"-\" + (Morris.pad2(d.getMonth() + 1));\n      },\n      incr: function(d) {\n        return d.setMonth(d.getMonth() + 1);\n      }\n    },\n    \"week\": {\n      span: 604800000,\n      start: function(d) {\n        return new Date(d.getFullYear(), d.getMonth(), d.getDate());\n      },\n      fmt: function(d) {\n        return \"\" + (d.getFullYear()) + \"-\" + (Morris.pad2(d.getMonth() + 1)) + \"-\" + (Morris.pad2(d.getDate()));\n      },\n      incr: function(d) {\n        return d.setDate(d.getDate() + 7);\n      }\n    },\n    \"day\": {\n      span: 86400000,\n      start: function(d) {\n        return new Date(d.getFullYear(), d.getMonth(), d.getDate());\n      },\n      fmt: function(d) {\n        return \"\" + (d.getFullYear()) + \"-\" + (Morris.pad2(d.getMonth() + 1)) + \"-\" + (Morris.pad2(d.getDate()));\n      },\n      incr: function(d) {\n        return d.setDate(d.getDate() + 1);\n      }\n    },\n    \"hour\": minutesSpecHelper(60),\n    \"30min\": minutesSpecHelper(30),\n    \"15min\": minutesSpecHelper(15),\n    \"10min\": minutesSpecHelper(10),\n    \"5min\": minutesSpecHelper(5),\n    \"minute\": minutesSpecHelper(1),\n    \"30sec\": secondsSpecHelper(30),\n    \"15sec\": secondsSpecHelper(15),\n    \"10sec\": secondsSpecHelper(10),\n    \"5sec\": secondsSpecHelper(5),\n    \"second\": secondsSpecHelper(1)\n  };\n\n  Morris.AUTO_LABEL_ORDER = [\"decade\", \"year\", \"month\", \"week\", \"day\", \"hour\", \"30min\", \"15min\", \"10min\", \"5min\", \"minute\", \"30sec\", \"15sec\", \"10sec\", \"5sec\", \"second\"];\n\n  Morris.Area = (function(_super) {\n    var areaDefaults;\n\n    __extends(Area, _super);\n\n    areaDefaults = {\n      fillOpacity: 'auto',\n      behaveLikeLine: false\n    };\n\n    function Area(options) {\n      var areaOptions;\n      if (!(this instanceof Morris.Area)) {\n        return new Morris.Area(options);\n      }\n      areaOptions = $.extend({}, areaDefaults, options);\n      this.cumulative = !areaOptions.behaveLikeLine;\n      if (areaOptions.fillOpacity === 'auto') {\n        areaOptions.fillOpacity = areaOptions.behaveLikeLine ? .8 : 1;\n      }\n      Area.__super__.constructor.call(this, areaOptions);\n    }\n\n    Area.prototype.calcPoints = function() {\n      var row, total, y, _i, _len, _ref, _results;\n      _ref = this.data;\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        row = _ref[_i];\n        row._x = this.transX(row.x);\n        total = 0;\n        row._y = (function() {\n          var _j, _len1, _ref1, _results1;\n          _ref1 = row.y;\n          _results1 = [];\n          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n            y = _ref1[_j];\n            if (this.options.behaveLikeLine) {\n              _results1.push(this.transY(y));\n            } else {\n              total += y || 0;\n              _results1.push(this.transY(total));\n            }\n          }\n          return _results1;\n        }).call(this);\n        _results.push(row._ymax = Math.max.apply(Math, row._y));\n      }\n      return _results;\n    };\n\n    Area.prototype.drawSeries = function() {\n      var i, range, _i, _j, _k, _len, _ref, _ref1, _results, _results1, _results2;\n      this.seriesPoints = [];\n      if (this.options.behaveLikeLine) {\n        range = (function() {\n          _results = [];\n          for (var _i = 0, _ref = this.options.ykeys.length - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; 0 <= _ref ? _i++ : _i--){ _results.push(_i); }\n          return _results;\n        }).apply(this);\n      } else {\n        range = (function() {\n          _results1 = [];\n          for (var _j = _ref1 = this.options.ykeys.length - 1; _ref1 <= 0 ? _j <= 0 : _j >= 0; _ref1 <= 0 ? _j++ : _j--){ _results1.push(_j); }\n          return _results1;\n        }).apply(this);\n      }\n      _results2 = [];\n      for (_k = 0, _len = range.length; _k < _len; _k++) {\n        i = range[_k];\n        this._drawFillFor(i);\n        this._drawLineFor(i);\n        _results2.push(this._drawPointFor(i));\n      }\n      return _results2;\n    };\n\n    Area.prototype._drawFillFor = function(index) {\n      var path;\n      path = this.paths[index];\n      if (path !== null) {\n        path = path + (\"L\" + (this.transX(this.xmax)) + \",\" + this.bottom + \"L\" + (this.transX(this.xmin)) + \",\" + this.bottom + \"Z\");\n        return this.drawFilledPath(path, this.fillForSeries(index));\n      }\n    };\n\n    Area.prototype.fillForSeries = function(i) {\n      var color;\n      color = Raphael.rgb2hsl(this.colorFor(this.data[i], i, 'line'));\n      return Raphael.hsl(color.h, this.options.behaveLikeLine ? color.s * 0.9 : color.s * 0.75, Math.min(0.98, this.options.behaveLikeLine ? color.l * 1.2 : color.l * 1.25));\n    };\n\n    Area.prototype.drawFilledPath = function(path, fill) {\n      return this.raphael.path(path).attr('fill', fill).attr('fill-opacity', this.options.fillOpacity).attr('stroke', 'none');\n    };\n\n    return Area;\n\n  })(Morris.Line);\n\n  Morris.Bar = (function(_super) {\n    __extends(Bar, _super);\n\n    function Bar(options) {\n      this.onHoverOut = __bind(this.onHoverOut, this);\n      this.onHoverMove = __bind(this.onHoverMove, this);\n      this.onGridClick = __bind(this.onGridClick, this);\n      if (!(this instanceof Morris.Bar)) {\n        return new Morris.Bar(options);\n      }\n      Bar.__super__.constructor.call(this, $.extend({}, options, {\n        parseTime: false\n      }));\n    }\n\n    Bar.prototype.init = function() {\n      this.cumulative = this.options.stacked;\n      if (this.options.hideHover !== 'always') {\n        this.hover = new Morris.Hover({\n          parent: this.el\n        });\n        this.on('hovermove', this.onHoverMove);\n        this.on('hoverout', this.onHoverOut);\n        return this.on('gridclick', this.onGridClick);\n      }\n    };\n\n    Bar.prototype.defaults = {\n      barSizeRatio: 0.75,\n      barGap: 3,\n      barColors: ['#0b62a4', '#7a92a3', '#4da74d', '#afd8f8', '#edc240', '#cb4b4b', '#9440ed'],\n      barOpacity: 1.0,\n      barRadius: [0, 0, 0, 0],\n      xLabelMargin: 50,\n      horizontal: false,\n      shown: true\n    };\n\n    Bar.prototype.calc = function() {\n      var _ref;\n      this.calcBars();\n      if (this.options.hideHover === false) {\n        return (_ref = this.hover).update.apply(_ref, this.hoverContentForRow(this.data.length - 1));\n      }\n    };\n\n    Bar.prototype.calcBars = function() {\n      var idx, row, y, _i, _len, _ref, _results;\n      _ref = this.data;\n      _results = [];\n      for (idx = _i = 0, _len = _ref.length; _i < _len; idx = ++_i) {\n        row = _ref[idx];\n        row._x = this.xStart + this.xSize * (idx + 0.5) / this.data.length;\n        _results.push(row._y = (function() {\n          var _j, _len1, _ref1, _results1;\n          _ref1 = row.y;\n          _results1 = [];\n          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n            y = _ref1[_j];\n            if (y != null) {\n              _results1.push(this.transY(y));\n            } else {\n              _results1.push(null);\n            }\n          }\n          return _results1;\n        }).call(this));\n      }\n      return _results;\n    };\n\n    Bar.prototype.draw = function() {\n      var _ref;\n      if ((_ref = this.options.axes) === true || _ref === 'both' || _ref === 'x') {\n        this.drawXAxis();\n      }\n      return this.drawSeries();\n    };\n\n    Bar.prototype.drawXAxis = function() {\n      var angle, basePos, i, label, labelBox, margin, maxSize, offset, prevAngleMargin, prevLabelMargin, row, size, startPos, textBox, _i, _ref, _results;\n      if (!this.options.horizontal) {\n        basePos = this.getXAxisLabelY();\n      } else {\n        basePos = this.getYAxisLabelX();\n      }\n      prevLabelMargin = null;\n      prevAngleMargin = null;\n      _results = [];\n      for (i = _i = 0, _ref = this.data.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        row = this.data[this.data.length - 1 - i];\n        if (!this.options.horizontal) {\n          label = this.drawXAxisLabel(row._x, basePos, row.label);\n        } else {\n          label = this.drawYAxisLabel(basePos, row._x - 0.5 * this.options.gridTextSize, row.label);\n        }\n        if (!this.options.horizontal) {\n          angle = this.options.xLabelAngle;\n        } else {\n          angle = 0;\n        }\n        textBox = label.getBBox();\n        label.transform(\"r\" + (-angle));\n        labelBox = label.getBBox();\n        label.transform(\"t0,\" + (labelBox.height / 2) + \"...\");\n        if (angle !== 0) {\n          offset = -0.5 * textBox.width * Math.cos(angle * Math.PI / 180.0);\n          label.transform(\"t\" + offset + \",0...\");\n        }\n        if (!this.options.horizontal) {\n          startPos = labelBox.x;\n          size = labelBox.width;\n          maxSize = this.el.width();\n        } else {\n          startPos = labelBox.y;\n          size = labelBox.height;\n          maxSize = this.el.height();\n        }\n        if (((prevLabelMargin == null) || prevLabelMargin >= startPos + size || (prevAngleMargin != null) && prevAngleMargin >= startPos) && startPos >= 0 && (startPos + size) < maxSize) {\n          if (angle !== 0) {\n            margin = 1.25 * this.options.gridTextSize / Math.sin(angle * Math.PI / 180.0);\n            prevAngleMargin = startPos - margin;\n          }\n          if (!this.options.horizontal) {\n            _results.push(prevLabelMargin = startPos - this.options.xLabelMargin);\n          } else {\n            _results.push(prevLabelMargin = startPos);\n          }\n        } else {\n          _results.push(label.remove());\n        }\n      }\n      return _results;\n    };\n\n    Bar.prototype.getXAxisLabelY = function() {\n      return this.bottom + (this.options.xAxisLabelTopPadding || this.options.padding / 2);\n    };\n\n    Bar.prototype.drawSeries = function() {\n      var barWidth, bottom, groupWidth, i, idx, lastTop, left, leftPadding, numBars, row, sidx, size, spaceLeft, top, ypos, zeroPos, _i, _ref;\n      groupWidth = this.xSize / this.options.data.length;\n      if (this.options.stacked) {\n        numBars = 1;\n      } else {\n        numBars = 0;\n        for (i = _i = 0, _ref = this.options.ykeys.length - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {\n          if (this.hasToShow(i)) {\n            numBars += 1;\n          }\n        }\n      }\n      barWidth = (groupWidth * this.options.barSizeRatio - this.options.barGap * (numBars - 1)) / numBars;\n      if (this.options.barSize) {\n        barWidth = Math.min(barWidth, this.options.barSize);\n      }\n      spaceLeft = groupWidth - barWidth * numBars - this.options.barGap * (numBars - 1);\n      leftPadding = spaceLeft / 2;\n      zeroPos = this.ymin <= 0 && this.ymax >= 0 ? this.transY(0) : null;\n      return this.bars = (function() {\n        var _j, _len, _ref1, _results;\n        _ref1 = this.data;\n        _results = [];\n        for (idx = _j = 0, _len = _ref1.length; _j < _len; idx = ++_j) {\n          row = _ref1[idx];\n          lastTop = 0;\n          _results.push((function() {\n            var _k, _len1, _ref2, _results1;\n            _ref2 = row._y;\n            _results1 = [];\n            for (sidx = _k = 0, _len1 = _ref2.length; _k < _len1; sidx = ++_k) {\n              ypos = _ref2[sidx];\n              if (!this.hasToShow(sidx)) {\n                continue;\n              }\n              if (ypos !== null) {\n                if (zeroPos) {\n                  top = Math.min(ypos, zeroPos);\n                  bottom = Math.max(ypos, zeroPos);\n                } else {\n                  top = ypos;\n                  bottom = this.bottom;\n                }\n                left = this.xStart + idx * groupWidth + leftPadding;\n                if (!this.options.stacked) {\n                  left += sidx * (barWidth + this.options.barGap);\n                }\n                size = bottom - top;\n                if (this.options.verticalGridCondition && this.options.verticalGridCondition(row.x)) {\n                  if (!this.options.horizontal) {\n                    this.drawBar(this.xStart + idx * groupWidth, this.yEnd, groupWidth, this.ySize, this.options.verticalGridColor, this.options.verticalGridOpacity, this.options.barRadius);\n                  } else {\n                    this.drawBar(this.yStart, this.xStart + idx * groupWidth, this.ySize, groupWidth, this.options.verticalGridColor, this.options.verticalGridOpacity, this.options.barRadius);\n                  }\n                }\n                if (this.options.stacked) {\n                  top -= lastTop;\n                }\n                if (!this.options.horizontal) {\n                  this.drawBar(left, top, barWidth, size, this.colorFor(row, sidx, 'bar'), this.options.barOpacity, this.options.barRadius);\n                  _results1.push(lastTop += size);\n                } else {\n                  this.drawBar(top, left, size, barWidth, this.colorFor(row, sidx, 'bar'), this.options.barOpacity, this.options.barRadius);\n                  _results1.push(lastTop -= size);\n                }\n              } else {\n                _results1.push(null);\n              }\n            }\n            return _results1;\n          }).call(this));\n        }\n        return _results;\n      }).call(this);\n    };\n\n    Bar.prototype.colorFor = function(row, sidx, type) {\n      var r, s;\n      if (typeof this.options.barColors === 'function') {\n        r = {\n          x: row.x,\n          y: row.y[sidx],\n          label: row.label\n        };\n        s = {\n          index: sidx,\n          key: this.options.ykeys[sidx],\n          label: this.options.labels[sidx]\n        };\n        return this.options.barColors.call(this, r, s, type);\n      } else {\n        return this.options.barColors[sidx % this.options.barColors.length];\n      }\n    };\n\n    Bar.prototype.hitTest = function(x, y) {\n      var pos;\n      if (this.data.length === 0) {\n        return null;\n      }\n      if (!this.options.horizontal) {\n        pos = x;\n      } else {\n        pos = y;\n      }\n      pos = Math.max(Math.min(pos, this.xEnd), this.xStart);\n      return Math.min(this.data.length - 1, Math.floor((pos - this.xStart) / (this.xSize / this.data.length)));\n    };\n\n    Bar.prototype.onGridClick = function(x, y) {\n      var index;\n      index = this.hitTest(x, y);\n      return this.fire('click', index, this.data[index].src, x, y);\n    };\n\n    Bar.prototype.onHoverMove = function(x, y) {\n      var index, _ref;\n      index = this.hitTest(x, y);\n      return (_ref = this.hover).update.apply(_ref, this.hoverContentForRow(index));\n    };\n\n    Bar.prototype.onHoverOut = function() {\n      if (this.options.hideHover !== false) {\n        return this.hover.hide();\n      }\n    };\n\n    Bar.prototype.hoverContentForRow = function(index) {\n      var content, j, row, x, y, _i, _len, _ref;\n      row = this.data[index];\n      content = $(\"<div class='morris-hover-row-label'>\").text(row.label);\n      content = content.prop('outerHTML');\n      _ref = row.y;\n      for (j = _i = 0, _len = _ref.length; _i < _len; j = ++_i) {\n        y = _ref[j];\n        if (this.options.labels[j] === false) {\n          continue;\n        }\n        content += \"<div class='morris-hover-point' style='color: \" + (this.colorFor(row, j, 'label')) + \"'>\\n  \" + this.options.labels[j] + \":\\n  \" + (this.yLabelFormat(y, j)) + \"\\n</div>\";\n      }\n      if (typeof this.options.hoverCallback === 'function') {\n        content = this.options.hoverCallback(index, this.options, content, row.src);\n      }\n      if (!this.options.horizontal) {\n        x = this.left + (index + 0.5) * this.width / this.data.length;\n        return [content, x];\n      } else {\n        x = this.left + 0.5 * this.width;\n        y = this.top + (index + 0.5) * this.height / this.data.length;\n        return [content, x, y, true];\n      }\n    };\n\n    Bar.prototype.drawXAxisLabel = function(xPos, yPos, text) {\n      var label;\n      return label = this.raphael.text(xPos, yPos, text).attr('font-size', this.options.gridTextSize).attr('font-family', this.options.gridTextFamily).attr('font-weight', this.options.gridTextWeight).attr('fill', this.options.gridTextColor);\n    };\n\n    Bar.prototype.drawBar = function(xPos, yPos, width, height, barColor, opacity, radiusArray) {\n      var maxRadius, path;\n      maxRadius = Math.max.apply(Math, radiusArray);\n      if (maxRadius === 0 || maxRadius > height) {\n        path = this.raphael.rect(xPos, yPos, width, height);\n      } else {\n        path = this.raphael.path(this.roundedRect(xPos, yPos, width, height, radiusArray));\n      }\n      return path.attr('fill', barColor).attr('fill-opacity', opacity).attr('stroke', 'none');\n    };\n\n    Bar.prototype.roundedRect = function(x, y, w, h, r) {\n      if (r == null) {\n        r = [0, 0, 0, 0];\n      }\n      return [\"M\", x, r[0] + y, \"Q\", x, y, x + r[0], y, \"L\", x + w - r[1], y, \"Q\", x + w, y, x + w, y + r[1], \"L\", x + w, y + h - r[2], \"Q\", x + w, y + h, x + w - r[2], y + h, \"L\", x + r[3], y + h, \"Q\", x, y + h, x, y + h - r[3], \"Z\"];\n    };\n\n    return Bar;\n\n  })(Morris.Grid);\n\n  Morris.Donut = (function(_super) {\n    __extends(Donut, _super);\n\n    Donut.prototype.defaults = {\n      colors: ['#0B62A4', '#3980B5', '#679DC6', '#95BBD7', '#B0CCE1', '#095791', '#095085', '#083E67', '#052C48', '#042135'],\n      backgroundColor: '#FFFFFF',\n      labelColor: '#000000',\n      formatter: Morris.commas,\n      resize: false\n    };\n\n    function Donut(options) {\n      this.resizeHandler = __bind(this.resizeHandler, this);\n      this.select = __bind(this.select, this);\n      this.click = __bind(this.click, this);\n      var _this = this;\n      if (!(this instanceof Morris.Donut)) {\n        return new Morris.Donut(options);\n      }\n      this.options = $.extend({}, this.defaults, options);\n      if (typeof options.element === 'string') {\n        this.el = $(document.getElementById(options.element));\n      } else {\n        this.el = $(options.element);\n      }\n      if (this.el === null || this.el.length === 0) {\n        throw new Error(\"Graph placeholder not found.\");\n      }\n      if (options.data === void 0 || options.data.length === 0) {\n        return;\n      }\n      this.raphael = new Raphael(this.el[0]);\n      if (this.options.resize) {\n        $(window).bind('resize', function(evt) {\n          if (_this.timeoutId != null) {\n            window.clearTimeout(_this.timeoutId);\n          }\n          return _this.timeoutId = window.setTimeout(_this.resizeHandler, 100);\n        });\n      }\n      this.setData(options.data);\n    }\n\n    Donut.prototype.redraw = function() {\n      var C, cx, cy, i, idx, last, max_value, min, next, seg, total, value, w, _i, _j, _k, _len, _len1, _len2, _ref, _ref1, _ref2, _results;\n      this.raphael.clear();\n      cx = this.el.width() / 2;\n      cy = this.el.height() / 2;\n      w = (Math.min(cx, cy) - 10) / 3;\n      total = 0;\n      _ref = this.values;\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        value = _ref[_i];\n        total += value;\n      }\n      min = 5 / (2 * w);\n      C = 1.9999 * Math.PI - min * this.data.length;\n      last = 0;\n      idx = 0;\n      this.segments = [];\n      _ref1 = this.values;\n      for (i = _j = 0, _len1 = _ref1.length; _j < _len1; i = ++_j) {\n        value = _ref1[i];\n        next = last + min + C * (value / total);\n        seg = new Morris.DonutSegment(cx, cy, w * 2, w, last, next, this.data[i].color || this.options.colors[idx % this.options.colors.length], this.options.backgroundColor, idx, this.raphael);\n        seg.render();\n        this.segments.push(seg);\n        seg.on('hover', this.select);\n        seg.on('click', this.click);\n        last = next;\n        idx += 1;\n      }\n      this.text1 = this.drawEmptyDonutLabel(cx, cy - 10, this.options.labelColor, 15, 800);\n      this.text2 = this.drawEmptyDonutLabel(cx, cy + 10, this.options.labelColor, 14);\n      max_value = Math.max.apply(Math, this.values);\n      idx = 0;\n      _ref2 = this.values;\n      _results = [];\n      for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {\n        value = _ref2[_k];\n        if (value === max_value) {\n          this.select(idx);\n          break;\n        }\n        _results.push(idx += 1);\n      }\n      return _results;\n    };\n\n    Donut.prototype.setData = function(data) {\n      var row;\n      this.data = data;\n      this.values = (function() {\n        var _i, _len, _ref, _results;\n        _ref = this.data;\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          row = _ref[_i];\n          _results.push(parseFloat(row.value));\n        }\n        return _results;\n      }).call(this);\n      return this.redraw();\n    };\n\n    Donut.prototype.click = function(idx) {\n      return this.fire('click', idx, this.data[idx]);\n    };\n\n    Donut.prototype.select = function(idx) {\n      var row, s, segment, _i, _len, _ref;\n      _ref = this.segments;\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        s = _ref[_i];\n        s.deselect();\n      }\n      segment = this.segments[idx];\n      segment.select();\n      row = this.data[idx];\n      return this.setLabels(row.label, this.options.formatter(row.value, row));\n    };\n\n    Donut.prototype.setLabels = function(label1, label2) {\n      var inner, maxHeightBottom, maxHeightTop, maxWidth, text1bbox, text1scale, text2bbox, text2scale;\n      inner = (Math.min(this.el.width() / 2, this.el.height() / 2) - 10) * 2 / 3;\n      maxWidth = 1.8 * inner;\n      maxHeightTop = inner / 2;\n      maxHeightBottom = inner / 3;\n      this.text1.attr({\n        text: label1,\n        transform: ''\n      });\n      text1bbox = this.text1.getBBox();\n      text1scale = Math.min(maxWidth / text1bbox.width, maxHeightTop / text1bbox.height);\n      this.text1.attr({\n        transform: \"S\" + text1scale + \",\" + text1scale + \",\" + (text1bbox.x + text1bbox.width / 2) + \",\" + (text1bbox.y + text1bbox.height)\n      });\n      this.text2.attr({\n        text: label2,\n        transform: ''\n      });\n      text2bbox = this.text2.getBBox();\n      text2scale = Math.min(maxWidth / text2bbox.width, maxHeightBottom / text2bbox.height);\n      return this.text2.attr({\n        transform: \"S\" + text2scale + \",\" + text2scale + \",\" + (text2bbox.x + text2bbox.width / 2) + \",\" + text2bbox.y\n      });\n    };\n\n    Donut.prototype.drawEmptyDonutLabel = function(xPos, yPos, color, fontSize, fontWeight) {\n      var text;\n      text = this.raphael.text(xPos, yPos, '').attr('font-size', fontSize).attr('fill', color);\n      if (fontWeight != null) {\n        text.attr('font-weight', fontWeight);\n      }\n      return text;\n    };\n\n    Donut.prototype.resizeHandler = function() {\n      this.timeoutId = null;\n      this.raphael.setSize(this.el.width(), this.el.height());\n      return this.redraw();\n    };\n\n    return Donut;\n\n  })(Morris.EventEmitter);\n\n  Morris.DonutSegment = (function(_super) {\n    __extends(DonutSegment, _super);\n\n    function DonutSegment(cx, cy, inner, outer, p0, p1, color, backgroundColor, index, raphael) {\n      this.cx = cx;\n      this.cy = cy;\n      this.inner = inner;\n      this.outer = outer;\n      this.color = color;\n      this.backgroundColor = backgroundColor;\n      this.index = index;\n      this.raphael = raphael;\n      this.deselect = __bind(this.deselect, this);\n      this.select = __bind(this.select, this);\n      this.sin_p0 = Math.sin(p0);\n      this.cos_p0 = Math.cos(p0);\n      this.sin_p1 = Math.sin(p1);\n      this.cos_p1 = Math.cos(p1);\n      this.is_long = (p1 - p0) > Math.PI ? 1 : 0;\n      this.path = this.calcSegment(this.inner + 3, this.inner + this.outer - 5);\n      this.selectedPath = this.calcSegment(this.inner + 3, this.inner + this.outer);\n      this.hilight = this.calcArc(this.inner);\n    }\n\n    DonutSegment.prototype.calcArcPoints = function(r) {\n      return [this.cx + r * this.sin_p0, this.cy + r * this.cos_p0, this.cx + r * this.sin_p1, this.cy + r * this.cos_p1];\n    };\n\n    DonutSegment.prototype.calcSegment = function(r1, r2) {\n      var ix0, ix1, iy0, iy1, ox0, ox1, oy0, oy1, _ref, _ref1;\n      _ref = this.calcArcPoints(r1), ix0 = _ref[0], iy0 = _ref[1], ix1 = _ref[2], iy1 = _ref[3];\n      _ref1 = this.calcArcPoints(r2), ox0 = _ref1[0], oy0 = _ref1[1], ox1 = _ref1[2], oy1 = _ref1[3];\n      return (\"M\" + ix0 + \",\" + iy0) + (\"A\" + r1 + \",\" + r1 + \",0,\" + this.is_long + \",0,\" + ix1 + \",\" + iy1) + (\"L\" + ox1 + \",\" + oy1) + (\"A\" + r2 + \",\" + r2 + \",0,\" + this.is_long + \",1,\" + ox0 + \",\" + oy0) + \"Z\";\n    };\n\n    DonutSegment.prototype.calcArc = function(r) {\n      var ix0, ix1, iy0, iy1, _ref;\n      _ref = this.calcArcPoints(r), ix0 = _ref[0], iy0 = _ref[1], ix1 = _ref[2], iy1 = _ref[3];\n      return (\"M\" + ix0 + \",\" + iy0) + (\"A\" + r + \",\" + r + \",0,\" + this.is_long + \",0,\" + ix1 + \",\" + iy1);\n    };\n\n    DonutSegment.prototype.render = function() {\n      var _this = this;\n      this.arc = this.drawDonutArc(this.hilight, this.color);\n      return this.seg = this.drawDonutSegment(this.path, this.color, this.backgroundColor, function() {\n        return _this.fire('hover', _this.index);\n      }, function() {\n        return _this.fire('click', _this.index);\n      });\n    };\n\n    DonutSegment.prototype.drawDonutArc = function(path, color) {\n      return this.raphael.path(path).attr({\n        stroke: color,\n        'stroke-width': 2,\n        opacity: 0\n      });\n    };\n\n    DonutSegment.prototype.drawDonutSegment = function(path, fillColor, strokeColor, hoverFunction, clickFunction) {\n      return this.raphael.path(path).attr({\n        fill: fillColor,\n        stroke: strokeColor,\n        'stroke-width': 3\n      }).hover(hoverFunction).click(clickFunction);\n    };\n\n    DonutSegment.prototype.select = function() {\n      if (!this.selected) {\n        this.seg.animate({\n          path: this.selectedPath\n        }, 150, '<>');\n        this.arc.animate({\n          opacity: 1\n        }, 150, '<>');\n        return this.selected = true;\n      }\n    };\n\n    DonutSegment.prototype.deselect = function() {\n      if (this.selected) {\n        this.seg.animate({\n          path: this.path\n        }, 150, '<>');\n        this.arc.animate({\n          opacity: 0\n        }, 150, '<>');\n        return this.selected = false;\n      }\n    };\n\n    return DonutSegment;\n\n  })(Morris.EventEmitter);\n\n}).call(this);\n"]},"metadata":{},"sourceType":"module"}