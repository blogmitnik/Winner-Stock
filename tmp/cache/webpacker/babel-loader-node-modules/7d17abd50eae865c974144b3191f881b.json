{"ast":null,"code":"/**!\n * KvSortable\n * @author\tRubaXa   <trash@rubaxa.org>\n * @license MIT\n *\n * Changed kvsortable plugin naming to prevent conflict with JQuery UI KvSortable\n * @author Kartik Visweswaran\n */\n(function (factory) {\n  \"use strict\";\n\n  if (typeof define === \"function\" && define.amd) {\n    define(factory);\n  } else if (typeof module != \"undefined\" && typeof module.exports != \"undefined\") {\n    module.exports = factory();\n  } else if (typeof Package !== \"undefined\") {\n    KvSortable = factory(); // export for Meteor.js\n  } else {\n    /* jshint sub:true */\n    window[\"KvSortable\"] = factory();\n  }\n})(function () {\n  \"use strict\";\n\n  if (typeof window === \"undefined\" || typeof window.document == \"undefined\") {\n    return function () {\n      throw new Error(\"sortable.js requires a window with a document\");\n    };\n  }\n\n  var dragEl,\n      parentEl,\n      ghostEl,\n      cloneEl,\n      rootEl,\n      nextEl,\n      scrollEl,\n      scrollParentEl,\n      lastEl,\n      lastCSS,\n      lastParentCSS,\n      oldIndex,\n      newIndex,\n      activeGroup,\n      autoScroll = {},\n      tapEvt,\n      touchEvt,\n      moved,\n\n  /** @const */\n  RSPACE = /\\s+/g,\n      expando = 'KvSortable' + new Date().getTime(),\n      win = window,\n      document = win.document,\n      parseInt = win.parseInt,\n      supportDraggable = !!('draggable' in document.createElement('div')),\n      supportCssPointerEvents = function (el) {\n    el = document.createElement('x');\n    el.style.cssText = 'pointer-events:auto';\n    return el.style.pointerEvents === 'auto';\n  }(),\n      _silent = false,\n      abs = Math.abs,\n      slice = [].slice,\n      touchDragOverListeners = [],\n      _autoScroll = _throttle(function (\n  /**Event*/\n  evt,\n  /**Object*/\n  options,\n  /**HTMLElement*/\n  rootEl) {\n    // Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n    if (rootEl && options.scroll) {\n      var el,\n          rect,\n          sens = options.scrollSensitivity,\n          speed = options.scrollSpeed,\n          x = evt.clientX,\n          y = evt.clientY,\n          winWidth = window.innerWidth,\n          winHeight = window.innerHeight,\n          vx,\n          vy; // Delect scrollEl\n\n      if (scrollParentEl !== rootEl) {\n        scrollEl = options.scroll;\n        scrollParentEl = rootEl;\n\n        if (scrollEl === true) {\n          scrollEl = rootEl;\n\n          do {\n            if (scrollEl.offsetWidth < scrollEl.scrollWidth || scrollEl.offsetHeight < scrollEl.scrollHeight) {\n              break;\n            }\n            /* jshint boss:true */\n\n          } while (scrollEl = scrollEl.parentNode);\n        }\n      }\n\n      if (scrollEl) {\n        el = scrollEl;\n        rect = scrollEl.getBoundingClientRect();\n        vx = (abs(rect.right - x) <= sens) - (abs(rect.left - x) <= sens);\n        vy = (abs(rect.bottom - y) <= sens) - (abs(rect.top - y) <= sens);\n      }\n\n      if (!(vx || vy)) {\n        vx = (winWidth - x <= sens) - (x <= sens);\n        vy = (winHeight - y <= sens) - (y <= sens);\n        /* jshint expr:true */\n\n        (vx || vy) && (el = win);\n      }\n\n      if (autoScroll.vx !== vx || autoScroll.vy !== vy || autoScroll.el !== el) {\n        autoScroll.el = el;\n        autoScroll.vx = vx;\n        autoScroll.vy = vy;\n        clearInterval(autoScroll.pid);\n\n        if (el) {\n          autoScroll.pid = setInterval(function () {\n            if (el === win) {\n              win.scrollTo(win.pageXOffset + vx * speed, win.pageYOffset + vy * speed);\n            } else {\n              vy && (el.scrollTop += vy * speed);\n              vx && (el.scrollLeft += vx * speed);\n            }\n          }, 24);\n        }\n      }\n    }\n  }, 30),\n      _prepareGroup = function _prepareGroup(options) {\n    var group = options.group;\n\n    if (!group || typeof group != 'object') {\n      group = options.group = {\n        name: group\n      };\n    }\n\n    ['pull', 'put'].forEach(function (key) {\n      if (!(key in group)) {\n        group[key] = true;\n      }\n    });\n    options.groups = ' ' + group.name + (group.put.join ? ' ' + group.put.join(' ') : '') + ' ';\n  };\n  /**\n   * @class  KvSortable\n   * @param  {HTMLElement}  el\n   * @param  {Object}       [options]\n   */\n\n\n  function KvSortable(el, options) {\n    if (!(el && el.nodeType && el.nodeType === 1)) {\n      throw 'KvSortable: `el` must be HTMLElement, and not ' + {}.toString.call(el);\n    }\n\n    this.el = el; // root element\n\n    this.options = options = _extend({}, options); // Export instance\n\n    el[expando] = this; // Default options\n\n    var defaults = {\n      group: Math.random(),\n      sort: true,\n      disabled: false,\n      store: null,\n      handle: null,\n      scroll: true,\n      scrollSensitivity: 30,\n      scrollSpeed: 10,\n      draggable: /[uo]l/i.test(el.nodeName) ? 'li' : '>*',\n      ghostClass: 'kvsortable-ghost',\n      chosenClass: 'kvsortable-chosen',\n      ignore: 'a, img',\n      filter: null,\n      animation: 0,\n      setData: function setData(dataTransfer, dragEl) {\n        dataTransfer.setData('Text', dragEl.textContent);\n      },\n      dropBubble: false,\n      dragoverBubble: false,\n      dataIdAttr: 'data-id',\n      delay: 0,\n      forceFallback: false,\n      fallbackClass: 'kvsortable-fallback',\n      fallbackOnBody: false\n    }; // Set default options\n\n    for (var name in defaults) {\n      !(name in options) && (options[name] = defaults[name]);\n    }\n\n    _prepareGroup(options); // Bind all private methods\n\n\n    for (var fn in this) {\n      if (fn.charAt(0) === '_') {\n        this[fn] = this[fn].bind(this);\n      }\n    } // Setup drag mode\n\n\n    this.nativeDraggable = options.forceFallback ? false : supportDraggable; // Bind events\n\n    _on(el, 'mousedown', this._onTapStart);\n\n    _on(el, 'touchstart', this._onTapStart);\n\n    if (this.nativeDraggable) {\n      _on(el, 'dragover', this);\n\n      _on(el, 'dragenter', this);\n    }\n\n    touchDragOverListeners.push(this._onDragOver); // Restore sorting\n\n    options.store && this.sort(options.store.get(this));\n  }\n\n  KvSortable.prototype =\n  /** @lends KvSortable.prototype */\n  {\n    constructor: KvSortable,\n    _onTapStart: function _onTapStart(\n    /** Event|TouchEvent */\n    evt) {\n      var _this = this,\n          el = this.el,\n          options = this.options,\n          type = evt.type,\n          touch = evt.touches && evt.touches[0],\n          target = (touch || evt).target,\n          originalTarget = target,\n          filter = options.filter;\n\n      if (type === 'mousedown' && evt.button !== 0 || options.disabled) {\n        return; // only left button or enabled\n      }\n\n      target = _closest(target, options.draggable, el);\n\n      if (!target) {\n        return;\n      } // get the index of the dragged element within its parent\n\n\n      oldIndex = _index(target, options.draggable); // Check filter\n\n      if (typeof filter === 'function') {\n        if (filter.call(this, evt, target, this)) {\n          _dispatchEvent(_this, originalTarget, 'filter', target, el, oldIndex);\n\n          evt.preventDefault();\n          return; // cancel dnd\n        }\n      } else if (filter) {\n        filter = filter.split(',').some(function (criteria) {\n          criteria = _closest(originalTarget, criteria.trim(), el);\n\n          if (criteria) {\n            _dispatchEvent(_this, criteria, 'filter', target, el, oldIndex);\n\n            return true;\n          }\n        });\n\n        if (filter) {\n          evt.preventDefault();\n          return; // cancel dnd\n        }\n      }\n\n      if (options.handle && !_closest(originalTarget, options.handle, el)) {\n        return;\n      } // Prepare `dragstart`\n\n\n      this._prepareDragStart(evt, touch, target);\n    },\n    _prepareDragStart: function _prepareDragStart(\n    /** Event */\n    evt,\n    /** Touch */\n    touch,\n    /** HTMLElement */\n    target) {\n      var _this = this,\n          el = _this.el,\n          options = _this.options,\n          ownerDocument = el.ownerDocument,\n          dragStartFn;\n\n      if (target && !dragEl && target.parentNode === el) {\n        tapEvt = evt;\n        rootEl = el;\n        dragEl = target;\n        parentEl = dragEl.parentNode;\n        nextEl = dragEl.nextSibling;\n        activeGroup = options.group;\n\n        dragStartFn = function dragStartFn() {\n          // Delayed drag has been triggered\n          // we can re-enable the events: touchmove/mousemove\n          _this._disableDelayedDrag(); // Make the element draggable\n\n\n          dragEl.draggable = true; // Chosen item\n\n          _toggleClass(dragEl, _this.options.chosenClass, true); // Bind the events: dragstart/dragend\n\n\n          _this._triggerDragStart(touch);\n        }; // Disable \"draggable\"\n\n\n        options.ignore.split(',').forEach(function (criteria) {\n          _find(dragEl, criteria.trim(), _disableDraggable);\n        });\n\n        _on(ownerDocument, 'mouseup', _this._onDrop);\n\n        _on(ownerDocument, 'touchend', _this._onDrop);\n\n        _on(ownerDocument, 'touchcancel', _this._onDrop);\n\n        if (options.delay) {\n          // If the user moves the pointer or let go the click or touch\n          // before the delay has been reached:\n          // disable the delayed drag\n          _on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n\n          _on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n\n          _on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n\n          _on(ownerDocument, 'mousemove', _this._disableDelayedDrag);\n\n          _on(ownerDocument, 'touchmove', _this._disableDelayedDrag);\n\n          _this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n        } else {\n          dragStartFn();\n        }\n      }\n    },\n    _disableDelayedDrag: function _disableDelayedDrag() {\n      var ownerDocument = this.el.ownerDocument;\n      clearTimeout(this._dragStartTimer);\n\n      _off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n\n      _off(ownerDocument, 'touchend', this._disableDelayedDrag);\n\n      _off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n\n      _off(ownerDocument, 'mousemove', this._disableDelayedDrag);\n\n      _off(ownerDocument, 'touchmove', this._disableDelayedDrag);\n    },\n    _triggerDragStart: function _triggerDragStart(\n    /** Touch */\n    touch) {\n      if (touch) {\n        // Touch device support\n        tapEvt = {\n          target: dragEl,\n          clientX: touch.clientX,\n          clientY: touch.clientY\n        };\n\n        this._onDragStart(tapEvt, 'touch');\n      } else if (!this.nativeDraggable) {\n        this._onDragStart(tapEvt, true);\n      } else {\n        _on(dragEl, 'dragend', this);\n\n        _on(rootEl, 'dragstart', this._onDragStart);\n      }\n\n      try {\n        if (document.selection) {\n          document.selection.empty();\n        } else {\n          window.getSelection().removeAllRanges();\n        }\n      } catch (err) {}\n    },\n    _dragStarted: function _dragStarted() {\n      if (rootEl && dragEl) {\n        // Apply effect\n        _toggleClass(dragEl, this.options.ghostClass, true);\n\n        KvSortable.active = this; // Drag start event\n\n        _dispatchEvent(this, rootEl, 'start', dragEl, rootEl, oldIndex);\n      }\n    },\n    _emulateDragOver: function _emulateDragOver() {\n      if (touchEvt) {\n        if (this._lastX === touchEvt.clientX && this._lastY === touchEvt.clientY) {\n          return;\n        }\n\n        this._lastX = touchEvt.clientX;\n        this._lastY = touchEvt.clientY;\n\n        if (!supportCssPointerEvents) {\n          _css(ghostEl, 'display', 'none');\n        }\n\n        var target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY),\n            parent = target,\n            groupName = ' ' + this.options.group.name + '',\n            i = touchDragOverListeners.length;\n\n        if (parent) {\n          do {\n            if (parent[expando] && parent[expando].options.groups.indexOf(groupName) > -1) {\n              while (i--) {\n                touchDragOverListeners[i]({\n                  clientX: touchEvt.clientX,\n                  clientY: touchEvt.clientY,\n                  target: target,\n                  rootEl: parent\n                });\n              }\n\n              break;\n            }\n\n            target = parent; // store last element\n          }\n          /* jshint boss:true */\n          while (parent = parent.parentNode);\n        }\n\n        if (!supportCssPointerEvents) {\n          _css(ghostEl, 'display', '');\n        }\n      }\n    },\n    _onTouchMove: function _onTouchMove(\n    /**TouchEvent*/\n    evt) {\n      if (tapEvt) {\n        // only set the status to dragging, when we are actually dragging\n        if (!KvSortable.active) {\n          this._dragStarted();\n        } // as well as creating the ghost element on the document body\n\n\n        this._appendGhost();\n\n        var touch = evt.touches ? evt.touches[0] : evt,\n            dx = touch.clientX - tapEvt.clientX,\n            dy = touch.clientY - tapEvt.clientY,\n            translate3d = evt.touches ? 'translate3d(' + dx + 'px,' + dy + 'px,0)' : 'translate(' + dx + 'px,' + dy + 'px)';\n        moved = true;\n        touchEvt = touch;\n\n        _css(ghostEl, 'webkitTransform', translate3d);\n\n        _css(ghostEl, 'mozTransform', translate3d);\n\n        _css(ghostEl, 'msTransform', translate3d);\n\n        _css(ghostEl, 'transform', translate3d);\n\n        evt.preventDefault();\n      }\n    },\n    _appendGhost: function _appendGhost() {\n      if (!ghostEl) {\n        var rect = dragEl.getBoundingClientRect(),\n            css = _css(dragEl),\n            options = this.options,\n            ghostRect;\n\n        ghostEl = dragEl.cloneNode(true);\n\n        _toggleClass(ghostEl, options.ghostClass, false);\n\n        _toggleClass(ghostEl, options.fallbackClass, true);\n\n        _css(ghostEl, 'top', rect.top - parseInt(css.marginTop, 10));\n\n        _css(ghostEl, 'left', rect.left - parseInt(css.marginLeft, 10));\n\n        _css(ghostEl, 'width', rect.width);\n\n        _css(ghostEl, 'height', rect.height);\n\n        _css(ghostEl, 'opacity', '0.8');\n\n        _css(ghostEl, 'position', 'fixed');\n\n        _css(ghostEl, 'zIndex', '100000');\n\n        _css(ghostEl, 'pointerEvents', 'none');\n\n        options.fallbackOnBody && document.body.appendChild(ghostEl) || rootEl.appendChild(ghostEl); // Fixing dimensions.\n\n        ghostRect = ghostEl.getBoundingClientRect();\n\n        _css(ghostEl, 'width', rect.width * 2 - ghostRect.width);\n\n        _css(ghostEl, 'height', rect.height * 2 - ghostRect.height);\n      }\n    },\n    _onDragStart: function _onDragStart(\n    /**Event*/\n    evt,\n    /**boolean*/\n    useFallback) {\n      var dataTransfer = evt.dataTransfer,\n          options = this.options;\n\n      this._offUpEvents();\n\n      if (activeGroup.pull == 'clone') {\n        cloneEl = dragEl.cloneNode(true);\n\n        _css(cloneEl, 'display', 'none');\n\n        rootEl.insertBefore(cloneEl, dragEl);\n      }\n\n      if (useFallback) {\n        if (useFallback === 'touch') {\n          // Bind touch events\n          _on(document, 'touchmove', this._onTouchMove);\n\n          _on(document, 'touchend', this._onDrop);\n\n          _on(document, 'touchcancel', this._onDrop);\n        } else {\n          // Old brwoser\n          _on(document, 'mousemove', this._onTouchMove);\n\n          _on(document, 'mouseup', this._onDrop);\n        }\n\n        this._loopId = setInterval(this._emulateDragOver, 50);\n      } else {\n        if (dataTransfer) {\n          dataTransfer.effectAllowed = 'move';\n          options.setData && options.setData.call(this, dataTransfer, dragEl);\n        }\n\n        _on(document, 'drop', this);\n\n        setTimeout(this._dragStarted, 0);\n      }\n    },\n    _onDragOver: function _onDragOver(\n    /**Event*/\n    evt) {\n      var el = this.el,\n          target,\n          dragRect,\n          revert,\n          options = this.options,\n          group = options.group,\n          groupPut = group.put,\n          isOwner = activeGroup === group,\n          canSort = options.sort;\n\n      if (evt.preventDefault !== void 0) {\n        evt.preventDefault();\n        !options.dragoverBubble && evt.stopPropagation();\n      }\n\n      moved = true;\n\n      if (activeGroup && !options.disabled && (isOwner ? canSort || (revert = !rootEl.contains(dragEl)) // Reverting item into the original list\n      : activeGroup.pull && groupPut && (activeGroup.name === group.name || // by Name\n      groupPut.indexOf && ~groupPut.indexOf(activeGroup.name) // by Array\n      )) && (evt.rootEl === void 0 || evt.rootEl === this.el) // touch fallback\n      ) {\n          // Smart auto-scrolling\n          _autoScroll(evt, options, this.el);\n\n          if (_silent) {\n            return;\n          }\n\n          target = _closest(evt.target, options.draggable, el);\n          dragRect = dragEl.getBoundingClientRect();\n\n          if (revert) {\n            _cloneHide(true);\n\n            if (cloneEl || nextEl) {\n              rootEl.insertBefore(dragEl, cloneEl || nextEl);\n            } else if (!canSort) {\n              rootEl.appendChild(dragEl);\n            }\n\n            return;\n          }\n\n          if (el.children.length === 0 || el.children[0] === ghostEl || el === evt.target && (target = _ghostIsLast(el, evt))) {\n            if (target) {\n              if (target.animated) {\n                return;\n              }\n\n              targetRect = target.getBoundingClientRect();\n            }\n\n            _cloneHide(isOwner);\n\n            if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect) !== false) {\n              if (!dragEl.contains(el)) {\n                el.appendChild(dragEl);\n                parentEl = el; // actualization\n              }\n\n              this._animate(dragRect, dragEl);\n\n              target && this._animate(targetRect, target);\n            }\n          } else if (target && !target.animated && target !== dragEl && target.parentNode[expando] !== void 0) {\n            if (lastEl !== target) {\n              lastEl = target;\n              lastCSS = _css(target);\n              lastParentCSS = _css(target.parentNode);\n            }\n\n            var targetRect = target.getBoundingClientRect(),\n                width = targetRect.right - targetRect.left,\n                height = targetRect.bottom - targetRect.top,\n                floating = /left|right|inline/.test(lastCSS.cssFloat + lastCSS.display) || lastParentCSS.display == 'flex' && lastParentCSS['flex-direction'].indexOf('row') === 0,\n                isWide = target.offsetWidth > dragEl.offsetWidth,\n                isLong = target.offsetHeight > dragEl.offsetHeight,\n                halfway = (floating ? (evt.clientX - targetRect.left) / width : (evt.clientY - targetRect.top) / height) > 0.5,\n                nextSibling = target.nextElementSibling,\n                moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect),\n                after;\n\n            if (moveVector !== false) {\n              _silent = true;\n              setTimeout(_unsilent, 30);\n\n              _cloneHide(isOwner);\n\n              if (moveVector === 1 || moveVector === -1) {\n                after = moveVector === 1;\n              } else if (floating) {\n                var elTop = dragEl.offsetTop,\n                    tgTop = target.offsetTop;\n\n                if (elTop === tgTop) {\n                  after = target.previousElementSibling === dragEl && !isWide || halfway && isWide;\n                } else {\n                  after = tgTop > elTop;\n                }\n              } else {\n                after = nextSibling !== dragEl && !isLong || halfway && isLong;\n              }\n\n              if (!dragEl.contains(el)) {\n                if (after && !nextSibling) {\n                  el.appendChild(dragEl);\n                } else {\n                  target.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n                }\n              }\n\n              parentEl = dragEl.parentNode; // actualization\n\n              this._animate(dragRect, dragEl);\n\n              this._animate(targetRect, target);\n            }\n          }\n        }\n    },\n    _animate: function _animate(prevRect, target) {\n      var ms = this.options.animation;\n\n      if (ms) {\n        var currentRect = target.getBoundingClientRect();\n\n        _css(target, 'transition', 'none');\n\n        _css(target, 'transform', 'translate3d(' + (prevRect.left - currentRect.left) + 'px,' + (prevRect.top - currentRect.top) + 'px,0)');\n\n        target.offsetWidth; // repaint\n\n        _css(target, 'transition', 'all ' + ms + 'ms');\n\n        _css(target, 'transform', 'translate3d(0,0,0)');\n\n        clearTimeout(target.animated);\n        target.animated = setTimeout(function () {\n          _css(target, 'transition', '');\n\n          _css(target, 'transform', '');\n\n          target.animated = false;\n        }, ms);\n      }\n    },\n    _offUpEvents: function _offUpEvents() {\n      var ownerDocument = this.el.ownerDocument;\n\n      _off(document, 'touchmove', this._onTouchMove);\n\n      _off(ownerDocument, 'mouseup', this._onDrop);\n\n      _off(ownerDocument, 'touchend', this._onDrop);\n\n      _off(ownerDocument, 'touchcancel', this._onDrop);\n    },\n    _onDrop: function _onDrop(\n    /**Event*/\n    evt) {\n      var el = this.el,\n          options = this.options;\n      clearInterval(this._loopId);\n      clearInterval(autoScroll.pid);\n      clearTimeout(this._dragStartTimer); // Unbind events\n\n      _off(document, 'mousemove', this._onTouchMove);\n\n      if (this.nativeDraggable) {\n        _off(document, 'drop', this);\n\n        _off(el, 'dragstart', this._onDragStart);\n      }\n\n      this._offUpEvents();\n\n      if (evt) {\n        if (moved) {\n          evt.preventDefault();\n          !options.dropBubble && evt.stopPropagation();\n        }\n\n        ghostEl && ghostEl.parentNode.removeChild(ghostEl);\n\n        if (dragEl) {\n          if (this.nativeDraggable) {\n            _off(dragEl, 'dragend', this);\n          }\n\n          _disableDraggable(dragEl); // Remove class's\n\n\n          _toggleClass(dragEl, this.options.ghostClass, false);\n\n          _toggleClass(dragEl, this.options.chosenClass, false);\n\n          if (rootEl !== parentEl) {\n            newIndex = _index(dragEl, options.draggable);\n\n            if (newIndex >= 0) {\n              // drag from one list and drop into another\n              _dispatchEvent(null, parentEl, 'sort', dragEl, rootEl, oldIndex, newIndex);\n\n              _dispatchEvent(this, rootEl, 'sort', dragEl, rootEl, oldIndex, newIndex); // Add event\n\n\n              _dispatchEvent(null, parentEl, 'add', dragEl, rootEl, oldIndex, newIndex); // Remove event\n\n\n              _dispatchEvent(this, rootEl, 'remove', dragEl, rootEl, oldIndex, newIndex);\n            }\n          } else {\n            // Remove clone\n            cloneEl && cloneEl.parentNode.removeChild(cloneEl);\n\n            if (dragEl.nextSibling !== nextEl) {\n              // Get the index of the dragged element within its parent\n              newIndex = _index(dragEl, options.draggable);\n\n              if (newIndex >= 0) {\n                // drag & drop within the same list\n                _dispatchEvent(this, rootEl, 'update', dragEl, rootEl, oldIndex, newIndex);\n\n                _dispatchEvent(this, rootEl, 'sort', dragEl, rootEl, oldIndex, newIndex);\n              }\n            }\n          }\n\n          if (KvSortable.active) {\n            if (newIndex === null || newIndex === -1) {\n              newIndex = oldIndex;\n            }\n\n            _dispatchEvent(this, rootEl, 'end', dragEl, rootEl, oldIndex, newIndex); // Save sorting\n\n\n            this.save();\n          }\n        }\n      }\n\n      this._nulling();\n    },\n    _nulling: function _nulling() {\n      // Nulling\n      rootEl = dragEl = parentEl = ghostEl = nextEl = cloneEl = scrollEl = scrollParentEl = tapEvt = touchEvt = moved = newIndex = lastEl = lastCSS = activeGroup = KvSortable.active = null;\n    },\n    handleEvent: function handleEvent(\n    /**Event*/\n    evt) {\n      var type = evt.type;\n\n      if (type === 'dragover' || type === 'dragenter') {\n        if (dragEl) {\n          this._onDragOver(evt);\n\n          _globalDragOver(evt);\n        }\n      } else if (type === 'drop' || type === 'dragend') {\n        this._onDrop(evt);\n      }\n    },\n\n    /**\n     * Serializes the item into an array of string.\n     * @returns {String[]}\n     */\n    toArray: function toArray() {\n      var order = [],\n          el,\n          children = this.el.children,\n          i = 0,\n          n = children.length,\n          options = this.options;\n\n      for (; i < n; i++) {\n        el = children[i];\n\n        if (_closest(el, options.draggable, this.el)) {\n          order.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n        }\n      }\n\n      return order;\n    },\n\n    /**\n     * Sorts the elements according to the array.\n     * @param  {String[]}  order  order of the items\n     */\n    sort: function sort(order) {\n      var items = {},\n          rootEl = this.el;\n      this.toArray().forEach(function (id, i) {\n        var el = rootEl.children[i];\n\n        if (_closest(el, this.options.draggable, rootEl)) {\n          items[id] = el;\n        }\n      }, this);\n      order.forEach(function (id) {\n        if (items[id]) {\n          rootEl.removeChild(items[id]);\n          rootEl.appendChild(items[id]);\n        }\n      });\n    },\n\n    /**\n     * Save the current sorting\n     */\n    save: function save() {\n      var store = this.options.store;\n      store && store.set(this);\n    },\n\n    /**\n     * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\n     * @param   {HTMLElement}  el\n     * @param   {String}       [selector]  default: `options.draggable`\n     * @returns {HTMLElement|null}\n     */\n    closest: function closest(el, selector) {\n      return _closest(el, selector || this.options.draggable, this.el);\n    },\n\n    /**\n     * Set/get option\n     * @param   {string} name\n     * @param   {*}      [value]\n     * @returns {*}\n     */\n    option: function option(name, value) {\n      var options = this.options;\n\n      if (value === void 0) {\n        return options[name];\n      } else {\n        options[name] = value;\n\n        if (name === 'group') {\n          _prepareGroup(options);\n        }\n      }\n    },\n\n    /**\n     * Destroy\n     */\n    destroy: function destroy() {\n      var el = this.el;\n      el[expando] = null;\n\n      _off(el, 'mousedown', this._onTapStart);\n\n      _off(el, 'touchstart', this._onTapStart);\n\n      if (this.nativeDraggable) {\n        _off(el, 'dragover', this);\n\n        _off(el, 'dragenter', this);\n      } // Remove draggable attributes\n\n\n      Array.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n        el.removeAttribute('draggable');\n      });\n      touchDragOverListeners.splice(touchDragOverListeners.indexOf(this._onDragOver), 1);\n\n      this._onDrop();\n\n      this.el = el = null;\n    }\n  };\n\n  function _cloneHide(state) {\n    if (cloneEl && cloneEl.state !== state) {\n      _css(cloneEl, 'display', state ? 'none' : '');\n\n      !state && cloneEl.state && rootEl.insertBefore(cloneEl, dragEl);\n      cloneEl.state = state;\n    }\n  }\n\n  function _closest(\n  /**HTMLElement*/\n  el,\n  /**String*/\n  selector,\n  /**HTMLElement*/\n  ctx) {\n    if (el) {\n      ctx = ctx || document;\n\n      do {\n        if (selector === '>*' && el.parentNode === ctx || _matches(el, selector)) {\n          return el;\n        }\n      } while (el !== ctx && (el = el.parentNode));\n    }\n\n    return null;\n  }\n\n  function _globalDragOver(\n  /**Event*/\n  evt) {\n    if (evt.dataTransfer) {\n      evt.dataTransfer.dropEffect = 'move';\n    }\n\n    evt.preventDefault();\n  }\n\n  function _on(el, event, fn) {\n    el.addEventListener(event, fn, false);\n  }\n\n  function _off(el, event, fn) {\n    el.removeEventListener(event, fn, false);\n  }\n\n  function _toggleClass(el, name, state) {\n    if (el) {\n      if (el.classList) {\n        el.classList[state ? 'add' : 'remove'](name);\n      } else {\n        var className = (' ' + el.className + ' ').replace(RSPACE, ' ').replace(' ' + name + ' ', ' ');\n        el.className = (className + (state ? ' ' + name : '')).replace(RSPACE, ' ');\n      }\n    }\n  }\n\n  function _css(el, prop, val) {\n    var style = el && el.style;\n\n    if (style) {\n      if (val === void 0) {\n        if (document.defaultView && document.defaultView.getComputedStyle) {\n          val = document.defaultView.getComputedStyle(el, '');\n        } else if (el.currentStyle) {\n          val = el.currentStyle;\n        }\n\n        return prop === void 0 ? val : val[prop];\n      } else {\n        if (!(prop in style)) {\n          prop = '-webkit-' + prop;\n        }\n\n        style[prop] = val + (typeof val === 'string' ? '' : 'px');\n      }\n    }\n  }\n\n  function _find(ctx, tagName, iterator) {\n    if (ctx) {\n      var list = ctx.getElementsByTagName(tagName),\n          i = 0,\n          n = list.length;\n\n      if (iterator) {\n        for (; i < n; i++) {\n          iterator(list[i], i);\n        }\n      }\n\n      return list;\n    }\n\n    return [];\n  }\n\n  function _dispatchEvent(kvsortable, rootEl, name, targetEl, fromEl, startIndex, newIndex) {\n    var evt = document.createEvent('Event'),\n        options = (kvsortable || rootEl[expando]).options,\n        onName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);\n    evt.initEvent(name, true, true);\n    evt.to = rootEl;\n    evt.from = fromEl || rootEl;\n    evt.item = targetEl || rootEl;\n    evt.clone = cloneEl;\n    evt.oldIndex = startIndex;\n    evt.newIndex = newIndex;\n    rootEl.dispatchEvent(evt);\n\n    if (options[onName]) {\n      options[onName].call(kvsortable, evt);\n    }\n  }\n\n  function _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect) {\n    var evt,\n        kvsortable = fromEl[expando],\n        onMoveFn = kvsortable.options.onMove,\n        retVal;\n    evt = document.createEvent('Event');\n    evt.initEvent('move', true, true);\n    evt.to = toEl;\n    evt.from = fromEl;\n    evt.dragged = dragEl;\n    evt.draggedRect = dragRect;\n    evt.related = targetEl || toEl;\n    evt.relatedRect = targetRect || toEl.getBoundingClientRect();\n    fromEl.dispatchEvent(evt);\n\n    if (onMoveFn) {\n      retVal = onMoveFn.call(kvsortable, evt);\n    }\n\n    return retVal;\n  }\n\n  function _disableDraggable(el) {\n    el.draggable = false;\n  }\n\n  function _unsilent() {\n    _silent = false;\n  }\n  /** @returns {HTMLElement|false} */\n\n\n  function _ghostIsLast(el, evt) {\n    var lastEl = el.lastElementChild,\n        rect = lastEl.getBoundingClientRect();\n    return (evt.clientY - (rect.top + rect.height) > 5 || evt.clientX - (rect.right + rect.width) > 5) && lastEl; // min delta\n  }\n  /**\n   * Generate id\n   * @param   {HTMLElement} el\n   * @returns {String}\n   * @private\n   */\n\n\n  function _generateId(el) {\n    var str = el.tagName + el.className + el.src + el.href + el.textContent,\n        i = str.length,\n        sum = 0;\n\n    while (i--) {\n      sum += str.charCodeAt(i);\n    }\n\n    return sum.toString(36);\n  }\n  /**\n   * Returns the index of an element within its parent for a selected set of\n   * elements\n   * @param  {HTMLElement} el\n   * @param  {selector} selector\n   * @return {number}\n   */\n\n\n  function _index(el, selector) {\n    var index = 0;\n\n    if (!el || !el.parentNode) {\n      return -1;\n    }\n\n    while (el && (el = el.previousElementSibling)) {\n      if (el.nodeName.toUpperCase() !== 'TEMPLATE' && _matches(el, selector)) {\n        index++;\n      }\n    }\n\n    return index;\n  }\n\n  function _matches(\n  /**HTMLElement*/\n  el,\n  /**String*/\n  selector) {\n    if (el) {\n      selector = selector.split('.');\n      var tag = selector.shift().toUpperCase(),\n          re = new RegExp('\\\\s(' + selector.join('|') + ')(?=\\\\s)', 'g');\n      return (tag === '' || el.nodeName.toUpperCase() == tag) && (!selector.length || ((' ' + el.className + ' ').match(re) || []).length == selector.length);\n    }\n\n    return false;\n  }\n\n  function _throttle(callback, ms) {\n    var args, _this;\n\n    return function () {\n      if (args === void 0) {\n        args = arguments;\n        _this = this;\n        setTimeout(function () {\n          if (args.length === 1) {\n            callback.call(_this, args[0]);\n          } else {\n            callback.apply(_this, args);\n          }\n\n          args = void 0;\n        }, ms);\n      }\n    };\n  }\n\n  function _extend(dst, src) {\n    if (dst && src) {\n      for (var key in src) {\n        if (src.hasOwnProperty(key)) {\n          dst[key] = src[key];\n        }\n      }\n    }\n\n    return dst;\n  } // Export utils\n\n\n  KvSortable.utils = {\n    on: _on,\n    off: _off,\n    css: _css,\n    find: _find,\n    is: function is(el, selector) {\n      return !!_closest(el, selector, el);\n    },\n    extend: _extend,\n    throttle: _throttle,\n    closest: _closest,\n    toggleClass: _toggleClass,\n    index: _index\n  };\n  /**\n   * Create kvsortable instance\n   * @param {HTMLElement}  el\n   * @param {Object}      [options]\n   */\n\n  KvSortable.create = function (el, options) {\n    return new KvSortable(el, options);\n  }; // Export\n\n\n  KvSortable.version = '1.4.2';\n  return KvSortable;\n});\n/**\n * jQuery plugin for KvSortable\n * @author\tRubaXa   <trash@rubaxa.org>\n * @license MIT\n */\n\n\n(function (factory) {\n  \"use strict\";\n\n  if (typeof define === \"function\" && define.amd) {\n    define([\"jquery\"], factory);\n  } else {\n    /* jshint sub:true */\n    factory(jQuery);\n  }\n})(function ($) {\n  \"use strict\";\n  /* CODE */\n\n  /**\n   * jQuery plugin for KvSortable\n   * @param   {Object|String} options\n   * @param   {..*}           [args]\n   * @returns {jQuery|*}\n   */\n\n  $.fn.kvsortable = function (options) {\n    var retVal,\n        args = arguments;\n    this.each(function () {\n      var $el = $(this),\n          kvsortable = $el.data('kvsortable');\n\n      if (!kvsortable && (options instanceof Object || !options)) {\n        kvsortable = new KvSortable(this, options);\n        $el.data('kvsortable', kvsortable);\n      }\n\n      if (kvsortable) {\n        if (options === 'widget') {\n          return kvsortable;\n        } else if (options === 'destroy') {\n          kvsortable.destroy();\n          $el.removeData('kvsortable');\n        } else if (typeof kvsortable[options] === 'function') {\n          retVal = kvsortable[options].apply(kvsortable, [].slice.call(args, 1));\n        } else if (options in kvsortable.options) {\n          retVal = kvsortable.option.apply(kvsortable, args);\n        }\n      }\n    });\n    return retVal === void 0 ? this : retVal;\n  };\n});","map":{"version":3,"sources":["/Users/david/Winner-Stock/app/javascript/sortable.js"],"names":["factory","define","amd","module","exports","Package","KvSortable","window","document","Error","dragEl","parentEl","ghostEl","cloneEl","rootEl","nextEl","scrollEl","scrollParentEl","lastEl","lastCSS","lastParentCSS","oldIndex","newIndex","activeGroup","autoScroll","tapEvt","touchEvt","moved","RSPACE","expando","Date","getTime","win","parseInt","supportDraggable","createElement","supportCssPointerEvents","el","style","cssText","pointerEvents","_silent","abs","Math","slice","touchDragOverListeners","_autoScroll","_throttle","evt","options","scroll","rect","sens","scrollSensitivity","speed","scrollSpeed","x","clientX","y","clientY","winWidth","innerWidth","winHeight","innerHeight","vx","vy","offsetWidth","scrollWidth","offsetHeight","scrollHeight","parentNode","getBoundingClientRect","right","left","bottom","top","clearInterval","pid","setInterval","scrollTo","pageXOffset","pageYOffset","scrollTop","scrollLeft","_prepareGroup","group","name","forEach","key","groups","put","join","nodeType","toString","call","_extend","defaults","random","sort","disabled","store","handle","draggable","test","nodeName","ghostClass","chosenClass","ignore","filter","animation","setData","dataTransfer","textContent","dropBubble","dragoverBubble","dataIdAttr","delay","forceFallback","fallbackClass","fallbackOnBody","fn","charAt","bind","nativeDraggable","_on","_onTapStart","push","_onDragOver","get","prototype","constructor","_this","type","touch","touches","target","originalTarget","button","_closest","_index","_dispatchEvent","preventDefault","split","some","criteria","trim","_prepareDragStart","ownerDocument","dragStartFn","nextSibling","_disableDelayedDrag","_toggleClass","_triggerDragStart","_find","_disableDraggable","_onDrop","_dragStartTimer","setTimeout","clearTimeout","_off","_onDragStart","selection","empty","getSelection","removeAllRanges","err","_dragStarted","active","_emulateDragOver","_lastX","_lastY","_css","elementFromPoint","parent","groupName","i","length","indexOf","_onTouchMove","_appendGhost","dx","dy","translate3d","css","ghostRect","cloneNode","marginTop","marginLeft","width","height","body","appendChild","useFallback","_offUpEvents","pull","insertBefore","_loopId","effectAllowed","dragRect","revert","groupPut","isOwner","canSort","stopPropagation","contains","_cloneHide","children","_ghostIsLast","animated","targetRect","_onMove","_animate","floating","cssFloat","display","isWide","isLong","halfway","nextElementSibling","moveVector","after","_unsilent","elTop","offsetTop","tgTop","previousElementSibling","prevRect","ms","currentRect","removeChild","save","_nulling","handleEvent","_globalDragOver","toArray","order","n","getAttribute","_generateId","items","id","set","closest","selector","option","value","destroy","Array","querySelectorAll","removeAttribute","splice","state","ctx","_matches","dropEffect","event","addEventListener","removeEventListener","classList","className","replace","prop","val","defaultView","getComputedStyle","currentStyle","tagName","iterator","list","getElementsByTagName","kvsortable","targetEl","fromEl","startIndex","createEvent","onName","toUpperCase","substr","initEvent","to","from","item","clone","dispatchEvent","toEl","onMoveFn","onMove","retVal","dragged","draggedRect","related","relatedRect","lastElementChild","str","src","href","sum","charCodeAt","index","tag","shift","re","RegExp","match","callback","args","arguments","apply","dst","hasOwnProperty","utils","on","off","find","is","extend","throttle","toggleClass","create","version","jQuery","$","each","$el","data","Object","removeData"],"mappings":"AAAA;;;;;;;;AAQA,CAAC,UAAUA,OAAV,EAAmB;AACnB;;AAEA,MAAI,OAAOC,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,CAACC,GAA3C,EAAgD;AAC/CD,IAAAA,MAAM,CAACD,OAAD,CAAN;AACA,GAFD,MAGK,IAAI,OAAOG,MAAP,IAAiB,WAAjB,IAAgC,OAAOA,MAAM,CAACC,OAAd,IAAyB,WAA7D,EAA0E;AAC9ED,IAAAA,MAAM,CAACC,OAAP,GAAiBJ,OAAO,EAAxB;AACA,GAFI,MAGA,IAAI,OAAOK,OAAP,KAAmB,WAAvB,EAAoC;AACxCC,IAAAA,UAAU,GAAGN,OAAO,EAApB,CADwC,CACf;AACzB,GAFI,MAGA;AACJ;AACAO,IAAAA,MAAM,CAAC,YAAD,CAAN,GAAuBP,OAAO,EAA9B;AACA;AACD,CAhBD,EAgBG,YAAY;AACd;;AAEA,MAAI,OAAOO,MAAP,KAAkB,WAAlB,IAAiC,OAAOA,MAAM,CAACC,QAAd,IAA0B,WAA/D,EAA4E;AAC3E,WAAO,YAAW;AACjB,YAAM,IAAIC,KAAJ,CAAW,+CAAX,CAAN;AACA,KAFD;AAGA;;AAED,MAAIC,MAAJ;AAAA,MACCC,QADD;AAAA,MAECC,OAFD;AAAA,MAGCC,OAHD;AAAA,MAICC,MAJD;AAAA,MAKCC,MALD;AAAA,MAOCC,QAPD;AAAA,MAQCC,cARD;AAAA,MAUCC,MAVD;AAAA,MAWCC,OAXD;AAAA,MAYCC,aAZD;AAAA,MAcCC,QAdD;AAAA,MAeCC,QAfD;AAAA,MAiBCC,WAjBD;AAAA,MAkBCC,UAAU,GAAG,EAlBd;AAAA,MAoBCC,MApBD;AAAA,MAqBCC,QArBD;AAAA,MAuBCC,KAvBD;;AAyBC;AACAC,EAAAA,MAAM,GAAG,MA1BV;AAAA,MA4BCC,OAAO,GAAG,eAAgB,IAAIC,IAAJ,EAAD,CAAWC,OAAX,EA5B1B;AAAA,MA8BCC,GAAG,GAAGzB,MA9BP;AAAA,MA+BCC,QAAQ,GAAGwB,GAAG,CAACxB,QA/BhB;AAAA,MAgCCyB,QAAQ,GAAGD,GAAG,CAACC,QAhChB;AAAA,MAkCCC,gBAAgB,GAAG,CAAC,EAAE,eAAe1B,QAAQ,CAAC2B,aAAT,CAAuB,KAAvB,CAAjB,CAlCrB;AAAA,MAmCCC,uBAAuB,GAAI,UAAUC,EAAV,EAAc;AACxCA,IAAAA,EAAE,GAAG7B,QAAQ,CAAC2B,aAAT,CAAuB,GAAvB,CAAL;AACAE,IAAAA,EAAE,CAACC,KAAH,CAASC,OAAT,GAAmB,qBAAnB;AACA,WAAOF,EAAE,CAACC,KAAH,CAASE,aAAT,KAA2B,MAAlC;AACA,GAJyB,EAnC3B;AAAA,MAyCCC,OAAO,GAAG,KAzCX;AAAA,MA2CCC,GAAG,GAAGC,IAAI,CAACD,GA3CZ;AAAA,MA4CCE,KAAK,GAAG,GAAGA,KA5CZ;AAAA,MA8CCC,sBAAsB,GAAG,EA9C1B;AAAA,MAgDCC,WAAW,GAAGC,SAAS,CAAC;AAAU;AAAUC,EAAAA,GAApB;AAAyB;AAAWC,EAAAA,OAApC;AAA6C;AAAgBnC,EAAAA,MAA7D,EAAqE;AAC5F;AACA,QAAIA,MAAM,IAAImC,OAAO,CAACC,MAAtB,EAA8B;AAC7B,UAAIb,EAAJ;AAAA,UACCc,IADD;AAAA,UAECC,IAAI,GAAGH,OAAO,CAACI,iBAFhB;AAAA,UAGCC,KAAK,GAAGL,OAAO,CAACM,WAHjB;AAAA,UAKCC,CAAC,GAAGR,GAAG,CAACS,OALT;AAAA,UAMCC,CAAC,GAAGV,GAAG,CAACW,OANT;AAAA,UAQCC,QAAQ,GAAGrD,MAAM,CAACsD,UARnB;AAAA,UASCC,SAAS,GAAGvD,MAAM,CAACwD,WATpB;AAAA,UAWCC,EAXD;AAAA,UAYCC,EAZD,CAD6B,CAgB7B;;AACA,UAAIhD,cAAc,KAAKH,MAAvB,EAA+B;AAC9BE,QAAAA,QAAQ,GAAGiC,OAAO,CAACC,MAAnB;AACAjC,QAAAA,cAAc,GAAGH,MAAjB;;AAEA,YAAIE,QAAQ,KAAK,IAAjB,EAAuB;AACtBA,UAAAA,QAAQ,GAAGF,MAAX;;AAEA,aAAG;AACF,gBAAKE,QAAQ,CAACkD,WAAT,GAAuBlD,QAAQ,CAACmD,WAAjC,IACFnD,QAAQ,CAACoD,YAAT,GAAwBpD,QAAQ,CAACqD,YADnC,EAEE;AACD;AACA;AACD;;AACA,WAPD,QAOSrD,QAAQ,GAAGA,QAAQ,CAACsD,UAP7B;AAQA;AACD;;AAED,UAAItD,QAAJ,EAAc;AACbqB,QAAAA,EAAE,GAAGrB,QAAL;AACAmC,QAAAA,IAAI,GAAGnC,QAAQ,CAACuD,qBAAT,EAAP;AACAP,QAAAA,EAAE,GAAG,CAACtB,GAAG,CAACS,IAAI,CAACqB,KAAL,GAAahB,CAAd,CAAH,IAAuBJ,IAAxB,KAAiCV,GAAG,CAACS,IAAI,CAACsB,IAAL,GAAYjB,CAAb,CAAH,IAAsBJ,IAAvD,CAAL;AACAa,QAAAA,EAAE,GAAG,CAACvB,GAAG,CAACS,IAAI,CAACuB,MAAL,GAAchB,CAAf,CAAH,IAAwBN,IAAzB,KAAkCV,GAAG,CAACS,IAAI,CAACwB,GAAL,GAAWjB,CAAZ,CAAH,IAAqBN,IAAvD,CAAL;AACA;;AAGD,UAAI,EAAEY,EAAE,IAAIC,EAAR,CAAJ,EAAiB;AAChBD,QAAAA,EAAE,GAAG,CAACJ,QAAQ,GAAGJ,CAAX,IAAgBJ,IAAjB,KAA0BI,CAAC,IAAIJ,IAA/B,CAAL;AACAa,QAAAA,EAAE,GAAG,CAACH,SAAS,GAAGJ,CAAZ,IAAiBN,IAAlB,KAA2BM,CAAC,IAAIN,IAAhC,CAAL;AAEA;;AACA,SAACY,EAAE,IAAIC,EAAP,MAAe5B,EAAE,GAAGL,GAApB;AACA;;AAGD,UAAIR,UAAU,CAACwC,EAAX,KAAkBA,EAAlB,IAAwBxC,UAAU,CAACyC,EAAX,KAAkBA,EAA1C,IAAgDzC,UAAU,CAACa,EAAX,KAAkBA,EAAtE,EAA0E;AACzEb,QAAAA,UAAU,CAACa,EAAX,GAAgBA,EAAhB;AACAb,QAAAA,UAAU,CAACwC,EAAX,GAAgBA,EAAhB;AACAxC,QAAAA,UAAU,CAACyC,EAAX,GAAgBA,EAAhB;AAEAW,QAAAA,aAAa,CAACpD,UAAU,CAACqD,GAAZ,CAAb;;AAEA,YAAIxC,EAAJ,EAAQ;AACPb,UAAAA,UAAU,CAACqD,GAAX,GAAiBC,WAAW,CAAC,YAAY;AACxC,gBAAIzC,EAAE,KAAKL,GAAX,EAAgB;AACfA,cAAAA,GAAG,CAAC+C,QAAJ,CAAa/C,GAAG,CAACgD,WAAJ,GAAkBhB,EAAE,GAAGV,KAApC,EAA2CtB,GAAG,CAACiD,WAAJ,GAAkBhB,EAAE,GAAGX,KAAlE;AACA,aAFD,MAEO;AACNW,cAAAA,EAAE,KAAK5B,EAAE,CAAC6C,SAAH,IAAgBjB,EAAE,GAAGX,KAA1B,CAAF;AACAU,cAAAA,EAAE,KAAK3B,EAAE,CAAC8C,UAAH,IAAiBnB,EAAE,GAAGV,KAA3B,CAAF;AACA;AACD,WAP2B,EAOzB,EAPyB,CAA5B;AAQA;AACD;AACD;AACD,GAzEsB,EAyEpB,EAzEoB,CAhDxB;AAAA,MA2HC8B,aAAa,GAAG,SAAhBA,aAAgB,CAAUnC,OAAV,EAAmB;AAClC,QAAIoC,KAAK,GAAGpC,OAAO,CAACoC,KAApB;;AAEA,QAAI,CAACA,KAAD,IAAU,OAAOA,KAAP,IAAgB,QAA9B,EAAwC;AACvCA,MAAAA,KAAK,GAAGpC,OAAO,CAACoC,KAAR,GAAgB;AAACC,QAAAA,IAAI,EAAED;AAAP,OAAxB;AACA;;AAED,KAAC,MAAD,EAAS,KAAT,EAAgBE,OAAhB,CAAwB,UAAUC,GAAV,EAAe;AACtC,UAAI,EAAEA,GAAG,IAAIH,KAAT,CAAJ,EAAqB;AACpBA,QAAAA,KAAK,CAACG,GAAD,CAAL,GAAa,IAAb;AACA;AACD,KAJD;AAMAvC,IAAAA,OAAO,CAACwC,MAAR,GAAiB,MAAMJ,KAAK,CAACC,IAAZ,IAAoBD,KAAK,CAACK,GAAN,CAAUC,IAAV,GAAiB,MAAMN,KAAK,CAACK,GAAN,CAAUC,IAAV,CAAe,GAAf,CAAvB,GAA6C,EAAjE,IAAuE,GAAxF;AACA,GAzIF;AA8IA;;;;;;;AAKA,WAASrF,UAAT,CAAoB+B,EAApB,EAAwBY,OAAxB,EAAiC;AAChC,QAAI,EAAEZ,EAAE,IAAIA,EAAE,CAACuD,QAAT,IAAqBvD,EAAE,CAACuD,QAAH,KAAgB,CAAvC,CAAJ,EAA+C;AAC9C,YAAM,mDAAmD,GAAGC,QAAH,CAAYC,IAAZ,CAAiBzD,EAAjB,CAAzD;AACA;;AAED,SAAKA,EAAL,GAAUA,EAAV,CALgC,CAKlB;;AACd,SAAKY,OAAL,GAAeA,OAAO,GAAG8C,OAAO,CAAC,EAAD,EAAK9C,OAAL,CAAhC,CANgC,CAShC;;AACAZ,IAAAA,EAAE,CAACR,OAAD,CAAF,GAAc,IAAd,CAVgC,CAahC;;AACA,QAAImE,QAAQ,GAAG;AACdX,MAAAA,KAAK,EAAE1C,IAAI,CAACsD,MAAL,EADO;AAEdC,MAAAA,IAAI,EAAE,IAFQ;AAGdC,MAAAA,QAAQ,EAAE,KAHI;AAIdC,MAAAA,KAAK,EAAE,IAJO;AAKdC,MAAAA,MAAM,EAAE,IALM;AAMdnD,MAAAA,MAAM,EAAE,IANM;AAOdG,MAAAA,iBAAiB,EAAE,EAPL;AAQdE,MAAAA,WAAW,EAAE,EARC;AASd+C,MAAAA,SAAS,EAAE,SAASC,IAAT,CAAclE,EAAE,CAACmE,QAAjB,IAA6B,IAA7B,GAAoC,IATjC;AAUdC,MAAAA,UAAU,EAAE,kBAVE;AAWdC,MAAAA,WAAW,EAAE,mBAXC;AAYdC,MAAAA,MAAM,EAAE,QAZM;AAadC,MAAAA,MAAM,EAAE,IAbM;AAcdC,MAAAA,SAAS,EAAE,CAdG;AAedC,MAAAA,OAAO,EAAE,iBAAUC,YAAV,EAAwBrG,MAAxB,EAAgC;AACxCqG,QAAAA,YAAY,CAACD,OAAb,CAAqB,MAArB,EAA6BpG,MAAM,CAACsG,WAApC;AACA,OAjBa;AAkBdC,MAAAA,UAAU,EAAE,KAlBE;AAmBdC,MAAAA,cAAc,EAAE,KAnBF;AAoBdC,MAAAA,UAAU,EAAE,SApBE;AAqBdC,MAAAA,KAAK,EAAE,CArBO;AAsBdC,MAAAA,aAAa,EAAE,KAtBD;AAuBdC,MAAAA,aAAa,EAAE,qBAvBD;AAwBdC,MAAAA,cAAc,EAAE;AAxBF,KAAf,CAdgC,CA0ChC;;AACA,SAAK,IAAIjC,IAAT,IAAiBU,QAAjB,EAA2B;AAC1B,QAAEV,IAAI,IAAIrC,OAAV,MAAuBA,OAAO,CAACqC,IAAD,CAAP,GAAgBU,QAAQ,CAACV,IAAD,CAA/C;AACA;;AAEDF,IAAAA,aAAa,CAACnC,OAAD,CAAb,CA/CgC,CAiDhC;;;AACA,SAAK,IAAIuE,EAAT,IAAe,IAAf,EAAqB;AACpB,UAAIA,EAAE,CAACC,MAAH,CAAU,CAAV,MAAiB,GAArB,EAA0B;AACzB,aAAKD,EAAL,IAAW,KAAKA,EAAL,EAASE,IAAT,CAAc,IAAd,CAAX;AACA;AACD,KAtD+B,CAwDhC;;;AACA,SAAKC,eAAL,GAAuB1E,OAAO,CAACoE,aAAR,GAAwB,KAAxB,GAAgCnF,gBAAvD,CAzDgC,CA2DhC;;AACA0F,IAAAA,GAAG,CAACvF,EAAD,EAAK,WAAL,EAAkB,KAAKwF,WAAvB,CAAH;;AACAD,IAAAA,GAAG,CAACvF,EAAD,EAAK,YAAL,EAAmB,KAAKwF,WAAxB,CAAH;;AAEA,QAAI,KAAKF,eAAT,EAA0B;AACzBC,MAAAA,GAAG,CAACvF,EAAD,EAAK,UAAL,EAAiB,IAAjB,CAAH;;AACAuF,MAAAA,GAAG,CAACvF,EAAD,EAAK,WAAL,EAAkB,IAAlB,CAAH;AACA;;AAEDQ,IAAAA,sBAAsB,CAACiF,IAAvB,CAA4B,KAAKC,WAAjC,EApEgC,CAsEhC;;AACA9E,IAAAA,OAAO,CAACmD,KAAR,IAAiB,KAAKF,IAAL,CAAUjD,OAAO,CAACmD,KAAR,CAAc4B,GAAd,CAAkB,IAAlB,CAAV,CAAjB;AACA;;AAGD1H,EAAAA,UAAU,CAAC2H,SAAX;AAAuB;AAAmC;AACzDC,IAAAA,WAAW,EAAE5H,UAD4C;AAGzDuH,IAAAA,WAAW,EAAE;AAAU;AAAuB7E,IAAAA,GAAjC,EAAsC;AAClD,UAAImF,KAAK,GAAG,IAAZ;AAAA,UACC9F,EAAE,GAAG,KAAKA,EADX;AAAA,UAECY,OAAO,GAAG,KAAKA,OAFhB;AAAA,UAGCmF,IAAI,GAAGpF,GAAG,CAACoF,IAHZ;AAAA,UAICC,KAAK,GAAGrF,GAAG,CAACsF,OAAJ,IAAetF,GAAG,CAACsF,OAAJ,CAAY,CAAZ,CAJxB;AAAA,UAKCC,MAAM,GAAG,CAACF,KAAK,IAAIrF,GAAV,EAAeuF,MALzB;AAAA,UAMCC,cAAc,GAAGD,MANlB;AAAA,UAOC3B,MAAM,GAAG3D,OAAO,CAAC2D,MAPlB;;AAUA,UAAIwB,IAAI,KAAK,WAAT,IAAwBpF,GAAG,CAACyF,MAAJ,KAAe,CAAvC,IAA4CxF,OAAO,CAACkD,QAAxD,EAAkE;AACjE,eADiE,CACzD;AACR;;AAEDoC,MAAAA,MAAM,GAAGG,QAAQ,CAACH,MAAD,EAAStF,OAAO,CAACqD,SAAjB,EAA4BjE,EAA5B,CAAjB;;AAEA,UAAI,CAACkG,MAAL,EAAa;AACZ;AACA,OAnBiD,CAqBlD;;;AACAlH,MAAAA,QAAQ,GAAGsH,MAAM,CAACJ,MAAD,EAAStF,OAAO,CAACqD,SAAjB,CAAjB,CAtBkD,CAwBlD;;AACA,UAAI,OAAOM,MAAP,KAAkB,UAAtB,EAAkC;AACjC,YAAIA,MAAM,CAACd,IAAP,CAAY,IAAZ,EAAkB9C,GAAlB,EAAuBuF,MAAvB,EAA+B,IAA/B,CAAJ,EAA0C;AACzCK,UAAAA,cAAc,CAACT,KAAD,EAAQK,cAAR,EAAwB,QAAxB,EAAkCD,MAAlC,EAA0ClG,EAA1C,EAA8ChB,QAA9C,CAAd;;AACA2B,UAAAA,GAAG,CAAC6F,cAAJ;AACA,iBAHyC,CAGjC;AACR;AACD,OAND,MAOK,IAAIjC,MAAJ,EAAY;AAChBA,QAAAA,MAAM,GAAGA,MAAM,CAACkC,KAAP,CAAa,GAAb,EAAkBC,IAAlB,CAAuB,UAAUC,QAAV,EAAoB;AACnDA,UAAAA,QAAQ,GAAGN,QAAQ,CAACF,cAAD,EAAiBQ,QAAQ,CAACC,IAAT,EAAjB,EAAkC5G,EAAlC,CAAnB;;AAEA,cAAI2G,QAAJ,EAAc;AACbJ,YAAAA,cAAc,CAACT,KAAD,EAAQa,QAAR,EAAkB,QAAlB,EAA4BT,MAA5B,EAAoClG,EAApC,EAAwChB,QAAxC,CAAd;;AACA,mBAAO,IAAP;AACA;AACD,SAPQ,CAAT;;AASA,YAAIuF,MAAJ,EAAY;AACX5D,UAAAA,GAAG,CAAC6F,cAAJ;AACA,iBAFW,CAEH;AACR;AACD;;AAGD,UAAI5F,OAAO,CAACoD,MAAR,IAAkB,CAACqC,QAAQ,CAACF,cAAD,EAAiBvF,OAAO,CAACoD,MAAzB,EAAiChE,EAAjC,CAA/B,EAAqE;AACpE;AACA,OAnDiD,CAsDlD;;;AACA,WAAK6G,iBAAL,CAAuBlG,GAAvB,EAA4BqF,KAA5B,EAAmCE,MAAnC;AACA,KA3DwD;AA6DzDW,IAAAA,iBAAiB,EAAE;AAAU;AAAYlG,IAAAA,GAAtB;AAA2B;AAAYqF,IAAAA,KAAvC;AAA8C;AAAkBE,IAAAA,MAAhE,EAAwE;AAC1F,UAAIJ,KAAK,GAAG,IAAZ;AAAA,UACC9F,EAAE,GAAG8F,KAAK,CAAC9F,EADZ;AAAA,UAECY,OAAO,GAAGkF,KAAK,CAAClF,OAFjB;AAAA,UAGCkG,aAAa,GAAG9G,EAAE,CAAC8G,aAHpB;AAAA,UAICC,WAJD;;AAMA,UAAIb,MAAM,IAAI,CAAC7H,MAAX,IAAsB6H,MAAM,CAACjE,UAAP,KAAsBjC,EAAhD,EAAqD;AACpDZ,QAAAA,MAAM,GAAGuB,GAAT;AAEAlC,QAAAA,MAAM,GAAGuB,EAAT;AACA3B,QAAAA,MAAM,GAAG6H,MAAT;AACA5H,QAAAA,QAAQ,GAAGD,MAAM,CAAC4D,UAAlB;AACAvD,QAAAA,MAAM,GAAGL,MAAM,CAAC2I,WAAhB;AACA9H,QAAAA,WAAW,GAAG0B,OAAO,CAACoC,KAAtB;;AAEA+D,QAAAA,WAAW,GAAG,uBAAY;AACzB;AACA;AACAjB,UAAAA,KAAK,CAACmB,mBAAN,GAHyB,CAKzB;;;AACA5I,UAAAA,MAAM,CAAC4F,SAAP,GAAmB,IAAnB,CANyB,CAQzB;;AACAiD,UAAAA,YAAY,CAAC7I,MAAD,EAASyH,KAAK,CAAClF,OAAN,CAAcyD,WAAvB,EAAoC,IAApC,CAAZ,CATyB,CAWzB;;;AACAyB,UAAAA,KAAK,CAACqB,iBAAN,CAAwBnB,KAAxB;AACA,SAbD,CAToD,CAwBpD;;;AACApF,QAAAA,OAAO,CAAC0D,MAAR,CAAemC,KAAf,CAAqB,GAArB,EAA0BvD,OAA1B,CAAkC,UAAUyD,QAAV,EAAoB;AACrDS,UAAAA,KAAK,CAAC/I,MAAD,EAASsI,QAAQ,CAACC,IAAT,EAAT,EAA0BS,iBAA1B,CAAL;AACA,SAFD;;AAIA9B,QAAAA,GAAG,CAACuB,aAAD,EAAgB,SAAhB,EAA2BhB,KAAK,CAACwB,OAAjC,CAAH;;AACA/B,QAAAA,GAAG,CAACuB,aAAD,EAAgB,UAAhB,EAA4BhB,KAAK,CAACwB,OAAlC,CAAH;;AACA/B,QAAAA,GAAG,CAACuB,aAAD,EAAgB,aAAhB,EAA+BhB,KAAK,CAACwB,OAArC,CAAH;;AAEA,YAAI1G,OAAO,CAACmE,KAAZ,EAAmB;AAClB;AACA;AACA;AACAQ,UAAAA,GAAG,CAACuB,aAAD,EAAgB,SAAhB,EAA2BhB,KAAK,CAACmB,mBAAjC,CAAH;;AACA1B,UAAAA,GAAG,CAACuB,aAAD,EAAgB,UAAhB,EAA4BhB,KAAK,CAACmB,mBAAlC,CAAH;;AACA1B,UAAAA,GAAG,CAACuB,aAAD,EAAgB,aAAhB,EAA+BhB,KAAK,CAACmB,mBAArC,CAAH;;AACA1B,UAAAA,GAAG,CAACuB,aAAD,EAAgB,WAAhB,EAA6BhB,KAAK,CAACmB,mBAAnC,CAAH;;AACA1B,UAAAA,GAAG,CAACuB,aAAD,EAAgB,WAAhB,EAA6BhB,KAAK,CAACmB,mBAAnC,CAAH;;AAEAnB,UAAAA,KAAK,CAACyB,eAAN,GAAwBC,UAAU,CAACT,WAAD,EAAcnG,OAAO,CAACmE,KAAtB,CAAlC;AACA,SAXD,MAWO;AACNgC,UAAAA,WAAW;AACX;AACD;AACD,KApHwD;AAsHzDE,IAAAA,mBAAmB,EAAE,+BAAY;AAChC,UAAIH,aAAa,GAAG,KAAK9G,EAAL,CAAQ8G,aAA5B;AAEAW,MAAAA,YAAY,CAAC,KAAKF,eAAN,CAAZ;;AACAG,MAAAA,IAAI,CAACZ,aAAD,EAAgB,SAAhB,EAA2B,KAAKG,mBAAhC,CAAJ;;AACAS,MAAAA,IAAI,CAACZ,aAAD,EAAgB,UAAhB,EAA4B,KAAKG,mBAAjC,CAAJ;;AACAS,MAAAA,IAAI,CAACZ,aAAD,EAAgB,aAAhB,EAA+B,KAAKG,mBAApC,CAAJ;;AACAS,MAAAA,IAAI,CAACZ,aAAD,EAAgB,WAAhB,EAA6B,KAAKG,mBAAlC,CAAJ;;AACAS,MAAAA,IAAI,CAACZ,aAAD,EAAgB,WAAhB,EAA6B,KAAKG,mBAAlC,CAAJ;AACA,KA/HwD;AAiIzDE,IAAAA,iBAAiB,EAAE;AAAU;AAAYnB,IAAAA,KAAtB,EAA6B;AAC/C,UAAIA,KAAJ,EAAW;AACV;AACA5G,QAAAA,MAAM,GAAG;AACR8G,UAAAA,MAAM,EAAE7H,MADA;AAER+C,UAAAA,OAAO,EAAE4E,KAAK,CAAC5E,OAFP;AAGRE,UAAAA,OAAO,EAAE0E,KAAK,CAAC1E;AAHP,SAAT;;AAMA,aAAKqG,YAAL,CAAkBvI,MAAlB,EAA0B,OAA1B;AACA,OATD,MAUK,IAAI,CAAC,KAAKkG,eAAV,EAA2B;AAC/B,aAAKqC,YAAL,CAAkBvI,MAAlB,EAA0B,IAA1B;AACA,OAFI,MAGA;AACJmG,QAAAA,GAAG,CAAClH,MAAD,EAAS,SAAT,EAAoB,IAApB,CAAH;;AACAkH,QAAAA,GAAG,CAAC9G,MAAD,EAAS,WAAT,EAAsB,KAAKkJ,YAA3B,CAAH;AACA;;AAED,UAAI;AACH,YAAIxJ,QAAQ,CAACyJ,SAAb,EAAwB;AACvBzJ,UAAAA,QAAQ,CAACyJ,SAAT,CAAmBC,KAAnB;AACA,SAFD,MAEO;AACN3J,UAAAA,MAAM,CAAC4J,YAAP,GAAsBC,eAAtB;AACA;AACD,OAND,CAME,OAAOC,GAAP,EAAY,CACb;AACD,KA5JwD;AA8JzDC,IAAAA,YAAY,EAAE,wBAAY;AACzB,UAAIxJ,MAAM,IAAIJ,MAAd,EAAsB;AACrB;AACA6I,QAAAA,YAAY,CAAC7I,MAAD,EAAS,KAAKuC,OAAL,CAAawD,UAAtB,EAAkC,IAAlC,CAAZ;;AAEAnG,QAAAA,UAAU,CAACiK,MAAX,GAAoB,IAApB,CAJqB,CAMrB;;AACA3B,QAAAA,cAAc,CAAC,IAAD,EAAO9H,MAAP,EAAe,OAAf,EAAwBJ,MAAxB,EAAgCI,MAAhC,EAAwCO,QAAxC,CAAd;AACA;AACD,KAxKwD;AA0KzDmJ,IAAAA,gBAAgB,EAAE,4BAAY;AAC7B,UAAI9I,QAAJ,EAAc;AACb,YAAI,KAAK+I,MAAL,KAAgB/I,QAAQ,CAAC+B,OAAzB,IAAoC,KAAKiH,MAAL,KAAgBhJ,QAAQ,CAACiC,OAAjE,EAA0E;AACzE;AACA;;AAED,aAAK8G,MAAL,GAAc/I,QAAQ,CAAC+B,OAAvB;AACA,aAAKiH,MAAL,GAAchJ,QAAQ,CAACiC,OAAvB;;AAEA,YAAI,CAACvB,uBAAL,EAA8B;AAC7BuI,UAAAA,IAAI,CAAC/J,OAAD,EAAU,SAAV,EAAqB,MAArB,CAAJ;AACA;;AAED,YAAI2H,MAAM,GAAG/H,QAAQ,CAACoK,gBAAT,CAA0BlJ,QAAQ,CAAC+B,OAAnC,EAA4C/B,QAAQ,CAACiC,OAArD,CAAb;AAAA,YACCkH,MAAM,GAAGtC,MADV;AAAA,YAECuC,SAAS,GAAG,MAAM,KAAK7H,OAAL,CAAaoC,KAAb,CAAmBC,IAAzB,GAAgC,EAF7C;AAAA,YAGCyF,CAAC,GAAGlI,sBAAsB,CAACmI,MAH5B;;AAKA,YAAIH,MAAJ,EAAY;AACX,aAAG;AACF,gBAAIA,MAAM,CAAChJ,OAAD,CAAN,IAAmBgJ,MAAM,CAAChJ,OAAD,CAAN,CAAgBoB,OAAhB,CAAwBwC,MAAxB,CAA+BwF,OAA/B,CAAuCH,SAAvC,IAAoD,CAAC,CAA5E,EAA+E;AAC9E,qBAAOC,CAAC,EAAR,EAAY;AACXlI,gBAAAA,sBAAsB,CAACkI,CAAD,CAAtB,CAA0B;AACzBtH,kBAAAA,OAAO,EAAE/B,QAAQ,CAAC+B,OADO;AAEzBE,kBAAAA,OAAO,EAAEjC,QAAQ,CAACiC,OAFO;AAGzB4E,kBAAAA,MAAM,EAAEA,MAHiB;AAIzBzH,kBAAAA,MAAM,EAAE+J;AAJiB,iBAA1B;AAMA;;AAED;AACA;;AAEDtC,YAAAA,MAAM,GAAGsC,MAAT,CAdE,CAce;AACjB;AACD;AAhBA,iBAiBOA,MAAM,GAAGA,MAAM,CAACvG,UAjBvB;AAkBA;;AAED,YAAI,CAAClC,uBAAL,EAA8B;AAC7BuI,UAAAA,IAAI,CAAC/J,OAAD,EAAU,SAAV,EAAqB,EAArB,CAAJ;AACA;AACD;AACD,KArNwD;AAwNzDsK,IAAAA,YAAY,EAAE;AAAU;AAAelI,IAAAA,GAAzB,EAA8B;AAC3C,UAAIvB,MAAJ,EAAY;AACX;AACA,YAAI,CAACnB,UAAU,CAACiK,MAAhB,EAAwB;AACvB,eAAKD,YAAL;AACA,SAJU,CAMX;;;AACA,aAAKa,YAAL;;AAEA,YAAI9C,KAAK,GAAGrF,GAAG,CAACsF,OAAJ,GAActF,GAAG,CAACsF,OAAJ,CAAY,CAAZ,CAAd,GAA+BtF,GAA3C;AAAA,YACCoI,EAAE,GAAG/C,KAAK,CAAC5E,OAAN,GAAgBhC,MAAM,CAACgC,OAD7B;AAAA,YAEC4H,EAAE,GAAGhD,KAAK,CAAC1E,OAAN,GAAgBlC,MAAM,CAACkC,OAF7B;AAAA,YAGC2H,WAAW,GAAGtI,GAAG,CAACsF,OAAJ,GAAc,iBAAiB8C,EAAjB,GAAsB,KAAtB,GAA8BC,EAA9B,GAAmC,OAAjD,GAA2D,eAAeD,EAAf,GAAoB,KAApB,GAA4BC,EAA5B,GAAiC,KAH3G;AAKA1J,QAAAA,KAAK,GAAG,IAAR;AACAD,QAAAA,QAAQ,GAAG2G,KAAX;;AAEAsC,QAAAA,IAAI,CAAC/J,OAAD,EAAU,iBAAV,EAA6B0K,WAA7B,CAAJ;;AACAX,QAAAA,IAAI,CAAC/J,OAAD,EAAU,cAAV,EAA0B0K,WAA1B,CAAJ;;AACAX,QAAAA,IAAI,CAAC/J,OAAD,EAAU,aAAV,EAAyB0K,WAAzB,CAAJ;;AACAX,QAAAA,IAAI,CAAC/J,OAAD,EAAU,WAAV,EAAuB0K,WAAvB,CAAJ;;AAEAtI,QAAAA,GAAG,CAAC6F,cAAJ;AACA;AACD,KAjPwD;AAmPzDsC,IAAAA,YAAY,EAAE,wBAAY;AACzB,UAAI,CAACvK,OAAL,EAAc;AACb,YAAIuC,IAAI,GAAGzC,MAAM,CAAC6D,qBAAP,EAAX;AAAA,YACCgH,GAAG,GAAGZ,IAAI,CAACjK,MAAD,CADX;AAAA,YAECuC,OAAO,GAAG,KAAKA,OAFhB;AAAA,YAGCuI,SAHD;;AAKA5K,QAAAA,OAAO,GAAGF,MAAM,CAAC+K,SAAP,CAAiB,IAAjB,CAAV;;AAEAlC,QAAAA,YAAY,CAAC3I,OAAD,EAAUqC,OAAO,CAACwD,UAAlB,EAA8B,KAA9B,CAAZ;;AACA8C,QAAAA,YAAY,CAAC3I,OAAD,EAAUqC,OAAO,CAACqE,aAAlB,EAAiC,IAAjC,CAAZ;;AAEAqD,QAAAA,IAAI,CAAC/J,OAAD,EAAU,KAAV,EAAiBuC,IAAI,CAACwB,GAAL,GAAW1C,QAAQ,CAACsJ,GAAG,CAACG,SAAL,EAAgB,EAAhB,CAApC,CAAJ;;AACAf,QAAAA,IAAI,CAAC/J,OAAD,EAAU,MAAV,EAAkBuC,IAAI,CAACsB,IAAL,GAAYxC,QAAQ,CAACsJ,GAAG,CAACI,UAAL,EAAiB,EAAjB,CAAtC,CAAJ;;AACAhB,QAAAA,IAAI,CAAC/J,OAAD,EAAU,OAAV,EAAmBuC,IAAI,CAACyI,KAAxB,CAAJ;;AACAjB,QAAAA,IAAI,CAAC/J,OAAD,EAAU,QAAV,EAAoBuC,IAAI,CAAC0I,MAAzB,CAAJ;;AACAlB,QAAAA,IAAI,CAAC/J,OAAD,EAAU,SAAV,EAAqB,KAArB,CAAJ;;AACA+J,QAAAA,IAAI,CAAC/J,OAAD,EAAU,UAAV,EAAsB,OAAtB,CAAJ;;AACA+J,QAAAA,IAAI,CAAC/J,OAAD,EAAU,QAAV,EAAoB,QAApB,CAAJ;;AACA+J,QAAAA,IAAI,CAAC/J,OAAD,EAAU,eAAV,EAA2B,MAA3B,CAAJ;;AAEAqC,QAAAA,OAAO,CAACsE,cAAR,IAA0B/G,QAAQ,CAACsL,IAAT,CAAcC,WAAd,CAA0BnL,OAA1B,CAA1B,IAAgEE,MAAM,CAACiL,WAAP,CAAmBnL,OAAnB,CAAhE,CApBa,CAsBb;;AACA4K,QAAAA,SAAS,GAAG5K,OAAO,CAAC2D,qBAAR,EAAZ;;AACAoG,QAAAA,IAAI,CAAC/J,OAAD,EAAU,OAAV,EAAmBuC,IAAI,CAACyI,KAAL,GAAa,CAAb,GAAiBJ,SAAS,CAACI,KAA9C,CAAJ;;AACAjB,QAAAA,IAAI,CAAC/J,OAAD,EAAU,QAAV,EAAoBuC,IAAI,CAAC0I,MAAL,GAAc,CAAd,GAAkBL,SAAS,CAACK,MAAhD,CAAJ;AACA;AACD,KA/QwD;AAiRzD7B,IAAAA,YAAY,EAAE;AAAU;AAAUhH,IAAAA,GAApB;AAAyB;AAAYgJ,IAAAA,WAArC,EAAkD;AAC/D,UAAIjF,YAAY,GAAG/D,GAAG,CAAC+D,YAAvB;AAAA,UACC9D,OAAO,GAAG,KAAKA,OADhB;;AAGA,WAAKgJ,YAAL;;AAEA,UAAI1K,WAAW,CAAC2K,IAAZ,IAAoB,OAAxB,EAAiC;AAChCrL,QAAAA,OAAO,GAAGH,MAAM,CAAC+K,SAAP,CAAiB,IAAjB,CAAV;;AACAd,QAAAA,IAAI,CAAC9J,OAAD,EAAU,SAAV,EAAqB,MAArB,CAAJ;;AACAC,QAAAA,MAAM,CAACqL,YAAP,CAAoBtL,OAApB,EAA6BH,MAA7B;AACA;;AAED,UAAIsL,WAAJ,EAAiB;AAEhB,YAAIA,WAAW,KAAK,OAApB,EAA6B;AAC5B;AACApE,UAAAA,GAAG,CAACpH,QAAD,EAAW,WAAX,EAAwB,KAAK0K,YAA7B,CAAH;;AACAtD,UAAAA,GAAG,CAACpH,QAAD,EAAW,UAAX,EAAuB,KAAKmJ,OAA5B,CAAH;;AACA/B,UAAAA,GAAG,CAACpH,QAAD,EAAW,aAAX,EAA0B,KAAKmJ,OAA/B,CAAH;AACA,SALD,MAKO;AACN;AACA/B,UAAAA,GAAG,CAACpH,QAAD,EAAW,WAAX,EAAwB,KAAK0K,YAA7B,CAAH;;AACAtD,UAAAA,GAAG,CAACpH,QAAD,EAAW,SAAX,EAAsB,KAAKmJ,OAA3B,CAAH;AACA;;AAED,aAAKyC,OAAL,GAAetH,WAAW,CAAC,KAAK0F,gBAAN,EAAwB,EAAxB,CAA1B;AACA,OAdD,MAeK;AACJ,YAAIzD,YAAJ,EAAkB;AACjBA,UAAAA,YAAY,CAACsF,aAAb,GAA6B,MAA7B;AACApJ,UAAAA,OAAO,CAAC6D,OAAR,IAAmB7D,OAAO,CAAC6D,OAAR,CAAgBhB,IAAhB,CAAqB,IAArB,EAA2BiB,YAA3B,EAAyCrG,MAAzC,CAAnB;AACA;;AAEDkH,QAAAA,GAAG,CAACpH,QAAD,EAAW,MAAX,EAAmB,IAAnB,CAAH;;AACAqJ,QAAAA,UAAU,CAAC,KAAKS,YAAN,EAAoB,CAApB,CAAV;AACA;AACD,KArTwD;AAuTzDvC,IAAAA,WAAW,EAAE;AAAU;AAAU/E,IAAAA,GAApB,EAAyB;AACrC,UAAIX,EAAE,GAAG,KAAKA,EAAd;AAAA,UACCkG,MADD;AAAA,UAEC+D,QAFD;AAAA,UAGCC,MAHD;AAAA,UAICtJ,OAAO,GAAG,KAAKA,OAJhB;AAAA,UAKCoC,KAAK,GAAGpC,OAAO,CAACoC,KALjB;AAAA,UAMCmH,QAAQ,GAAGnH,KAAK,CAACK,GANlB;AAAA,UAOC+G,OAAO,GAAIlL,WAAW,KAAK8D,KAP5B;AAAA,UAQCqH,OAAO,GAAGzJ,OAAO,CAACiD,IARnB;;AAUA,UAAIlD,GAAG,CAAC6F,cAAJ,KAAuB,KAAK,CAAhC,EAAmC;AAClC7F,QAAAA,GAAG,CAAC6F,cAAJ;AACA,SAAC5F,OAAO,CAACiE,cAAT,IAA2BlE,GAAG,CAAC2J,eAAJ,EAA3B;AACA;;AAEDhL,MAAAA,KAAK,GAAG,IAAR;;AAEA,UAAIJ,WAAW,IAAI,CAAC0B,OAAO,CAACkD,QAAxB,KACFsG,OAAO,GACLC,OAAO,KAAKH,MAAM,GAAG,CAACzL,MAAM,CAAC8L,QAAP,CAAgBlM,MAAhB,CAAf,CADF,CAC0C;AAD1C,QAELa,WAAW,CAAC2K,IAAZ,IAAoBM,QAApB,KACAjL,WAAW,CAAC+D,IAAZ,KAAqBD,KAAK,CAACC,IAA5B,IAAqC;AACpCkH,MAAAA,QAAQ,CAACvB,OAAT,IAAoB,CAACuB,QAAQ,CAACvB,OAAT,CAAiB1J,WAAW,CAAC+D,IAA7B,CAFrB,CAEyD;AAFzD,OAHA,MAQFtC,GAAG,CAAClC,MAAJ,KAAe,KAAK,CAApB,IAAyBkC,GAAG,CAAClC,MAAJ,KAAe,KAAKuB,EAR3C,CAAJ,CAQmD;AARnD,QASE;AACD;AACAS,UAAAA,WAAW,CAACE,GAAD,EAAMC,OAAN,EAAe,KAAKZ,EAApB,CAAX;;AAEA,cAAII,OAAJ,EAAa;AACZ;AACA;;AAED8F,UAAAA,MAAM,GAAGG,QAAQ,CAAC1F,GAAG,CAACuF,MAAL,EAAatF,OAAO,CAACqD,SAArB,EAAgCjE,EAAhC,CAAjB;AACAiK,UAAAA,QAAQ,GAAG5L,MAAM,CAAC6D,qBAAP,EAAX;;AAEA,cAAIgI,MAAJ,EAAY;AACXM,YAAAA,UAAU,CAAC,IAAD,CAAV;;AAEA,gBAAIhM,OAAO,IAAIE,MAAf,EAAuB;AACtBD,cAAAA,MAAM,CAACqL,YAAP,CAAoBzL,MAApB,EAA4BG,OAAO,IAAIE,MAAvC;AACA,aAFD,MAGK,IAAI,CAAC2L,OAAL,EAAc;AAClB5L,cAAAA,MAAM,CAACiL,WAAP,CAAmBrL,MAAnB;AACA;;AAED;AACA;;AAGD,cAAK2B,EAAE,CAACyK,QAAH,CAAY9B,MAAZ,KAAuB,CAAxB,IAA+B3I,EAAE,CAACyK,QAAH,CAAY,CAAZ,MAAmBlM,OAAlD,IACFyB,EAAE,KAAKW,GAAG,CAACuF,MAAZ,KAAwBA,MAAM,GAAGwE,YAAY,CAAC1K,EAAD,EAAKW,GAAL,CAA7C,CADD,EAEE;AAED,gBAAIuF,MAAJ,EAAY;AACX,kBAAIA,MAAM,CAACyE,QAAX,EAAqB;AACpB;AACA;;AAEDC,cAAAA,UAAU,GAAG1E,MAAM,CAAChE,qBAAP,EAAb;AACA;;AAEDsI,YAAAA,UAAU,CAACJ,OAAD,CAAV;;AAEA,gBAAIS,OAAO,CAACpM,MAAD,EAASuB,EAAT,EAAa3B,MAAb,EAAqB4L,QAArB,EAA+B/D,MAA/B,EAAuC0E,UAAvC,CAAP,KAA8D,KAAlE,EAAyE;AACxE,kBAAI,CAACvM,MAAM,CAACkM,QAAP,CAAgBvK,EAAhB,CAAL,EAA0B;AACzBA,gBAAAA,EAAE,CAAC0J,WAAH,CAAerL,MAAf;AACAC,gBAAAA,QAAQ,GAAG0B,EAAX,CAFyB,CAEV;AACf;;AAED,mBAAK8K,QAAL,CAAcb,QAAd,EAAwB5L,MAAxB;;AACA6H,cAAAA,MAAM,IAAI,KAAK4E,QAAL,CAAcF,UAAd,EAA0B1E,MAA1B,CAAV;AACA;AACD,WAvBD,MAwBK,IAAIA,MAAM,IAAI,CAACA,MAAM,CAACyE,QAAlB,IAA8BzE,MAAM,KAAK7H,MAAzC,IAAoD6H,MAAM,CAACjE,UAAP,CAAkBzC,OAAlB,MAA+B,KAAK,CAA5F,EAAgG;AACpG,gBAAIX,MAAM,KAAKqH,MAAf,EAAuB;AACtBrH,cAAAA,MAAM,GAAGqH,MAAT;AACApH,cAAAA,OAAO,GAAGwJ,IAAI,CAACpC,MAAD,CAAd;AACAnH,cAAAA,aAAa,GAAGuJ,IAAI,CAACpC,MAAM,CAACjE,UAAR,CAApB;AACA;;AAGD,gBAAI2I,UAAU,GAAG1E,MAAM,CAAChE,qBAAP,EAAjB;AAAA,gBACCqH,KAAK,GAAGqB,UAAU,CAACzI,KAAX,GAAmByI,UAAU,CAACxI,IADvC;AAAA,gBAECoH,MAAM,GAAGoB,UAAU,CAACvI,MAAX,GAAoBuI,UAAU,CAACtI,GAFzC;AAAA,gBAGCyI,QAAQ,GAAG,oBAAoB7G,IAApB,CAAyBpF,OAAO,CAACkM,QAAR,GAAmBlM,OAAO,CAACmM,OAApD,KACNlM,aAAa,CAACkM,OAAd,IAAyB,MAAzB,IAAmClM,aAAa,CAAC,gBAAD,CAAb,CAAgC6J,OAAhC,CAAwC,KAAxC,MAAmD,CAJ5F;AAAA,gBAKCsC,MAAM,GAAIhF,MAAM,CAACrE,WAAP,GAAqBxD,MAAM,CAACwD,WALvC;AAAA,gBAMCsJ,MAAM,GAAIjF,MAAM,CAACnE,YAAP,GAAsB1D,MAAM,CAAC0D,YANxC;AAAA,gBAOCqJ,OAAO,GAAG,CAACL,QAAQ,GAAG,CAACpK,GAAG,CAACS,OAAJ,GAAcwJ,UAAU,CAACxI,IAA1B,IAAkCmH,KAArC,GAA6C,CAAC5I,GAAG,CAACW,OAAJ,GAAcsJ,UAAU,CAACtI,GAA1B,IAAiCkH,MAAvF,IAAiG,GAP5G;AAAA,gBAQCxC,WAAW,GAAGd,MAAM,CAACmF,kBARtB;AAAA,gBASCC,UAAU,GAAGT,OAAO,CAACpM,MAAD,EAASuB,EAAT,EAAa3B,MAAb,EAAqB4L,QAArB,EAA+B/D,MAA/B,EAAuC0E,UAAvC,CATrB;AAAA,gBAUCW,KAVD;;AAaA,gBAAID,UAAU,KAAK,KAAnB,EAA0B;AACzBlL,cAAAA,OAAO,GAAG,IAAV;AACAoH,cAAAA,UAAU,CAACgE,SAAD,EAAY,EAAZ,CAAV;;AAEAhB,cAAAA,UAAU,CAACJ,OAAD,CAAV;;AAEA,kBAAIkB,UAAU,KAAK,CAAf,IAAoBA,UAAU,KAAK,CAAC,CAAxC,EAA2C;AAC1CC,gBAAAA,KAAK,GAAID,UAAU,KAAK,CAAxB;AACA,eAFD,MAGK,IAAIP,QAAJ,EAAc;AAClB,oBAAIU,KAAK,GAAGpN,MAAM,CAACqN,SAAnB;AAAA,oBACCC,KAAK,GAAGzF,MAAM,CAACwF,SADhB;;AAGA,oBAAID,KAAK,KAAKE,KAAd,EAAqB;AACpBJ,kBAAAA,KAAK,GAAIrF,MAAM,CAAC0F,sBAAP,KAAkCvN,MAAnC,IAA8C,CAAC6M,MAA/C,IAAyDE,OAAO,IAAIF,MAA5E;AACA,iBAFD,MAEO;AACNK,kBAAAA,KAAK,GAAGI,KAAK,GAAGF,KAAhB;AACA;AACD,eATI,MASE;AACNF,gBAAAA,KAAK,GAAIvE,WAAW,KAAK3I,MAAjB,IAA4B,CAAC8M,MAA7B,IAAuCC,OAAO,IAAID,MAA1D;AACA;;AAED,kBAAI,CAAC9M,MAAM,CAACkM,QAAP,CAAgBvK,EAAhB,CAAL,EAA0B;AACzB,oBAAIuL,KAAK,IAAI,CAACvE,WAAd,EAA2B;AAC1BhH,kBAAAA,EAAE,CAAC0J,WAAH,CAAerL,MAAf;AACA,iBAFD,MAEO;AACN6H,kBAAAA,MAAM,CAACjE,UAAP,CAAkB6H,YAAlB,CAA+BzL,MAA/B,EAAuCkN,KAAK,GAAGvE,WAAH,GAAiBd,MAA7D;AACA;AACD;;AAED5H,cAAAA,QAAQ,GAAGD,MAAM,CAAC4D,UAAlB,CA9ByB,CA8BK;;AAE9B,mBAAK6I,QAAL,CAAcb,QAAd,EAAwB5L,MAAxB;;AACA,mBAAKyM,QAAL,CAAcF,UAAd,EAA0B1E,MAA1B;AACA;AACD;AACD;AACD,KA7bwD;AA+bzD4E,IAAAA,QAAQ,EAAE,kBAAUe,QAAV,EAAoB3F,MAApB,EAA4B;AACrC,UAAI4F,EAAE,GAAG,KAAKlL,OAAL,CAAa4D,SAAtB;;AAEA,UAAIsH,EAAJ,EAAQ;AACP,YAAIC,WAAW,GAAG7F,MAAM,CAAChE,qBAAP,EAAlB;;AAEAoG,QAAAA,IAAI,CAACpC,MAAD,EAAS,YAAT,EAAuB,MAAvB,CAAJ;;AACAoC,QAAAA,IAAI,CAACpC,MAAD,EAAS,WAAT,EAAsB,kBACtB2F,QAAQ,CAACzJ,IAAT,GAAgB2J,WAAW,CAAC3J,IADN,IACc,KADd,IAEtByJ,QAAQ,CAACvJ,GAAT,GAAeyJ,WAAW,CAACzJ,GAFL,IAEY,OAFlC,CAAJ;;AAKA4D,QAAAA,MAAM,CAACrE,WAAP,CATO,CASa;;AAEpByG,QAAAA,IAAI,CAACpC,MAAD,EAAS,YAAT,EAAuB,SAAS4F,EAAT,GAAc,IAArC,CAAJ;;AACAxD,QAAAA,IAAI,CAACpC,MAAD,EAAS,WAAT,EAAsB,oBAAtB,CAAJ;;AAEAuB,QAAAA,YAAY,CAACvB,MAAM,CAACyE,QAAR,CAAZ;AACAzE,QAAAA,MAAM,CAACyE,QAAP,GAAkBnD,UAAU,CAAC,YAAY;AACxCc,UAAAA,IAAI,CAACpC,MAAD,EAAS,YAAT,EAAuB,EAAvB,CAAJ;;AACAoC,UAAAA,IAAI,CAACpC,MAAD,EAAS,WAAT,EAAsB,EAAtB,CAAJ;;AACAA,UAAAA,MAAM,CAACyE,QAAP,GAAkB,KAAlB;AACA,SAJ2B,EAIzBmB,EAJyB,CAA5B;AAKA;AACD,KAvdwD;AAydzDlC,IAAAA,YAAY,EAAE,wBAAY;AACzB,UAAI9C,aAAa,GAAG,KAAK9G,EAAL,CAAQ8G,aAA5B;;AAEAY,MAAAA,IAAI,CAACvJ,QAAD,EAAW,WAAX,EAAwB,KAAK0K,YAA7B,CAAJ;;AACAnB,MAAAA,IAAI,CAACZ,aAAD,EAAgB,SAAhB,EAA2B,KAAKQ,OAAhC,CAAJ;;AACAI,MAAAA,IAAI,CAACZ,aAAD,EAAgB,UAAhB,EAA4B,KAAKQ,OAAjC,CAAJ;;AACAI,MAAAA,IAAI,CAACZ,aAAD,EAAgB,aAAhB,EAA+B,KAAKQ,OAApC,CAAJ;AACA,KAhewD;AAkezDA,IAAAA,OAAO,EAAE;AAAU;AAAU3G,IAAAA,GAApB,EAAyB;AACjC,UAAIX,EAAE,GAAG,KAAKA,EAAd;AAAA,UACCY,OAAO,GAAG,KAAKA,OADhB;AAGA2B,MAAAA,aAAa,CAAC,KAAKwH,OAAN,CAAb;AACAxH,MAAAA,aAAa,CAACpD,UAAU,CAACqD,GAAZ,CAAb;AACAiF,MAAAA,YAAY,CAAC,KAAKF,eAAN,CAAZ,CANiC,CAQjC;;AACAG,MAAAA,IAAI,CAACvJ,QAAD,EAAW,WAAX,EAAwB,KAAK0K,YAA7B,CAAJ;;AAEA,UAAI,KAAKvD,eAAT,EAA0B;AACzBoC,QAAAA,IAAI,CAACvJ,QAAD,EAAW,MAAX,EAAmB,IAAnB,CAAJ;;AACAuJ,QAAAA,IAAI,CAAC1H,EAAD,EAAK,WAAL,EAAkB,KAAK2H,YAAvB,CAAJ;AACA;;AAED,WAAKiC,YAAL;;AAEA,UAAIjJ,GAAJ,EAAS;AACR,YAAIrB,KAAJ,EAAW;AACVqB,UAAAA,GAAG,CAAC6F,cAAJ;AACA,WAAC5F,OAAO,CAACgE,UAAT,IAAuBjE,GAAG,CAAC2J,eAAJ,EAAvB;AACA;;AAED/L,QAAAA,OAAO,IAAIA,OAAO,CAAC0D,UAAR,CAAmB+J,WAAnB,CAA+BzN,OAA/B,CAAX;;AAEA,YAAIF,MAAJ,EAAY;AACX,cAAI,KAAKiH,eAAT,EAA0B;AACzBoC,YAAAA,IAAI,CAACrJ,MAAD,EAAS,SAAT,EAAoB,IAApB,CAAJ;AACA;;AAEDgJ,UAAAA,iBAAiB,CAAChJ,MAAD,CAAjB,CALW,CAOX;;;AACA6I,UAAAA,YAAY,CAAC7I,MAAD,EAAS,KAAKuC,OAAL,CAAawD,UAAtB,EAAkC,KAAlC,CAAZ;;AACA8C,UAAAA,YAAY,CAAC7I,MAAD,EAAS,KAAKuC,OAAL,CAAayD,WAAtB,EAAmC,KAAnC,CAAZ;;AAEA,cAAI5F,MAAM,KAAKH,QAAf,EAAyB;AACxBW,YAAAA,QAAQ,GAAGqH,MAAM,CAACjI,MAAD,EAASuC,OAAO,CAACqD,SAAjB,CAAjB;;AAEA,gBAAIhF,QAAQ,IAAI,CAAhB,EAAmB;AAClB;AACAsH,cAAAA,cAAc,CAAC,IAAD,EAAOjI,QAAP,EAAiB,MAAjB,EAAyBD,MAAzB,EAAiCI,MAAjC,EAAyCO,QAAzC,EAAmDC,QAAnD,CAAd;;AACAsH,cAAAA,cAAc,CAAC,IAAD,EAAO9H,MAAP,EAAe,MAAf,EAAuBJ,MAAvB,EAA+BI,MAA/B,EAAuCO,QAAvC,EAAiDC,QAAjD,CAAd,CAHkB,CAKlB;;;AACAsH,cAAAA,cAAc,CAAC,IAAD,EAAOjI,QAAP,EAAiB,KAAjB,EAAwBD,MAAxB,EAAgCI,MAAhC,EAAwCO,QAAxC,EAAkDC,QAAlD,CAAd,CANkB,CAQlB;;;AACAsH,cAAAA,cAAc,CAAC,IAAD,EAAO9H,MAAP,EAAe,QAAf,EAAyBJ,MAAzB,EAAiCI,MAAjC,EAAyCO,QAAzC,EAAmDC,QAAnD,CAAd;AACA;AACD,WAdD,MAeK;AACJ;AACAT,YAAAA,OAAO,IAAIA,OAAO,CAACyD,UAAR,CAAmB+J,WAAnB,CAA+BxN,OAA/B,CAAX;;AAEA,gBAAIH,MAAM,CAAC2I,WAAP,KAAuBtI,MAA3B,EAAmC;AAClC;AACAO,cAAAA,QAAQ,GAAGqH,MAAM,CAACjI,MAAD,EAASuC,OAAO,CAACqD,SAAjB,CAAjB;;AAEA,kBAAIhF,QAAQ,IAAI,CAAhB,EAAmB;AAClB;AACAsH,gBAAAA,cAAc,CAAC,IAAD,EAAO9H,MAAP,EAAe,QAAf,EAAyBJ,MAAzB,EAAiCI,MAAjC,EAAyCO,QAAzC,EAAmDC,QAAnD,CAAd;;AACAsH,gBAAAA,cAAc,CAAC,IAAD,EAAO9H,MAAP,EAAe,MAAf,EAAuBJ,MAAvB,EAA+BI,MAA/B,EAAuCO,QAAvC,EAAiDC,QAAjD,CAAd;AACA;AACD;AACD;;AAED,cAAIhB,UAAU,CAACiK,MAAf,EAAuB;AACtB,gBAAIjJ,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,KAAK,CAAC,CAAvC,EAA0C;AACzCA,cAAAA,QAAQ,GAAGD,QAAX;AACA;;AAEDuH,YAAAA,cAAc,CAAC,IAAD,EAAO9H,MAAP,EAAe,KAAf,EAAsBJ,MAAtB,EAA8BI,MAA9B,EAAsCO,QAAtC,EAAgDC,QAAhD,CAAd,CALsB,CAOtB;;;AACA,iBAAKgN,IAAL;AACA;AACD;AAED;;AACD,WAAKC,QAAL;AACA,KApjBwD;AAsjBzDA,IAAAA,QAAQ,EAAE,oBAAW;AACpB;AACAzN,MAAAA,MAAM,GACNJ,MAAM,GACNC,QAAQ,GACRC,OAAO,GACPG,MAAM,GACNF,OAAO,GAEPG,QAAQ,GACRC,cAAc,GAEdQ,MAAM,GACNC,QAAQ,GAERC,KAAK,GACLL,QAAQ,GAERJ,MAAM,GACNC,OAAO,GAEPI,WAAW,GACXjB,UAAU,CAACiK,MAAX,GAAoB,IApBpB;AAqBA,KA7kBwD;AA+kBzDiE,IAAAA,WAAW,EAAE;AAAU;AAAUxL,IAAAA,GAApB,EAAyB;AACrC,UAAIoF,IAAI,GAAGpF,GAAG,CAACoF,IAAf;;AAEA,UAAIA,IAAI,KAAK,UAAT,IAAuBA,IAAI,KAAK,WAApC,EAAiD;AAChD,YAAI1H,MAAJ,EAAY;AACX,eAAKqH,WAAL,CAAiB/E,GAAjB;;AACAyL,UAAAA,eAAe,CAACzL,GAAD,CAAf;AACA;AACD,OALD,MAMK,IAAIoF,IAAI,KAAK,MAAT,IAAmBA,IAAI,KAAK,SAAhC,EAA2C;AAC/C,aAAKuB,OAAL,CAAa3G,GAAb;AACA;AACD,KA3lBwD;;AA8lBzD;;;;AAIA0L,IAAAA,OAAO,EAAE,mBAAY;AACpB,UAAIC,KAAK,GAAG,EAAZ;AAAA,UACCtM,EADD;AAAA,UAECyK,QAAQ,GAAG,KAAKzK,EAAL,CAAQyK,QAFpB;AAAA,UAGC/B,CAAC,GAAG,CAHL;AAAA,UAIC6D,CAAC,GAAG9B,QAAQ,CAAC9B,MAJd;AAAA,UAKC/H,OAAO,GAAG,KAAKA,OALhB;;AAOA,aAAO8H,CAAC,GAAG6D,CAAX,EAAc7D,CAAC,EAAf,EAAmB;AAClB1I,QAAAA,EAAE,GAAGyK,QAAQ,CAAC/B,CAAD,CAAb;;AACA,YAAIrC,QAAQ,CAACrG,EAAD,EAAKY,OAAO,CAACqD,SAAb,EAAwB,KAAKjE,EAA7B,CAAZ,EAA8C;AAC7CsM,UAAAA,KAAK,CAAC7G,IAAN,CAAWzF,EAAE,CAACwM,YAAH,CAAgB5L,OAAO,CAACkE,UAAxB,KAAuC2H,WAAW,CAACzM,EAAD,CAA7D;AACA;AACD;;AAED,aAAOsM,KAAP;AACA,KAlnBwD;;AAqnBzD;;;;AAIAzI,IAAAA,IAAI,EAAE,cAAUyI,KAAV,EAAiB;AACtB,UAAII,KAAK,GAAG,EAAZ;AAAA,UAAgBjO,MAAM,GAAG,KAAKuB,EAA9B;AAEA,WAAKqM,OAAL,GAAenJ,OAAf,CAAuB,UAAUyJ,EAAV,EAAcjE,CAAd,EAAiB;AACvC,YAAI1I,EAAE,GAAGvB,MAAM,CAACgM,QAAP,CAAgB/B,CAAhB,CAAT;;AAEA,YAAIrC,QAAQ,CAACrG,EAAD,EAAK,KAAKY,OAAL,CAAaqD,SAAlB,EAA6BxF,MAA7B,CAAZ,EAAkD;AACjDiO,UAAAA,KAAK,CAACC,EAAD,CAAL,GAAY3M,EAAZ;AACA;AACD,OAND,EAMG,IANH;AAQAsM,MAAAA,KAAK,CAACpJ,OAAN,CAAc,UAAUyJ,EAAV,EAAc;AAC3B,YAAID,KAAK,CAACC,EAAD,CAAT,EAAe;AACdlO,UAAAA,MAAM,CAACuN,WAAP,CAAmBU,KAAK,CAACC,EAAD,CAAxB;AACAlO,UAAAA,MAAM,CAACiL,WAAP,CAAmBgD,KAAK,CAACC,EAAD,CAAxB;AACA;AACD,OALD;AAMA,KA1oBwD;;AA6oBzD;;;AAGAV,IAAAA,IAAI,EAAE,gBAAY;AACjB,UAAIlI,KAAK,GAAG,KAAKnD,OAAL,CAAamD,KAAzB;AACAA,MAAAA,KAAK,IAAIA,KAAK,CAAC6I,GAAN,CAAU,IAAV,CAAT;AACA,KAnpBwD;;AAspBzD;;;;;;AAMAC,IAAAA,OAAO,EAAE,iBAAU7M,EAAV,EAAc8M,QAAd,EAAwB;AAChC,aAAOzG,QAAQ,CAACrG,EAAD,EAAK8M,QAAQ,IAAI,KAAKlM,OAAL,CAAaqD,SAA9B,EAAyC,KAAKjE,EAA9C,CAAf;AACA,KA9pBwD;;AAiqBzD;;;;;;AAMA+M,IAAAA,MAAM,EAAE,gBAAU9J,IAAV,EAAgB+J,KAAhB,EAAuB;AAC9B,UAAIpM,OAAO,GAAG,KAAKA,OAAnB;;AAEA,UAAIoM,KAAK,KAAK,KAAK,CAAnB,EAAsB;AACrB,eAAOpM,OAAO,CAACqC,IAAD,CAAd;AACA,OAFD,MAEO;AACNrC,QAAAA,OAAO,CAACqC,IAAD,CAAP,GAAgB+J,KAAhB;;AAEA,YAAI/J,IAAI,KAAK,OAAb,EAAsB;AACrBF,UAAAA,aAAa,CAACnC,OAAD,CAAb;AACA;AACD;AACD,KAnrBwD;;AAsrBzD;;;AAGAqM,IAAAA,OAAO,EAAE,mBAAY;AACpB,UAAIjN,EAAE,GAAG,KAAKA,EAAd;AAEAA,MAAAA,EAAE,CAACR,OAAD,CAAF,GAAc,IAAd;;AAEAkI,MAAAA,IAAI,CAAC1H,EAAD,EAAK,WAAL,EAAkB,KAAKwF,WAAvB,CAAJ;;AACAkC,MAAAA,IAAI,CAAC1H,EAAD,EAAK,YAAL,EAAmB,KAAKwF,WAAxB,CAAJ;;AAEA,UAAI,KAAKF,eAAT,EAA0B;AACzBoC,QAAAA,IAAI,CAAC1H,EAAD,EAAK,UAAL,EAAiB,IAAjB,CAAJ;;AACA0H,QAAAA,IAAI,CAAC1H,EAAD,EAAK,WAAL,EAAkB,IAAlB,CAAJ;AACA,OAXmB,CAapB;;;AACAkN,MAAAA,KAAK,CAACtH,SAAN,CAAgB1C,OAAhB,CAAwBO,IAAxB,CAA6BzD,EAAE,CAACmN,gBAAH,CAAoB,aAApB,CAA7B,EAAiE,UAAUnN,EAAV,EAAc;AAC9EA,QAAAA,EAAE,CAACoN,eAAH,CAAmB,WAAnB;AACA,OAFD;AAIA5M,MAAAA,sBAAsB,CAAC6M,MAAvB,CAA8B7M,sBAAsB,CAACoI,OAAvB,CAA+B,KAAKlD,WAApC,CAA9B,EAAgF,CAAhF;;AAEA,WAAK4B,OAAL;;AAEA,WAAKtH,EAAL,GAAUA,EAAE,GAAG,IAAf;AACA;AAhtBwD,GAA1D;;AAotBA,WAASwK,UAAT,CAAoB8C,KAApB,EAA2B;AAC1B,QAAI9O,OAAO,IAAKA,OAAO,CAAC8O,KAAR,KAAkBA,KAAlC,EAA0C;AACzChF,MAAAA,IAAI,CAAC9J,OAAD,EAAU,SAAV,EAAqB8O,KAAK,GAAG,MAAH,GAAY,EAAtC,CAAJ;;AACA,OAACA,KAAD,IAAU9O,OAAO,CAAC8O,KAAlB,IAA2B7O,MAAM,CAACqL,YAAP,CAAoBtL,OAApB,EAA6BH,MAA7B,CAA3B;AACAG,MAAAA,OAAO,CAAC8O,KAAR,GAAgBA,KAAhB;AACA;AACD;;AAGD,WAASjH,QAAT;AAAkB;AAAgBrG,EAAAA,EAAlC;AAAsC;AAAW8M,EAAAA,QAAjD;AAA2D;AAAgBS,EAAAA,GAA3E,EAAgF;AAC/E,QAAIvN,EAAJ,EAAQ;AACPuN,MAAAA,GAAG,GAAGA,GAAG,IAAIpP,QAAb;;AAEA,SAAG;AACF,YACE2O,QAAQ,KAAK,IAAb,IAAqB9M,EAAE,CAACiC,UAAH,KAAkBsL,GAAxC,IACGC,QAAQ,CAACxN,EAAD,EAAK8M,QAAL,CAFZ,EAGE;AACD,iBAAO9M,EAAP;AACA;AACD,OAPD,QAQOA,EAAE,KAAKuN,GAAP,KAAevN,EAAE,GAAGA,EAAE,CAACiC,UAAvB,CARP;AASA;;AAED,WAAO,IAAP;AACA;;AAGD,WAASmK,eAAT;AAAyB;AAAUzL,EAAAA,GAAnC,EAAwC;AACvC,QAAIA,GAAG,CAAC+D,YAAR,EAAsB;AACrB/D,MAAAA,GAAG,CAAC+D,YAAJ,CAAiB+I,UAAjB,GAA8B,MAA9B;AACA;;AACD9M,IAAAA,GAAG,CAAC6F,cAAJ;AACA;;AAGD,WAASjB,GAAT,CAAavF,EAAb,EAAiB0N,KAAjB,EAAwBvI,EAAxB,EAA4B;AAC3BnF,IAAAA,EAAE,CAAC2N,gBAAH,CAAoBD,KAApB,EAA2BvI,EAA3B,EAA+B,KAA/B;AACA;;AAGD,WAASuC,IAAT,CAAc1H,EAAd,EAAkB0N,KAAlB,EAAyBvI,EAAzB,EAA6B;AAC5BnF,IAAAA,EAAE,CAAC4N,mBAAH,CAAuBF,KAAvB,EAA8BvI,EAA9B,EAAkC,KAAlC;AACA;;AAGD,WAAS+B,YAAT,CAAsBlH,EAAtB,EAA0BiD,IAA1B,EAAgCqK,KAAhC,EAAuC;AACtC,QAAItN,EAAJ,EAAQ;AACP,UAAIA,EAAE,CAAC6N,SAAP,EAAkB;AACjB7N,QAAAA,EAAE,CAAC6N,SAAH,CAAaP,KAAK,GAAG,KAAH,GAAW,QAA7B,EAAuCrK,IAAvC;AACA,OAFD,MAGK;AACJ,YAAI6K,SAAS,GAAG,CAAC,MAAM9N,EAAE,CAAC8N,SAAT,GAAqB,GAAtB,EAA2BC,OAA3B,CAAmCxO,MAAnC,EAA2C,GAA3C,EAAgDwO,OAAhD,CAAwD,MAAM9K,IAAN,GAAa,GAArE,EAA0E,GAA1E,CAAhB;AACAjD,QAAAA,EAAE,CAAC8N,SAAH,GAAe,CAACA,SAAS,IAAIR,KAAK,GAAG,MAAMrK,IAAT,GAAgB,EAAzB,CAAV,EAAwC8K,OAAxC,CAAgDxO,MAAhD,EAAwD,GAAxD,CAAf;AACA;AACD;AACD;;AAGD,WAAS+I,IAAT,CAActI,EAAd,EAAkBgO,IAAlB,EAAwBC,GAAxB,EAA6B;AAC5B,QAAIhO,KAAK,GAAGD,EAAE,IAAIA,EAAE,CAACC,KAArB;;AAEA,QAAIA,KAAJ,EAAW;AACV,UAAIgO,GAAG,KAAK,KAAK,CAAjB,EAAoB;AACnB,YAAI9P,QAAQ,CAAC+P,WAAT,IAAwB/P,QAAQ,CAAC+P,WAAT,CAAqBC,gBAAjD,EAAmE;AAClEF,UAAAA,GAAG,GAAG9P,QAAQ,CAAC+P,WAAT,CAAqBC,gBAArB,CAAsCnO,EAAtC,EAA0C,EAA1C,CAAN;AACA,SAFD,MAGK,IAAIA,EAAE,CAACoO,YAAP,EAAqB;AACzBH,UAAAA,GAAG,GAAGjO,EAAE,CAACoO,YAAT;AACA;;AAED,eAAOJ,IAAI,KAAK,KAAK,CAAd,GAAkBC,GAAlB,GAAwBA,GAAG,CAACD,IAAD,CAAlC;AACA,OATD,MAUK;AACJ,YAAI,EAAEA,IAAI,IAAI/N,KAAV,CAAJ,EAAsB;AACrB+N,UAAAA,IAAI,GAAG,aAAaA,IAApB;AACA;;AAED/N,QAAAA,KAAK,CAAC+N,IAAD,CAAL,GAAcC,GAAG,IAAI,OAAOA,GAAP,KAAe,QAAf,GAA0B,EAA1B,GAA+B,IAAnC,CAAjB;AACA;AACD;AACD;;AAGD,WAAS7G,KAAT,CAAemG,GAAf,EAAoBc,OAApB,EAA6BC,QAA7B,EAAuC;AACtC,QAAIf,GAAJ,EAAS;AACR,UAAIgB,IAAI,GAAGhB,GAAG,CAACiB,oBAAJ,CAAyBH,OAAzB,CAAX;AAAA,UAA8C3F,CAAC,GAAG,CAAlD;AAAA,UAAqD6D,CAAC,GAAGgC,IAAI,CAAC5F,MAA9D;;AAEA,UAAI2F,QAAJ,EAAc;AACb,eAAO5F,CAAC,GAAG6D,CAAX,EAAc7D,CAAC,EAAf,EAAmB;AAClB4F,UAAAA,QAAQ,CAACC,IAAI,CAAC7F,CAAD,CAAL,EAAUA,CAAV,CAAR;AACA;AACD;;AAED,aAAO6F,IAAP;AACA;;AAED,WAAO,EAAP;AACA;;AAID,WAAShI,cAAT,CAAwBkI,UAAxB,EAAoChQ,MAApC,EAA4CwE,IAA5C,EAAkDyL,QAAlD,EAA4DC,MAA5D,EAAoEC,UAApE,EAAgF3P,QAAhF,EAA0F;AACzF,QAAI0B,GAAG,GAAGxC,QAAQ,CAAC0Q,WAAT,CAAqB,OAArB,CAAV;AAAA,QACCjO,OAAO,GAAG,CAAC6N,UAAU,IAAIhQ,MAAM,CAACe,OAAD,CAArB,EAAgCoB,OAD3C;AAAA,QAECkO,MAAM,GAAG,OAAO7L,IAAI,CAACmC,MAAL,CAAY,CAAZ,EAAe2J,WAAf,EAAP,GAAsC9L,IAAI,CAAC+L,MAAL,CAAY,CAAZ,CAFhD;AAIArO,IAAAA,GAAG,CAACsO,SAAJ,CAAchM,IAAd,EAAoB,IAApB,EAA0B,IAA1B;AAEAtC,IAAAA,GAAG,CAACuO,EAAJ,GAASzQ,MAAT;AACAkC,IAAAA,GAAG,CAACwO,IAAJ,GAAWR,MAAM,IAAIlQ,MAArB;AACAkC,IAAAA,GAAG,CAACyO,IAAJ,GAAWV,QAAQ,IAAIjQ,MAAvB;AACAkC,IAAAA,GAAG,CAAC0O,KAAJ,GAAY7Q,OAAZ;AAEAmC,IAAAA,GAAG,CAAC3B,QAAJ,GAAe4P,UAAf;AACAjO,IAAAA,GAAG,CAAC1B,QAAJ,GAAeA,QAAf;AAEAR,IAAAA,MAAM,CAAC6Q,aAAP,CAAqB3O,GAArB;;AAEA,QAAIC,OAAO,CAACkO,MAAD,CAAX,EAAqB;AACpBlO,MAAAA,OAAO,CAACkO,MAAD,CAAP,CAAgBrL,IAAhB,CAAqBgL,UAArB,EAAiC9N,GAAjC;AACA;AACD;;AAGD,WAASkK,OAAT,CAAiB8D,MAAjB,EAAyBY,IAAzB,EAA+BlR,MAA/B,EAAuC4L,QAAvC,EAAiDyE,QAAjD,EAA2D9D,UAA3D,EAAuE;AACtE,QAAIjK,GAAJ;AAAA,QACC8N,UAAU,GAAGE,MAAM,CAACnP,OAAD,CADpB;AAAA,QAECgQ,QAAQ,GAAGf,UAAU,CAAC7N,OAAX,CAAmB6O,MAF/B;AAAA,QAGCC,MAHD;AAKA/O,IAAAA,GAAG,GAAGxC,QAAQ,CAAC0Q,WAAT,CAAqB,OAArB,CAAN;AACAlO,IAAAA,GAAG,CAACsO,SAAJ,CAAc,MAAd,EAAsB,IAAtB,EAA4B,IAA5B;AAEAtO,IAAAA,GAAG,CAACuO,EAAJ,GAASK,IAAT;AACA5O,IAAAA,GAAG,CAACwO,IAAJ,GAAWR,MAAX;AACAhO,IAAAA,GAAG,CAACgP,OAAJ,GAActR,MAAd;AACAsC,IAAAA,GAAG,CAACiP,WAAJ,GAAkB3F,QAAlB;AACAtJ,IAAAA,GAAG,CAACkP,OAAJ,GAAcnB,QAAQ,IAAIa,IAA1B;AACA5O,IAAAA,GAAG,CAACmP,WAAJ,GAAkBlF,UAAU,IAAI2E,IAAI,CAACrN,qBAAL,EAAhC;AAEAyM,IAAAA,MAAM,CAACW,aAAP,CAAqB3O,GAArB;;AAEA,QAAI6O,QAAJ,EAAc;AACbE,MAAAA,MAAM,GAAGF,QAAQ,CAAC/L,IAAT,CAAcgL,UAAd,EAA0B9N,GAA1B,CAAT;AACA;;AAED,WAAO+O,MAAP;AACA;;AAGD,WAASrI,iBAAT,CAA2BrH,EAA3B,EAA+B;AAC9BA,IAAAA,EAAE,CAACiE,SAAH,GAAe,KAAf;AACA;;AAGD,WAASuH,SAAT,GAAqB;AACpBpL,IAAAA,OAAO,GAAG,KAAV;AACA;AAGD;;;AACA,WAASsK,YAAT,CAAsB1K,EAAtB,EAA0BW,GAA1B,EAA+B;AAC9B,QAAI9B,MAAM,GAAGmB,EAAE,CAAC+P,gBAAhB;AAAA,QACEjP,IAAI,GAAGjC,MAAM,CAACqD,qBAAP,EADT;AAGA,WAAO,CAAEvB,GAAG,CAACW,OAAJ,IAAeR,IAAI,CAACwB,GAAL,GAAWxB,IAAI,CAAC0I,MAA/B,IAAyC,CAA1C,IAAiD7I,GAAG,CAACS,OAAJ,IAAeN,IAAI,CAACqB,KAAL,GAAarB,IAAI,CAACyI,KAAjC,IAA0C,CAA5F,KAAmG1K,MAA1G,CAJ8B,CAIoF;AAClH;AAGD;;;;;;;;AAMA,WAAS4N,WAAT,CAAqBzM,EAArB,EAAyB;AACxB,QAAIgQ,GAAG,GAAGhQ,EAAE,CAACqO,OAAH,GAAarO,EAAE,CAAC8N,SAAhB,GAA4B9N,EAAE,CAACiQ,GAA/B,GAAqCjQ,EAAE,CAACkQ,IAAxC,GAA+ClQ,EAAE,CAAC2E,WAA5D;AAAA,QACC+D,CAAC,GAAGsH,GAAG,CAACrH,MADT;AAAA,QAECwH,GAAG,GAAG,CAFP;;AAIA,WAAOzH,CAAC,EAAR,EAAY;AACXyH,MAAAA,GAAG,IAAIH,GAAG,CAACI,UAAJ,CAAe1H,CAAf,CAAP;AACA;;AAED,WAAOyH,GAAG,CAAC3M,QAAJ,CAAa,EAAb,CAAP;AACA;AAED;;;;;;;;;AAOA,WAAS8C,MAAT,CAAgBtG,EAAhB,EAAoB8M,QAApB,EAA8B;AAC7B,QAAIuD,KAAK,GAAG,CAAZ;;AAEA,QAAI,CAACrQ,EAAD,IAAO,CAACA,EAAE,CAACiC,UAAf,EAA2B;AAC1B,aAAO,CAAC,CAAR;AACA;;AAED,WAAOjC,EAAE,KAAKA,EAAE,GAAGA,EAAE,CAAC4L,sBAAb,CAAT,EAA+C;AAC9C,UAAI5L,EAAE,CAACmE,QAAH,CAAY4K,WAAZ,OAA8B,UAA9B,IACCvB,QAAQ,CAACxN,EAAD,EAAK8M,QAAL,CADb,EAC6B;AAC5BuD,QAAAA,KAAK;AACL;AACD;;AAED,WAAOA,KAAP;AACA;;AAED,WAAS7C,QAAT;AAAkB;AAAgBxN,EAAAA,EAAlC;AAAsC;AAAW8M,EAAAA,QAAjD,EAA2D;AAC1D,QAAI9M,EAAJ,EAAQ;AACP8M,MAAAA,QAAQ,GAAGA,QAAQ,CAACrG,KAAT,CAAe,GAAf,CAAX;AAEA,UAAI6J,GAAG,GAAGxD,QAAQ,CAACyD,KAAT,GAAiBxB,WAAjB,EAAV;AAAA,UACCyB,EAAE,GAAG,IAAIC,MAAJ,CAAW,SAAS3D,QAAQ,CAACxJ,IAAT,CAAc,GAAd,CAAT,GAA8B,UAAzC,EAAqD,GAArD,CADN;AAGA,aACC,CAACgN,GAAG,KAAK,EAAR,IAActQ,EAAE,CAACmE,QAAH,CAAY4K,WAAZ,MAA6BuB,GAA5C,MACC,CAACxD,QAAQ,CAACnE,MAAV,IAAoB,CAAC,CAAC,MAAM3I,EAAE,CAAC8N,SAAT,GAAqB,GAAtB,EAA2B4C,KAA3B,CAAiCF,EAAjC,KAAwC,EAAzC,EAA6C7H,MAA7C,IAAuDmE,QAAQ,CAACnE,MADrF,CADD;AAIA;;AAED,WAAO,KAAP;AACA;;AAED,WAASjI,SAAT,CAAmBiQ,QAAnB,EAA6B7E,EAA7B,EAAiC;AAChC,QAAI8E,IAAJ,EAAU9K,KAAV;;AAEA,WAAO,YAAY;AAClB,UAAI8K,IAAI,KAAK,KAAK,CAAlB,EAAqB;AACpBA,QAAAA,IAAI,GAAGC,SAAP;AACA/K,QAAAA,KAAK,GAAG,IAAR;AAEA0B,QAAAA,UAAU,CAAC,YAAY;AACtB,cAAIoJ,IAAI,CAACjI,MAAL,KAAgB,CAApB,EAAuB;AACtBgI,YAAAA,QAAQ,CAAClN,IAAT,CAAcqC,KAAd,EAAqB8K,IAAI,CAAC,CAAD,CAAzB;AACA,WAFD,MAEO;AACND,YAAAA,QAAQ,CAACG,KAAT,CAAehL,KAAf,EAAsB8K,IAAtB;AACA;;AAEDA,UAAAA,IAAI,GAAG,KAAK,CAAZ;AACA,SARS,EAQP9E,EARO,CAAV;AASA;AACD,KAfD;AAgBA;;AAED,WAASpI,OAAT,CAAiBqN,GAAjB,EAAsBd,GAAtB,EAA2B;AAC1B,QAAIc,GAAG,IAAId,GAAX,EAAgB;AACf,WAAK,IAAI9M,GAAT,IAAgB8M,GAAhB,EAAqB;AACpB,YAAIA,GAAG,CAACe,cAAJ,CAAmB7N,GAAnB,CAAJ,EAA6B;AAC5B4N,UAAAA,GAAG,CAAC5N,GAAD,CAAH,GAAW8M,GAAG,CAAC9M,GAAD,CAAd;AACA;AACD;AACD;;AAED,WAAO4N,GAAP;AACA,GA9rCa,CAisCd;;;AACA9S,EAAAA,UAAU,CAACgT,KAAX,GAAmB;AAClBC,IAAAA,EAAE,EAAE3L,GADc;AAElB4L,IAAAA,GAAG,EAAEzJ,IAFa;AAGlBwB,IAAAA,GAAG,EAAEZ,IAHa;AAIlB8I,IAAAA,IAAI,EAAEhK,KAJY;AAKlBiK,IAAAA,EAAE,EAAE,YAAUrR,EAAV,EAAc8M,QAAd,EAAwB;AAC3B,aAAO,CAAC,CAACzG,QAAQ,CAACrG,EAAD,EAAK8M,QAAL,EAAe9M,EAAf,CAAjB;AACA,KAPiB;AAQlBsR,IAAAA,MAAM,EAAE5N,OARU;AASlB6N,IAAAA,QAAQ,EAAE7Q,SATQ;AAUlBmM,IAAAA,OAAO,EAAExG,QAVS;AAWlBmL,IAAAA,WAAW,EAAEtK,YAXK;AAYlBmJ,IAAAA,KAAK,EAAE/J;AAZW,GAAnB;AAgBA;;;;;;AAKArI,EAAAA,UAAU,CAACwT,MAAX,GAAoB,UAAUzR,EAAV,EAAcY,OAAd,EAAuB;AAC1C,WAAO,IAAI3C,UAAJ,CAAe+B,EAAf,EAAmBY,OAAnB,CAAP;AACA,GAFD,CAvtCc,CA4tCd;;;AACA3C,EAAAA,UAAU,CAACyT,OAAX,GAAqB,OAArB;AACA,SAAOzT,UAAP;AACA,CA/uCD;AAgvCA;;;;;;;AAKA,CAAC,UAAUN,OAAV,EAAmB;AACnB;;AAEA,MAAI,OAAOC,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,CAACC,GAA3C,EAAgD;AAC/CD,IAAAA,MAAM,CAAC,CAAC,QAAD,CAAD,EAAaD,OAAb,CAAN;AACA,GAFD,MAGK;AACJ;AACAA,IAAAA,OAAO,CAACgU,MAAD,CAAP;AACA;AACD,CAVD,EAUG,UAAUC,CAAV,EAAa;AACf;AAGA;;AAGA;;;;;;;AAMAA,EAAAA,CAAC,CAACzM,EAAF,CAAKsJ,UAAL,GAAkB,UAAU7N,OAAV,EAAmB;AACpC,QAAI8O,MAAJ;AAAA,QACCkB,IAAI,GAAGC,SADR;AAGA,SAAKgB,IAAL,CAAU,YAAY;AACrB,UAAIC,GAAG,GAAGF,CAAC,CAAC,IAAD,CAAX;AAAA,UACCnD,UAAU,GAAGqD,GAAG,CAACC,IAAJ,CAAS,YAAT,CADd;;AAGA,UAAI,CAACtD,UAAD,KAAgB7N,OAAO,YAAYoR,MAAnB,IAA6B,CAACpR,OAA9C,CAAJ,EAA4D;AAC3D6N,QAAAA,UAAU,GAAG,IAAIxQ,UAAJ,CAAe,IAAf,EAAqB2C,OAArB,CAAb;AACAkR,QAAAA,GAAG,CAACC,IAAJ,CAAS,YAAT,EAAuBtD,UAAvB;AACA;;AAED,UAAIA,UAAJ,EAAgB;AACf,YAAI7N,OAAO,KAAK,QAAhB,EAA0B;AACzB,iBAAO6N,UAAP;AACA,SAFD,MAGK,IAAI7N,OAAO,KAAK,SAAhB,EAA2B;AAC/B6N,UAAAA,UAAU,CAACxB,OAAX;AACA6E,UAAAA,GAAG,CAACG,UAAJ,CAAe,YAAf;AACA,SAHI,MAIA,IAAI,OAAOxD,UAAU,CAAC7N,OAAD,CAAjB,KAA+B,UAAnC,EAA+C;AACnD8O,UAAAA,MAAM,GAAGjB,UAAU,CAAC7N,OAAD,CAAV,CAAoBkQ,KAApB,CAA0BrC,UAA1B,EAAsC,GAAGlO,KAAH,CAASkD,IAAT,CAAcmN,IAAd,EAAoB,CAApB,CAAtC,CAAT;AACA,SAFI,MAGA,IAAIhQ,OAAO,IAAI6N,UAAU,CAAC7N,OAA1B,EAAmC;AACvC8O,UAAAA,MAAM,GAAGjB,UAAU,CAAC1B,MAAX,CAAkB+D,KAAlB,CAAwBrC,UAAxB,EAAoCmC,IAApC,CAAT;AACA;AACD;AACD,KAxBD;AA0BA,WAAQlB,MAAM,KAAK,KAAK,CAAjB,GAAsB,IAAtB,GAA6BA,MAApC;AACA,GA/BD;AAgCA,CAvDD","sourcesContent":["/**!\n * KvSortable\n * @author\tRubaXa   <trash@rubaxa.org>\n * @license MIT\n *\n * Changed kvsortable plugin naming to prevent conflict with JQuery UI KvSortable\n * @author Kartik Visweswaran\n */\n(function (factory) {\n\t\"use strict\";\n\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(factory);\n\t}\n\telse if (typeof module != \"undefined\" && typeof module.exports != \"undefined\") {\n\t\tmodule.exports = factory();\n\t}\n\telse if (typeof Package !== \"undefined\") {\n\t\tKvSortable = factory();  // export for Meteor.js\n\t}\n\telse {\n\t\t/* jshint sub:true */\n\t\twindow[\"KvSortable\"] = factory();\n\t}\n})(function () {\n\t\"use strict\";\n\t\n\tif (typeof window === \"undefined\" || typeof window.document == \"undefined\") {\n\t\treturn function() {\n\t\t\tthrow new Error( \"sortable.js requires a window with a document\" );\n\t\t}\n\t}\n\n\tvar dragEl,\n\t\tparentEl,\n\t\tghostEl,\n\t\tcloneEl,\n\t\trootEl,\n\t\tnextEl,\n\n\t\tscrollEl,\n\t\tscrollParentEl,\n\n\t\tlastEl,\n\t\tlastCSS,\n\t\tlastParentCSS,\n\n\t\toldIndex,\n\t\tnewIndex,\n\n\t\tactiveGroup,\n\t\tautoScroll = {},\n\n\t\ttapEvt,\n\t\ttouchEvt,\n\n\t\tmoved,\n\n\t\t/** @const */\n\t\tRSPACE = /\\s+/g,\n\n\t\texpando = 'KvSortable' + (new Date).getTime(),\n\n\t\twin = window,\n\t\tdocument = win.document,\n\t\tparseInt = win.parseInt,\n\n\t\tsupportDraggable = !!('draggable' in document.createElement('div')),\n\t\tsupportCssPointerEvents = (function (el) {\n\t\t\tel = document.createElement('x');\n\t\t\tel.style.cssText = 'pointer-events:auto';\n\t\t\treturn el.style.pointerEvents === 'auto';\n\t\t})(),\n\n\t\t_silent = false,\n\n\t\tabs = Math.abs,\n\t\tslice = [].slice,\n\n\t\ttouchDragOverListeners = [],\n\n\t\t_autoScroll = _throttle(function (/**Event*/evt, /**Object*/options, /**HTMLElement*/rootEl) {\n\t\t\t// Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n\t\t\tif (rootEl && options.scroll) {\n\t\t\t\tvar el,\n\t\t\t\t\trect,\n\t\t\t\t\tsens = options.scrollSensitivity,\n\t\t\t\t\tspeed = options.scrollSpeed,\n\n\t\t\t\t\tx = evt.clientX,\n\t\t\t\t\ty = evt.clientY,\n\n\t\t\t\t\twinWidth = window.innerWidth,\n\t\t\t\t\twinHeight = window.innerHeight,\n\n\t\t\t\t\tvx,\n\t\t\t\t\tvy\n\t\t\t\t;\n\n\t\t\t\t// Delect scrollEl\n\t\t\t\tif (scrollParentEl !== rootEl) {\n\t\t\t\t\tscrollEl = options.scroll;\n\t\t\t\t\tscrollParentEl = rootEl;\n\n\t\t\t\t\tif (scrollEl === true) {\n\t\t\t\t\t\tscrollEl = rootEl;\n\n\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\tif ((scrollEl.offsetWidth < scrollEl.scrollWidth) ||\n\t\t\t\t\t\t\t\t(scrollEl.offsetHeight < scrollEl.scrollHeight)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/* jshint boss:true */\n\t\t\t\t\t\t} while (scrollEl = scrollEl.parentNode);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (scrollEl) {\n\t\t\t\t\tel = scrollEl;\n\t\t\t\t\trect = scrollEl.getBoundingClientRect();\n\t\t\t\t\tvx = (abs(rect.right - x) <= sens) - (abs(rect.left - x) <= sens);\n\t\t\t\t\tvy = (abs(rect.bottom - y) <= sens) - (abs(rect.top - y) <= sens);\n\t\t\t\t}\n\n\n\t\t\t\tif (!(vx || vy)) {\n\t\t\t\t\tvx = (winWidth - x <= sens) - (x <= sens);\n\t\t\t\t\tvy = (winHeight - y <= sens) - (y <= sens);\n\n\t\t\t\t\t/* jshint expr:true */\n\t\t\t\t\t(vx || vy) && (el = win);\n\t\t\t\t}\n\n\n\t\t\t\tif (autoScroll.vx !== vx || autoScroll.vy !== vy || autoScroll.el !== el) {\n\t\t\t\t\tautoScroll.el = el;\n\t\t\t\t\tautoScroll.vx = vx;\n\t\t\t\t\tautoScroll.vy = vy;\n\n\t\t\t\t\tclearInterval(autoScroll.pid);\n\n\t\t\t\t\tif (el) {\n\t\t\t\t\t\tautoScroll.pid = setInterval(function () {\n\t\t\t\t\t\t\tif (el === win) {\n\t\t\t\t\t\t\t\twin.scrollTo(win.pageXOffset + vx * speed, win.pageYOffset + vy * speed);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvy && (el.scrollTop += vy * speed);\n\t\t\t\t\t\t\t\tvx && (el.scrollLeft += vx * speed);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 24);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}, 30),\n\n\t\t_prepareGroup = function (options) {\n\t\t\tvar group = options.group;\n\n\t\t\tif (!group || typeof group != 'object') {\n\t\t\t\tgroup = options.group = {name: group};\n\t\t\t}\n\n\t\t\t['pull', 'put'].forEach(function (key) {\n\t\t\t\tif (!(key in group)) {\n\t\t\t\t\tgroup[key] = true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\toptions.groups = ' ' + group.name + (group.put.join ? ' ' + group.put.join(' ') : '') + ' ';\n\t\t}\n\t;\n\n\n\n\t/**\n\t * @class  KvSortable\n\t * @param  {HTMLElement}  el\n\t * @param  {Object}       [options]\n\t */\n\tfunction KvSortable(el, options) {\n\t\tif (!(el && el.nodeType && el.nodeType === 1)) {\n\t\t\tthrow 'KvSortable: `el` must be HTMLElement, and not ' + {}.toString.call(el);\n\t\t}\n\n\t\tthis.el = el; // root element\n\t\tthis.options = options = _extend({}, options);\n\n\n\t\t// Export instance\n\t\tel[expando] = this;\n\n\n\t\t// Default options\n\t\tvar defaults = {\n\t\t\tgroup: Math.random(),\n\t\t\tsort: true,\n\t\t\tdisabled: false,\n\t\t\tstore: null,\n\t\t\thandle: null,\n\t\t\tscroll: true,\n\t\t\tscrollSensitivity: 30,\n\t\t\tscrollSpeed: 10,\n\t\t\tdraggable: /[uo]l/i.test(el.nodeName) ? 'li' : '>*',\n\t\t\tghostClass: 'kvsortable-ghost',\n\t\t\tchosenClass: 'kvsortable-chosen',\n\t\t\tignore: 'a, img',\n\t\t\tfilter: null,\n\t\t\tanimation: 0,\n\t\t\tsetData: function (dataTransfer, dragEl) {\n\t\t\t\tdataTransfer.setData('Text', dragEl.textContent);\n\t\t\t},\n\t\t\tdropBubble: false,\n\t\t\tdragoverBubble: false,\n\t\t\tdataIdAttr: 'data-id',\n\t\t\tdelay: 0,\n\t\t\tforceFallback: false,\n\t\t\tfallbackClass: 'kvsortable-fallback',\n\t\t\tfallbackOnBody: false\n\t\t};\n\n\n\t\t// Set default options\n\t\tfor (var name in defaults) {\n\t\t\t!(name in options) && (options[name] = defaults[name]);\n\t\t}\n\n\t\t_prepareGroup(options);\n\n\t\t// Bind all private methods\n\t\tfor (var fn in this) {\n\t\t\tif (fn.charAt(0) === '_') {\n\t\t\t\tthis[fn] = this[fn].bind(this);\n\t\t\t}\n\t\t}\n\n\t\t// Setup drag mode\n\t\tthis.nativeDraggable = options.forceFallback ? false : supportDraggable;\n\n\t\t// Bind events\n\t\t_on(el, 'mousedown', this._onTapStart);\n\t\t_on(el, 'touchstart', this._onTapStart);\n\n\t\tif (this.nativeDraggable) {\n\t\t\t_on(el, 'dragover', this);\n\t\t\t_on(el, 'dragenter', this);\n\t\t}\n\n\t\ttouchDragOverListeners.push(this._onDragOver);\n\n\t\t// Restore sorting\n\t\toptions.store && this.sort(options.store.get(this));\n\t}\n\n\n\tKvSortable.prototype = /** @lends KvSortable.prototype */ {\n\t\tconstructor: KvSortable,\n\n\t\t_onTapStart: function (/** Event|TouchEvent */evt) {\n\t\t\tvar _this = this,\n\t\t\t\tel = this.el,\n\t\t\t\toptions = this.options,\n\t\t\t\ttype = evt.type,\n\t\t\t\ttouch = evt.touches && evt.touches[0],\n\t\t\t\ttarget = (touch || evt).target,\n\t\t\t\toriginalTarget = target,\n\t\t\t\tfilter = options.filter;\n\n\n\t\t\tif (type === 'mousedown' && evt.button !== 0 || options.disabled) {\n\t\t\t\treturn; // only left button or enabled\n\t\t\t}\n\n\t\t\ttarget = _closest(target, options.draggable, el);\n\n\t\t\tif (!target) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// get the index of the dragged element within its parent\n\t\t\toldIndex = _index(target, options.draggable);\n\n\t\t\t// Check filter\n\t\t\tif (typeof filter === 'function') {\n\t\t\t\tif (filter.call(this, evt, target, this)) {\n\t\t\t\t\t_dispatchEvent(_this, originalTarget, 'filter', target, el, oldIndex);\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\treturn; // cancel dnd\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (filter) {\n\t\t\t\tfilter = filter.split(',').some(function (criteria) {\n\t\t\t\t\tcriteria = _closest(originalTarget, criteria.trim(), el);\n\n\t\t\t\t\tif (criteria) {\n\t\t\t\t\t\t_dispatchEvent(_this, criteria, 'filter', target, el, oldIndex);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (filter) {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\treturn; // cancel dnd\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tif (options.handle && !_closest(originalTarget, options.handle, el)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\n\t\t\t// Prepare `dragstart`\n\t\t\tthis._prepareDragStart(evt, touch, target);\n\t\t},\n\n\t\t_prepareDragStart: function (/** Event */evt, /** Touch */touch, /** HTMLElement */target) {\n\t\t\tvar _this = this,\n\t\t\t\tel = _this.el,\n\t\t\t\toptions = _this.options,\n\t\t\t\townerDocument = el.ownerDocument,\n\t\t\t\tdragStartFn;\n\n\t\t\tif (target && !dragEl && (target.parentNode === el)) {\n\t\t\t\ttapEvt = evt;\n\n\t\t\t\trootEl = el;\n\t\t\t\tdragEl = target;\n\t\t\t\tparentEl = dragEl.parentNode;\n\t\t\t\tnextEl = dragEl.nextSibling;\n\t\t\t\tactiveGroup = options.group;\n\n\t\t\t\tdragStartFn = function () {\n\t\t\t\t\t// Delayed drag has been triggered\n\t\t\t\t\t// we can re-enable the events: touchmove/mousemove\n\t\t\t\t\t_this._disableDelayedDrag();\n\n\t\t\t\t\t// Make the element draggable\n\t\t\t\t\tdragEl.draggable = true;\n\n\t\t\t\t\t// Chosen item\n\t\t\t\t\t_toggleClass(dragEl, _this.options.chosenClass, true);\n\n\t\t\t\t\t// Bind the events: dragstart/dragend\n\t\t\t\t\t_this._triggerDragStart(touch);\n\t\t\t\t};\n\n\t\t\t\t// Disable \"draggable\"\n\t\t\t\toptions.ignore.split(',').forEach(function (criteria) {\n\t\t\t\t\t_find(dragEl, criteria.trim(), _disableDraggable);\n\t\t\t\t});\n\n\t\t\t\t_on(ownerDocument, 'mouseup', _this._onDrop);\n\t\t\t\t_on(ownerDocument, 'touchend', _this._onDrop);\n\t\t\t\t_on(ownerDocument, 'touchcancel', _this._onDrop);\n\n\t\t\t\tif (options.delay) {\n\t\t\t\t\t// If the user moves the pointer or let go the click or touch\n\t\t\t\t\t// before the delay has been reached:\n\t\t\t\t\t// disable the delayed drag\n\t\t\t\t\t_on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'mousemove', _this._disableDelayedDrag);\n\t\t\t\t\t_on(ownerDocument, 'touchmove', _this._disableDelayedDrag);\n\n\t\t\t\t\t_this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n\t\t\t\t} else {\n\t\t\t\t\tdragStartFn();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_disableDelayedDrag: function () {\n\t\t\tvar ownerDocument = this.el.ownerDocument;\n\n\t\t\tclearTimeout(this._dragStartTimer);\n\t\t\t_off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchend', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'mousemove', this._disableDelayedDrag);\n\t\t\t_off(ownerDocument, 'touchmove', this._disableDelayedDrag);\n\t\t},\n\n\t\t_triggerDragStart: function (/** Touch */touch) {\n\t\t\tif (touch) {\n\t\t\t\t// Touch device support\n\t\t\t\ttapEvt = {\n\t\t\t\t\ttarget: dragEl,\n\t\t\t\t\tclientX: touch.clientX,\n\t\t\t\t\tclientY: touch.clientY\n\t\t\t\t};\n\n\t\t\t\tthis._onDragStart(tapEvt, 'touch');\n\t\t\t}\n\t\t\telse if (!this.nativeDraggable) {\n\t\t\t\tthis._onDragStart(tapEvt, true);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t_on(dragEl, 'dragend', this);\n\t\t\t\t_on(rootEl, 'dragstart', this._onDragStart);\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tif (document.selection) {\n\t\t\t\t\tdocument.selection.empty();\n\t\t\t\t} else {\n\t\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t}\n\t\t},\n\n\t\t_dragStarted: function () {\n\t\t\tif (rootEl && dragEl) {\n\t\t\t\t// Apply effect\n\t\t\t\t_toggleClass(dragEl, this.options.ghostClass, true);\n\n\t\t\t\tKvSortable.active = this;\n\n\t\t\t\t// Drag start event\n\t\t\t\t_dispatchEvent(this, rootEl, 'start', dragEl, rootEl, oldIndex);\n\t\t\t}\n\t\t},\n\n\t\t_emulateDragOver: function () {\n\t\t\tif (touchEvt) {\n\t\t\t\tif (this._lastX === touchEvt.clientX && this._lastY === touchEvt.clientY) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis._lastX = touchEvt.clientX;\n\t\t\t\tthis._lastY = touchEvt.clientY;\n\n\t\t\t\tif (!supportCssPointerEvents) {\n\t\t\t\t\t_css(ghostEl, 'display', 'none');\n\t\t\t\t}\n\n\t\t\t\tvar target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY),\n\t\t\t\t\tparent = target,\n\t\t\t\t\tgroupName = ' ' + this.options.group.name + '',\n\t\t\t\t\ti = touchDragOverListeners.length;\n\n\t\t\t\tif (parent) {\n\t\t\t\t\tdo {\n\t\t\t\t\t\tif (parent[expando] && parent[expando].options.groups.indexOf(groupName) > -1) {\n\t\t\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\t\t\ttouchDragOverListeners[i]({\n\t\t\t\t\t\t\t\t\tclientX: touchEvt.clientX,\n\t\t\t\t\t\t\t\t\tclientY: touchEvt.clientY,\n\t\t\t\t\t\t\t\t\ttarget: target,\n\t\t\t\t\t\t\t\t\trootEl: parent\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttarget = parent; // store last element\n\t\t\t\t\t}\n\t\t\t\t\t/* jshint boss:true */\n\t\t\t\t\twhile (parent = parent.parentNode);\n\t\t\t\t}\n\n\t\t\t\tif (!supportCssPointerEvents) {\n\t\t\t\t\t_css(ghostEl, 'display', '');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t_onTouchMove: function (/**TouchEvent*/evt) {\n\t\t\tif (tapEvt) {\n\t\t\t\t// only set the status to dragging, when we are actually dragging\n\t\t\t\tif (!KvSortable.active) {\n\t\t\t\t\tthis._dragStarted();\n\t\t\t\t}\n\n\t\t\t\t// as well as creating the ghost element on the document body\n\t\t\t\tthis._appendGhost();\n\n\t\t\t\tvar touch = evt.touches ? evt.touches[0] : evt,\n\t\t\t\t\tdx = touch.clientX - tapEvt.clientX,\n\t\t\t\t\tdy = touch.clientY - tapEvt.clientY,\n\t\t\t\t\ttranslate3d = evt.touches ? 'translate3d(' + dx + 'px,' + dy + 'px,0)' : 'translate(' + dx + 'px,' + dy + 'px)';\n\n\t\t\t\tmoved = true;\n\t\t\t\ttouchEvt = touch;\n\n\t\t\t\t_css(ghostEl, 'webkitTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'mozTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'msTransform', translate3d);\n\t\t\t\t_css(ghostEl, 'transform', translate3d);\n\n\t\t\t\tevt.preventDefault();\n\t\t\t}\n\t\t},\n\n\t\t_appendGhost: function () {\n\t\t\tif (!ghostEl) {\n\t\t\t\tvar rect = dragEl.getBoundingClientRect(),\n\t\t\t\t\tcss = _css(dragEl),\n\t\t\t\t\toptions = this.options,\n\t\t\t\t\tghostRect;\n\n\t\t\t\tghostEl = dragEl.cloneNode(true);\n\n\t\t\t\t_toggleClass(ghostEl, options.ghostClass, false);\n\t\t\t\t_toggleClass(ghostEl, options.fallbackClass, true);\n\n\t\t\t\t_css(ghostEl, 'top', rect.top - parseInt(css.marginTop, 10));\n\t\t\t\t_css(ghostEl, 'left', rect.left - parseInt(css.marginLeft, 10));\n\t\t\t\t_css(ghostEl, 'width', rect.width);\n\t\t\t\t_css(ghostEl, 'height', rect.height);\n\t\t\t\t_css(ghostEl, 'opacity', '0.8');\n\t\t\t\t_css(ghostEl, 'position', 'fixed');\n\t\t\t\t_css(ghostEl, 'zIndex', '100000');\n\t\t\t\t_css(ghostEl, 'pointerEvents', 'none');\n\n\t\t\t\toptions.fallbackOnBody && document.body.appendChild(ghostEl) || rootEl.appendChild(ghostEl);\n\n\t\t\t\t// Fixing dimensions.\n\t\t\t\tghostRect = ghostEl.getBoundingClientRect();\n\t\t\t\t_css(ghostEl, 'width', rect.width * 2 - ghostRect.width);\n\t\t\t\t_css(ghostEl, 'height', rect.height * 2 - ghostRect.height);\n\t\t\t}\n\t\t},\n\n\t\t_onDragStart: function (/**Event*/evt, /**boolean*/useFallback) {\n\t\t\tvar dataTransfer = evt.dataTransfer,\n\t\t\t\toptions = this.options;\n\n\t\t\tthis._offUpEvents();\n\n\t\t\tif (activeGroup.pull == 'clone') {\n\t\t\t\tcloneEl = dragEl.cloneNode(true);\n\t\t\t\t_css(cloneEl, 'display', 'none');\n\t\t\t\trootEl.insertBefore(cloneEl, dragEl);\n\t\t\t}\n\n\t\t\tif (useFallback) {\n\n\t\t\t\tif (useFallback === 'touch') {\n\t\t\t\t\t// Bind touch events\n\t\t\t\t\t_on(document, 'touchmove', this._onTouchMove);\n\t\t\t\t\t_on(document, 'touchend', this._onDrop);\n\t\t\t\t\t_on(document, 'touchcancel', this._onDrop);\n\t\t\t\t} else {\n\t\t\t\t\t// Old brwoser\n\t\t\t\t\t_on(document, 'mousemove', this._onTouchMove);\n\t\t\t\t\t_on(document, 'mouseup', this._onDrop);\n\t\t\t\t}\n\n\t\t\t\tthis._loopId = setInterval(this._emulateDragOver, 50);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (dataTransfer) {\n\t\t\t\t\tdataTransfer.effectAllowed = 'move';\n\t\t\t\t\toptions.setData && options.setData.call(this, dataTransfer, dragEl);\n\t\t\t\t}\n\n\t\t\t\t_on(document, 'drop', this);\n\t\t\t\tsetTimeout(this._dragStarted, 0);\n\t\t\t}\n\t\t},\n\n\t\t_onDragOver: function (/**Event*/evt) {\n\t\t\tvar el = this.el,\n\t\t\t\ttarget,\n\t\t\t\tdragRect,\n\t\t\t\trevert,\n\t\t\t\toptions = this.options,\n\t\t\t\tgroup = options.group,\n\t\t\t\tgroupPut = group.put,\n\t\t\t\tisOwner = (activeGroup === group),\n\t\t\t\tcanSort = options.sort;\n\n\t\t\tif (evt.preventDefault !== void 0) {\n\t\t\t\tevt.preventDefault();\n\t\t\t\t!options.dragoverBubble && evt.stopPropagation();\n\t\t\t}\n\n\t\t\tmoved = true;\n\n\t\t\tif (activeGroup && !options.disabled &&\n\t\t\t\t(isOwner\n\t\t\t\t\t? canSort || (revert = !rootEl.contains(dragEl)) // Reverting item into the original list\n\t\t\t\t\t: activeGroup.pull && groupPut && (\n\t\t\t\t\t\t(activeGroup.name === group.name) || // by Name\n\t\t\t\t\t\t(groupPut.indexOf && ~groupPut.indexOf(activeGroup.name)) // by Array\n\t\t\t\t\t)\n\t\t\t\t) &&\n\t\t\t\t(evt.rootEl === void 0 || evt.rootEl === this.el) // touch fallback\n\t\t\t) {\n\t\t\t\t// Smart auto-scrolling\n\t\t\t\t_autoScroll(evt, options, this.el);\n\n\t\t\t\tif (_silent) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttarget = _closest(evt.target, options.draggable, el);\n\t\t\t\tdragRect = dragEl.getBoundingClientRect();\n\n\t\t\t\tif (revert) {\n\t\t\t\t\t_cloneHide(true);\n\n\t\t\t\t\tif (cloneEl || nextEl) {\n\t\t\t\t\t\trootEl.insertBefore(dragEl, cloneEl || nextEl);\n\t\t\t\t\t}\n\t\t\t\t\telse if (!canSort) {\n\t\t\t\t\t\trootEl.appendChild(dragEl);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\n\t\t\t\tif ((el.children.length === 0) || (el.children[0] === ghostEl) ||\n\t\t\t\t\t(el === evt.target) && (target = _ghostIsLast(el, evt))\n\t\t\t\t) {\n\n\t\t\t\t\tif (target) {\n\t\t\t\t\t\tif (target.animated) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttargetRect = target.getBoundingClientRect();\n\t\t\t\t\t}\n\n\t\t\t\t\t_cloneHide(isOwner);\n\n\t\t\t\t\tif (_onMove(rootEl, el, dragEl, dragRect, target, targetRect) !== false) {\n\t\t\t\t\t\tif (!dragEl.contains(el)) {\n\t\t\t\t\t\t\tel.appendChild(dragEl);\n\t\t\t\t\t\t\tparentEl = el; // actualization\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._animate(dragRect, dragEl);\n\t\t\t\t\t\ttarget && this._animate(targetRect, target);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (target && !target.animated && target !== dragEl && (target.parentNode[expando] !== void 0)) {\n\t\t\t\t\tif (lastEl !== target) {\n\t\t\t\t\t\tlastEl = target;\n\t\t\t\t\t\tlastCSS = _css(target);\n\t\t\t\t\t\tlastParentCSS = _css(target.parentNode);\n\t\t\t\t\t}\n\n\n\t\t\t\t\tvar targetRect = target.getBoundingClientRect(),\n\t\t\t\t\t\twidth = targetRect.right - targetRect.left,\n\t\t\t\t\t\theight = targetRect.bottom - targetRect.top,\n\t\t\t\t\t\tfloating = /left|right|inline/.test(lastCSS.cssFloat + lastCSS.display)\n\t\t\t\t\t\t\t|| (lastParentCSS.display == 'flex' && lastParentCSS['flex-direction'].indexOf('row') === 0),\n\t\t\t\t\t\tisWide = (target.offsetWidth > dragEl.offsetWidth),\n\t\t\t\t\t\tisLong = (target.offsetHeight > dragEl.offsetHeight),\n\t\t\t\t\t\thalfway = (floating ? (evt.clientX - targetRect.left) / width : (evt.clientY - targetRect.top) / height) > 0.5,\n\t\t\t\t\t\tnextSibling = target.nextElementSibling,\n\t\t\t\t\t\tmoveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect),\n\t\t\t\t\t\tafter\n\t\t\t\t\t;\n\n\t\t\t\t\tif (moveVector !== false) {\n\t\t\t\t\t\t_silent = true;\n\t\t\t\t\t\tsetTimeout(_unsilent, 30);\n\n\t\t\t\t\t\t_cloneHide(isOwner);\n\n\t\t\t\t\t\tif (moveVector === 1 || moveVector === -1) {\n\t\t\t\t\t\t\tafter = (moveVector === 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (floating) {\n\t\t\t\t\t\t\tvar elTop = dragEl.offsetTop,\n\t\t\t\t\t\t\t\ttgTop = target.offsetTop;\n\n\t\t\t\t\t\t\tif (elTop === tgTop) {\n\t\t\t\t\t\t\t\tafter = (target.previousElementSibling === dragEl) && !isWide || halfway && isWide;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tafter = tgTop > elTop;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tafter = (nextSibling !== dragEl) && !isLong || halfway && isLong;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!dragEl.contains(el)) {\n\t\t\t\t\t\t\tif (after && !nextSibling) {\n\t\t\t\t\t\t\t\tel.appendChild(dragEl);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttarget.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tparentEl = dragEl.parentNode; // actualization\n\n\t\t\t\t\t\tthis._animate(dragRect, dragEl);\n\t\t\t\t\t\tthis._animate(targetRect, target);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t_animate: function (prevRect, target) {\n\t\t\tvar ms = this.options.animation;\n\n\t\t\tif (ms) {\n\t\t\t\tvar currentRect = target.getBoundingClientRect();\n\n\t\t\t\t_css(target, 'transition', 'none');\n\t\t\t\t_css(target, 'transform', 'translate3d('\n\t\t\t\t\t+ (prevRect.left - currentRect.left) + 'px,'\n\t\t\t\t\t+ (prevRect.top - currentRect.top) + 'px,0)'\n\t\t\t\t);\n\n\t\t\t\ttarget.offsetWidth; // repaint\n\n\t\t\t\t_css(target, 'transition', 'all ' + ms + 'ms');\n\t\t\t\t_css(target, 'transform', 'translate3d(0,0,0)');\n\n\t\t\t\tclearTimeout(target.animated);\n\t\t\t\ttarget.animated = setTimeout(function () {\n\t\t\t\t\t_css(target, 'transition', '');\n\t\t\t\t\t_css(target, 'transform', '');\n\t\t\t\t\ttarget.animated = false;\n\t\t\t\t}, ms);\n\t\t\t}\n\t\t},\n\n\t\t_offUpEvents: function () {\n\t\t\tvar ownerDocument = this.el.ownerDocument;\n\n\t\t\t_off(document, 'touchmove', this._onTouchMove);\n\t\t\t_off(ownerDocument, 'mouseup', this._onDrop);\n\t\t\t_off(ownerDocument, 'touchend', this._onDrop);\n\t\t\t_off(ownerDocument, 'touchcancel', this._onDrop);\n\t\t},\n\n\t\t_onDrop: function (/**Event*/evt) {\n\t\t\tvar el = this.el,\n\t\t\t\toptions = this.options;\n\n\t\t\tclearInterval(this._loopId);\n\t\t\tclearInterval(autoScroll.pid);\n\t\t\tclearTimeout(this._dragStartTimer);\n\n\t\t\t// Unbind events\n\t\t\t_off(document, 'mousemove', this._onTouchMove);\n\n\t\t\tif (this.nativeDraggable) {\n\t\t\t\t_off(document, 'drop', this);\n\t\t\t\t_off(el, 'dragstart', this._onDragStart);\n\t\t\t}\n\n\t\t\tthis._offUpEvents();\n\n\t\t\tif (evt) {\n\t\t\t\tif (moved) {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t!options.dropBubble && evt.stopPropagation();\n\t\t\t\t}\n\n\t\t\t\tghostEl && ghostEl.parentNode.removeChild(ghostEl);\n\n\t\t\t\tif (dragEl) {\n\t\t\t\t\tif (this.nativeDraggable) {\n\t\t\t\t\t\t_off(dragEl, 'dragend', this);\n\t\t\t\t\t}\n\n\t\t\t\t\t_disableDraggable(dragEl);\n\n\t\t\t\t\t// Remove class's\n\t\t\t\t\t_toggleClass(dragEl, this.options.ghostClass, false);\n\t\t\t\t\t_toggleClass(dragEl, this.options.chosenClass, false);\n\n\t\t\t\t\tif (rootEl !== parentEl) {\n\t\t\t\t\t\tnewIndex = _index(dragEl, options.draggable);\n\n\t\t\t\t\t\tif (newIndex >= 0) {\n\t\t\t\t\t\t\t// drag from one list and drop into another\n\t\t\t\t\t\t\t_dispatchEvent(null, parentEl, 'sort', dragEl, rootEl, oldIndex, newIndex);\n\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'sort', dragEl, rootEl, oldIndex, newIndex);\n\n\t\t\t\t\t\t\t// Add event\n\t\t\t\t\t\t\t_dispatchEvent(null, parentEl, 'add', dragEl, rootEl, oldIndex, newIndex);\n\n\t\t\t\t\t\t\t// Remove event\n\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'remove', dragEl, rootEl, oldIndex, newIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Remove clone\n\t\t\t\t\t\tcloneEl && cloneEl.parentNode.removeChild(cloneEl);\n\n\t\t\t\t\t\tif (dragEl.nextSibling !== nextEl) {\n\t\t\t\t\t\t\t// Get the index of the dragged element within its parent\n\t\t\t\t\t\t\tnewIndex = _index(dragEl, options.draggable);\n\n\t\t\t\t\t\t\tif (newIndex >= 0) {\n\t\t\t\t\t\t\t\t// drag & drop within the same list\n\t\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'update', dragEl, rootEl, oldIndex, newIndex);\n\t\t\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'sort', dragEl, rootEl, oldIndex, newIndex);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (KvSortable.active) {\n\t\t\t\t\t\tif (newIndex === null || newIndex === -1) {\n\t\t\t\t\t\t\tnewIndex = oldIndex;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_dispatchEvent(this, rootEl, 'end', dragEl, rootEl, oldIndex, newIndex);\n\n\t\t\t\t\t\t// Save sorting\n\t\t\t\t\t\tthis.save();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tthis._nulling();\n\t\t},\n\n\t\t_nulling: function() {\n\t\t\t// Nulling\n\t\t\trootEl =\n\t\t\tdragEl =\n\t\t\tparentEl =\n\t\t\tghostEl =\n\t\t\tnextEl =\n\t\t\tcloneEl =\n\n\t\t\tscrollEl =\n\t\t\tscrollParentEl =\n\n\t\t\ttapEvt =\n\t\t\ttouchEvt =\n\n\t\t\tmoved =\n\t\t\tnewIndex =\n\n\t\t\tlastEl =\n\t\t\tlastCSS =\n\n\t\t\tactiveGroup =\n\t\t\tKvSortable.active = null;\n\t\t},\n\n\t\thandleEvent: function (/**Event*/evt) {\n\t\t\tvar type = evt.type;\n\n\t\t\tif (type === 'dragover' || type === 'dragenter') {\n\t\t\t\tif (dragEl) {\n\t\t\t\t\tthis._onDragOver(evt);\n\t\t\t\t\t_globalDragOver(evt);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (type === 'drop' || type === 'dragend') {\n\t\t\t\tthis._onDrop(evt);\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Serializes the item into an array of string.\n\t\t * @returns {String[]}\n\t\t */\n\t\ttoArray: function () {\n\t\t\tvar order = [],\n\t\t\t\tel,\n\t\t\t\tchildren = this.el.children,\n\t\t\t\ti = 0,\n\t\t\t\tn = children.length,\n\t\t\t\toptions = this.options;\n\n\t\t\tfor (; i < n; i++) {\n\t\t\t\tel = children[i];\n\t\t\t\tif (_closest(el, options.draggable, this.el)) {\n\t\t\t\t\torder.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn order;\n\t\t},\n\n\n\t\t/**\n\t\t * Sorts the elements according to the array.\n\t\t * @param  {String[]}  order  order of the items\n\t\t */\n\t\tsort: function (order) {\n\t\t\tvar items = {}, rootEl = this.el;\n\n\t\t\tthis.toArray().forEach(function (id, i) {\n\t\t\t\tvar el = rootEl.children[i];\n\n\t\t\t\tif (_closest(el, this.options.draggable, rootEl)) {\n\t\t\t\t\titems[id] = el;\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\torder.forEach(function (id) {\n\t\t\t\tif (items[id]) {\n\t\t\t\t\trootEl.removeChild(items[id]);\n\t\t\t\t\trootEl.appendChild(items[id]);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\n\t\t/**\n\t\t * Save the current sorting\n\t\t */\n\t\tsave: function () {\n\t\t\tvar store = this.options.store;\n\t\t\tstore && store.set(this);\n\t\t},\n\n\n\t\t/**\n\t\t * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\n\t\t * @param   {HTMLElement}  el\n\t\t * @param   {String}       [selector]  default: `options.draggable`\n\t\t * @returns {HTMLElement|null}\n\t\t */\n\t\tclosest: function (el, selector) {\n\t\t\treturn _closest(el, selector || this.options.draggable, this.el);\n\t\t},\n\n\n\t\t/**\n\t\t * Set/get option\n\t\t * @param   {string} name\n\t\t * @param   {*}      [value]\n\t\t * @returns {*}\n\t\t */\n\t\toption: function (name, value) {\n\t\t\tvar options = this.options;\n\n\t\t\tif (value === void 0) {\n\t\t\t\treturn options[name];\n\t\t\t} else {\n\t\t\t\toptions[name] = value;\n\n\t\t\t\tif (name === 'group') {\n\t\t\t\t\t_prepareGroup(options);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\n\t\t/**\n\t\t * Destroy\n\t\t */\n\t\tdestroy: function () {\n\t\t\tvar el = this.el;\n\n\t\t\tel[expando] = null;\n\n\t\t\t_off(el, 'mousedown', this._onTapStart);\n\t\t\t_off(el, 'touchstart', this._onTapStart);\n\n\t\t\tif (this.nativeDraggable) {\n\t\t\t\t_off(el, 'dragover', this);\n\t\t\t\t_off(el, 'dragenter', this);\n\t\t\t}\n\n\t\t\t// Remove draggable attributes\n\t\t\tArray.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n\t\t\t\tel.removeAttribute('draggable');\n\t\t\t});\n\n\t\t\ttouchDragOverListeners.splice(touchDragOverListeners.indexOf(this._onDragOver), 1);\n\n\t\t\tthis._onDrop();\n\n\t\t\tthis.el = el = null;\n\t\t}\n\t};\n\n\n\tfunction _cloneHide(state) {\n\t\tif (cloneEl && (cloneEl.state !== state)) {\n\t\t\t_css(cloneEl, 'display', state ? 'none' : '');\n\t\t\t!state && cloneEl.state && rootEl.insertBefore(cloneEl, dragEl);\n\t\t\tcloneEl.state = state;\n\t\t}\n\t}\n\n\n\tfunction _closest(/**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx) {\n\t\tif (el) {\n\t\t\tctx = ctx || document;\n\n\t\t\tdo {\n\t\t\t\tif (\n\t\t\t\t\t(selector === '>*' && el.parentNode === ctx)\n\t\t\t\t\t|| _matches(el, selector)\n\t\t\t\t) {\n\t\t\t\t\treturn el;\n\t\t\t\t}\n\t\t\t}\n\t\t\twhile (el !== ctx && (el = el.parentNode));\n\t\t}\n\n\t\treturn null;\n\t}\n\n\n\tfunction _globalDragOver(/**Event*/evt) {\n\t\tif (evt.dataTransfer) {\n\t\t\tevt.dataTransfer.dropEffect = 'move';\n\t\t}\n\t\tevt.preventDefault();\n\t}\n\n\n\tfunction _on(el, event, fn) {\n\t\tel.addEventListener(event, fn, false);\n\t}\n\n\n\tfunction _off(el, event, fn) {\n\t\tel.removeEventListener(event, fn, false);\n\t}\n\n\n\tfunction _toggleClass(el, name, state) {\n\t\tif (el) {\n\t\t\tif (el.classList) {\n\t\t\t\tel.classList[state ? 'add' : 'remove'](name);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar className = (' ' + el.className + ' ').replace(RSPACE, ' ').replace(' ' + name + ' ', ' ');\n\t\t\t\tel.className = (className + (state ? ' ' + name : '')).replace(RSPACE, ' ');\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction _css(el, prop, val) {\n\t\tvar style = el && el.style;\n\n\t\tif (style) {\n\t\t\tif (val === void 0) {\n\t\t\t\tif (document.defaultView && document.defaultView.getComputedStyle) {\n\t\t\t\t\tval = document.defaultView.getComputedStyle(el, '');\n\t\t\t\t}\n\t\t\t\telse if (el.currentStyle) {\n\t\t\t\t\tval = el.currentStyle;\n\t\t\t\t}\n\n\t\t\t\treturn prop === void 0 ? val : val[prop];\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (!(prop in style)) {\n\t\t\t\t\tprop = '-webkit-' + prop;\n\t\t\t\t}\n\n\t\t\t\tstyle[prop] = val + (typeof val === 'string' ? '' : 'px');\n\t\t\t}\n\t\t}\n\t}\n\n\n\tfunction _find(ctx, tagName, iterator) {\n\t\tif (ctx) {\n\t\t\tvar list = ctx.getElementsByTagName(tagName), i = 0, n = list.length;\n\n\t\t\tif (iterator) {\n\t\t\t\tfor (; i < n; i++) {\n\t\t\t\t\titerator(list[i], i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn list;\n\t\t}\n\n\t\treturn [];\n\t}\n\n\n\n\tfunction _dispatchEvent(kvsortable, rootEl, name, targetEl, fromEl, startIndex, newIndex) {\n\t\tvar evt = document.createEvent('Event'),\n\t\t\toptions = (kvsortable || rootEl[expando]).options,\n\t\t\tonName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);\n\n\t\tevt.initEvent(name, true, true);\n\n\t\tevt.to = rootEl;\n\t\tevt.from = fromEl || rootEl;\n\t\tevt.item = targetEl || rootEl;\n\t\tevt.clone = cloneEl;\n\n\t\tevt.oldIndex = startIndex;\n\t\tevt.newIndex = newIndex;\n\n\t\trootEl.dispatchEvent(evt);\n\n\t\tif (options[onName]) {\n\t\t\toptions[onName].call(kvsortable, evt);\n\t\t}\n\t}\n\n\n\tfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect) {\n\t\tvar evt,\n\t\t\tkvsortable = fromEl[expando],\n\t\t\tonMoveFn = kvsortable.options.onMove,\n\t\t\tretVal;\n\n\t\tevt = document.createEvent('Event');\n\t\tevt.initEvent('move', true, true);\n\n\t\tevt.to = toEl;\n\t\tevt.from = fromEl;\n\t\tevt.dragged = dragEl;\n\t\tevt.draggedRect = dragRect;\n\t\tevt.related = targetEl || toEl;\n\t\tevt.relatedRect = targetRect || toEl.getBoundingClientRect();\n\n\t\tfromEl.dispatchEvent(evt);\n\n\t\tif (onMoveFn) {\n\t\t\tretVal = onMoveFn.call(kvsortable, evt);\n\t\t}\n\n\t\treturn retVal;\n\t}\n\n\n\tfunction _disableDraggable(el) {\n\t\tel.draggable = false;\n\t}\n\n\n\tfunction _unsilent() {\n\t\t_silent = false;\n\t}\n\n\n\t/** @returns {HTMLElement|false} */\n\tfunction _ghostIsLast(el, evt) {\n\t\tvar lastEl = el.lastElementChild,\n\t\t\t\trect = lastEl.getBoundingClientRect();\n\n\t\treturn ((evt.clientY - (rect.top + rect.height) > 5) || (evt.clientX - (rect.right + rect.width) > 5)) && lastEl; // min delta\n\t}\n\n\n\t/**\n\t * Generate id\n\t * @param   {HTMLElement} el\n\t * @returns {String}\n\t * @private\n\t */\n\tfunction _generateId(el) {\n\t\tvar str = el.tagName + el.className + el.src + el.href + el.textContent,\n\t\t\ti = str.length,\n\t\t\tsum = 0;\n\n\t\twhile (i--) {\n\t\t\tsum += str.charCodeAt(i);\n\t\t}\n\n\t\treturn sum.toString(36);\n\t}\n\n\t/**\n\t * Returns the index of an element within its parent for a selected set of\n\t * elements\n\t * @param  {HTMLElement} el\n\t * @param  {selector} selector\n\t * @return {number}\n\t */\n\tfunction _index(el, selector) {\n\t\tvar index = 0;\n\n\t\tif (!el || !el.parentNode) {\n\t\t\treturn -1;\n\t\t}\n\n\t\twhile (el && (el = el.previousElementSibling)) {\n\t\t\tif (el.nodeName.toUpperCase() !== 'TEMPLATE'\n\t\t\t\t\t&& _matches(el, selector)) {\n\t\t\t\tindex++;\n\t\t\t}\n\t\t}\n\n\t\treturn index;\n\t}\n\n\tfunction _matches(/**HTMLElement*/el, /**String*/selector) {\n\t\tif (el) {\n\t\t\tselector = selector.split('.');\n\n\t\t\tvar tag = selector.shift().toUpperCase(),\n\t\t\t\tre = new RegExp('\\\\s(' + selector.join('|') + ')(?=\\\\s)', 'g');\n\n\t\t\treturn (\n\t\t\t\t(tag === '' || el.nodeName.toUpperCase() == tag) &&\n\t\t\t\t(!selector.length || ((' ' + el.className + ' ').match(re) || []).length == selector.length)\n\t\t\t);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tfunction _throttle(callback, ms) {\n\t\tvar args, _this;\n\n\t\treturn function () {\n\t\t\tif (args === void 0) {\n\t\t\t\targs = arguments;\n\t\t\t\t_this = this;\n\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tif (args.length === 1) {\n\t\t\t\t\t\tcallback.call(_this, args[0]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallback.apply(_this, args);\n\t\t\t\t\t}\n\n\t\t\t\t\targs = void 0;\n\t\t\t\t}, ms);\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction _extend(dst, src) {\n\t\tif (dst && src) {\n\t\t\tfor (var key in src) {\n\t\t\t\tif (src.hasOwnProperty(key)) {\n\t\t\t\t\tdst[key] = src[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn dst;\n\t}\n\n\n\t// Export utils\n\tKvSortable.utils = {\n\t\ton: _on,\n\t\toff: _off,\n\t\tcss: _css,\n\t\tfind: _find,\n\t\tis: function (el, selector) {\n\t\t\treturn !!_closest(el, selector, el);\n\t\t},\n\t\textend: _extend,\n\t\tthrottle: _throttle,\n\t\tclosest: _closest,\n\t\ttoggleClass: _toggleClass,\n\t\tindex: _index\n\t};\n\n\n\t/**\n\t * Create kvsortable instance\n\t * @param {HTMLElement}  el\n\t * @param {Object}      [options]\n\t */\n\tKvSortable.create = function (el, options) {\n\t\treturn new KvSortable(el, options);\n\t};\n\n\n\t// Export\n\tKvSortable.version = '1.4.2';\n\treturn KvSortable;\n});\n/**\n * jQuery plugin for KvSortable\n * @author\tRubaXa   <trash@rubaxa.org>\n * @license MIT\n */\n(function (factory) {\n\t\"use strict\";\n\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine([\"jquery\"], factory);\n\t}\n\telse {\n\t\t/* jshint sub:true */\n\t\tfactory(jQuery);\n\t}\n})(function ($) {\n\t\"use strict\";\n\n\n\t/* CODE */\n\n\n\t/**\n\t * jQuery plugin for KvSortable\n\t * @param   {Object|String} options\n\t * @param   {..*}           [args]\n\t * @returns {jQuery|*}\n\t */\n\t$.fn.kvsortable = function (options) {\n\t\tvar retVal,\n\t\t\targs = arguments;\n\n\t\tthis.each(function () {\n\t\t\tvar $el = $(this),\n\t\t\t\tkvsortable = $el.data('kvsortable');\n\n\t\t\tif (!kvsortable && (options instanceof Object || !options)) {\n\t\t\t\tkvsortable = new KvSortable(this, options);\n\t\t\t\t$el.data('kvsortable', kvsortable);\n\t\t\t}\n\n\t\t\tif (kvsortable) {\n\t\t\t\tif (options === 'widget') {\n\t\t\t\t\treturn kvsortable;\n\t\t\t\t}\n\t\t\t\telse if (options === 'destroy') {\n\t\t\t\t\tkvsortable.destroy();\n\t\t\t\t\t$el.removeData('kvsortable');\n\t\t\t\t}\n\t\t\t\telse if (typeof kvsortable[options] === 'function') {\n\t\t\t\t\tretVal = kvsortable[options].apply(kvsortable, [].slice.call(args, 1));\n\t\t\t\t}\n\t\t\t\telse if (options in kvsortable.options) {\n\t\t\t\t\tretVal = kvsortable.option.apply(kvsortable, args);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn (retVal === void 0) ? this : retVal;\n\t};\n});\n"]},"metadata":{},"sourceType":"module"}